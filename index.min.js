/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).OP=n()}(this,(function(){"use strict";var t=function(t){return Array.isArray(t)},n=function(t,n){return t&&i(n)&&t instanceof n},e=function(t){return"number"==typeof t},r=function(t,e){return void 0===e&&(e=!0),"object"==typeof t&&(!e||n(t,Object))},i=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},u=function(t){return"string"==typeof t},o=function n(e){if(t(e))return e.map((function(t){return n(e)}));if(r(e)){for(var i in e)e[i]=n(e[i]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},f=function(t){return t.replace(/[-_.](\w)/g,(function(t,n){return c(n)}))},c=function(t){return t.toUpperCase()},l=function(t){return t.length},s=function(t,n){return void 0===n&&(n=10),n?parseInt(t,n):parseFloat(t)},a=function(t){return Object.keys(t)},d=function n(e){if(t(e))return e.map((function(t){return n(t)}));if(function(t){return/^-?(?:\d*.)?\d+$/.test(t+"")}(e))return s(e);if(r(e)){for(var i in e)e[i]=n(e[i]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},p=document,v=window,h=p.body,g=p.documentElement,m=function(t,n){var r=t.children;return e(n)?r[n]||null:r||[]},b=function(t){return t.parentNode||null},y=function(t,n,e){void 0===e&&(e=!0);var r=v.getComputedStyle(t).getPropertyValue(n);return e&&(r=d(r)),r||""===r||0===r?r:null},k=function(t,n){void 0===n&&(n=!0);var e="textContent";if(!E(t,e))return!1;var r=t[e];return""!==(r=n?r.trim():r)?r:null},x=function(t,n){return t.hasAttribute(n)},w=function(t,n){return t.classList.contains(n)},E=function(t,n){return n in t},L=function(t){return t===v},O=function(t,n){return t.removeAttribute(n),t},_=function(t,n){return t.classList.remove(n),t},T=function(t,n){return O(t,"data-"+n)},A=function(t,n){return t.style[f(n)]=null,t},C=function(t,n,e){return!0===e&&(e=n),t.setAttribute(n,o(e)),t},P=function(t,n){return t.append(n),n},H=function(t,n){return t.classList.add(n),t},N=function(n,e,i){return(t(i)||r(i))&&(i=JSON.stringify(i)),C(n,"data-"+e,i)},S=function(t,n,e){return t=u(t)?p.createElement(t):t,r(n)&&(e=n,n=!1),u(n)&&W(t,n),r(e)&&function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?C(t,r,e):O(t,r)}(t,e),t},W=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="innerHTML";return E(t,r)&&(t[r]=e?n.trim():n),t},B=function(t,n,r){return e(r)&&(r+="px"),t.style[f(n)]=o(r),t},D=function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?B(t,r,e):A(t,r);return t},I=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="textContent";return E(t,r)&&(t[r]=e?n.trim():n),t},U={},z=function(t,n,e,r){n.dispatchEvent(function(t,n,e){return e&&i(U[t])?U[t]:U[t]=new Event(t,n)}(t,e,r))},F=function(t,n,e,r){t.forEach((function(t){return z(t,n,e,r)}))},J=function(t,n,e){n.removeEventListener(t,e)},K=function(t){return t&&t.preventDefault()},M=function(t,n,e,r){void 0===r&&(r=!1),n.addEventListener(t,e,r)};function R(t){var n={};return t.hooks=n,t.fire=function(e,r){return i(n[e])?(n[e].forEach((function(n){return n.apply(t,r)})),t):t},t.off=function(e,r){if(!i(e))return n={},t;if(i(n[e]))if(i(r)){for(var u=0,o=n[e].length;u<o;++u)if(r===n[e][u]){n[e].splice(u,1);break}0===j&&delete n[e]}else delete n[e];return t},t.on=function(e,r){return i(n[e])||(n[e]=[]),i(r)&&n[e].push(r),t},t}var V=function(t){return L(t)?[t.innerWidth,t.innerHeight]:[t.offsetWidth,t.offsetHeight]},X=function(t,n){return t.scrollLeft=n[0],t.scrollTop=n[1],t};function Y(t,e={}){if(!t)return;const r=this;if(!n(r,Y))return new Y(t,e);if(t.OP)return;let{fire:i,hooks:f}=R(r);var c;function p(){let t=E();return[u(t)?d(t):t,r.options]}function E(){let n=t.value;return""!==n?n:null}function A(n){t.value=n}r.state=e=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return Object.assign.apply(Object,[{}].concat(n))}(Y.state,e),r.options={},r.source=t,r.value=t.value,Y.instances[t.id||t.name||(c=Y.instances,l(a(c)))]=r,t.OP=1;let j=e.class,W=S(t,{class:j+"-source",tabindex:-1}),U=m(W),$=W.multiple,q=0,G=W.options,Q=e.parent||h,Z=W.size,tt=W.title,nt=E(),et=S("div",{class:j,tabindex:0,title:tt}),rt=S("b","‌"),it=S("div",{tabindex:-1}),ut=[],ot=!1;var ft,ct;function lt(){$||Z||(_(et,"open"),i("exit",p()))}function st(t){!function(t,n,e){t.classList.toggle(n,e)}(et,"open",t);let n=at();return i(n?"enter":"exit",p()),n}function at(){return w(et,"open")}function dt(t){vt()}function pt(t){et.focus()}function vt(){let t=ut.find((t=>nt===t._value));t&&z("click",t)}function ht(t){_(t,"active"),O(t._item,"selected"),t._item.selected=!1}function gt(t){H(t,"active"),C(t._item,"selected",!0),t._item.selected=!0}function mt(t){let n=this;n._item;let e=nt;nt=n._value;let r=[];if(t.isTrusted&&et.focus(),K(t),ot){w(n,"active")?ht(n):gt(n);for(let t=0,n=l(G);t<n;++t)x(G[t],"selected")&&r.push(k(ut[t]));I(rt,r.join(", ")||"‌")}else I(rt,k(n)),ut.forEach((t=>{nt===t._value?(gt(t),H(t,"active")):(ht(t),_(t,"active"))})),nt!==e&&(F(["input","change"],W),i("change",p()))}function bt(t){_(et,"focus"),i("blur",p())}function yt(t){if(Z)return H(et,"open"),void i("enter",p());st()&&_t(et)}function kt(t){H(et,"focus"),i("focus",p())}function xt(t){let n=t.key,e=W.selectedIndex,r=ut[e],i=t=>w(t,"dead"),u=at();if($&&(ot=t.ctrlKey),"ArrowDown"===n){for(;(r=ut[++e])&&i(r););r&&(z("click",r),st(u)),K(t)}else if("ArrowUp"===n){for(;(r=ut[--e])&&i(r););r&&(z("click",r),st(u)),K(t)}else if("End"===n){for(e=l(G);(r=ut[--e])&&i(r););r&&(z("click",r),st(u)),K(t)}else if("Enter"===n)st(),K(t);else if("Escape"===n)!Z&&lt();else if("Home"===n){for(e=0;(r=ut[++e])&&i(r););r&&(z("click",r),st(u)),K(t)}else"Tab"===n&&(r&&z("click",r),!Z&&lt());u&&_t(et)}function wt(t){$&&(ot=!1)}function Et(t){let n=t.target;if(n!==et)for(;(n=b(n))&&et!==n;);et!==n&&lt()}function Lt(){at()&&_t(et)}function Ot(t,n){if("optgroup"===function(t){return(t&&t.nodeName||"").toLowerCase()||null}(t)){let e=S("span"),r=m(t);e.title=t.label;for(let t=0,n=l(r);t<n;++t)Ot(r[t],e);return void P(n,e)}let e=function(t,n,e){if(void 0===e&&(e=!0),!x(t,n))return null;var r=t.getAttribute(n);return e?d(r):r}(t,"value",!1),i=k(t),u=S("a",i,{title:i});e=e||i,u._index=q,u._item=t,u._value=e,function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?N(t,r,e):T(t,r)}(u,{index:q,value:e}),r.options[e]=i,t.disabled?H(u,"dead"):M("click",u,mt),P(n,u),ut.push(u),e===nt&&(H(u,"active"),I(rt,i),A(nt),r.option=nt),++q}function _t(t){let n=s(y(t,"border-top-width")),e=s(y(t,"border-bottom-width"));if(!Z){let[r,i,u,o]=function(t){var n,e,r,i,u,o,f;return L(t)?(i=t.pageXOffset||g.scrollLeft||h.scrollLeft,u=t.pageYOffset||g.scrollTop||h.scrollTop,r=t.innerWidth,n=t.innerHeight):(i=(e=t.getBoundingClientRect()).left,u=e.top,r=e.width,n=e.height,o=e.right,f=e.bottom),[i,u,r,n,o,f]}(t),f=V(v)[1],c=f-i-o;D(it,{bottom:"",left:r,"max-height":c,top:i+o-n,width:u}),c<(f-o)/2?(c=i,D(it,{top:"",bottom:f-i-e,"max-height":c+n}),H(it,"up")):_(it,"up")}let r=ut.find((t=>w(t,"active")));if(r){let t=V(r)[1],n=V(it)[1],[e,i]=function(t){return[t.offsetLeft,t.offsetTop]}(r),u=function(t){return[t.scrollLeft,t.scrollTop]}(it)[1];i<u?X(it,[e,i]):i+t-n>u&&X(it,[e,i+t-n])}i("fit",p())}P(et,rt),ct=et,b(ft=W).insertBefore(ct,function(t){return t.nextElementSibling||null}(ft)),W.disabled?H(et,"dead"):(M("scroll",v,Lt),M("click",Q,Et),M("focus",W,pt),M("change",W,dt),M("input",W,vt),M("blur",et,bt),M("click",et,yt),M("focus",et,kt),M("keydown",et,xt),M("keyup",et,wt));let Tt=l(U);if(Tt){P(et,it);for(let t=0;t<Tt;++t)Ot(U[t],it);if(Z){let t=ut[0],n=V(t)[1]*Z;B(it,"max-height",n)}}return Z&&H(et,"open"),r.get=(t=!0)=>{let n=E();return t?d(n):n},r.pop=()=>t.OP?(delete t.OP,M("scroll",v,Lt),J("click",Q,Et),J("change",W,dt),J("focus",W,pt),J("input",W,vt),_(W,j+"-source"),J("blur",et,bt),J("click",et,yt),J("focus",et,kt),J("keydown",et,xt),J("keyup",et,wt),letText(et),function(t){var n=b(t);t.remove()}(et),i("pop",p())):r,r.set=n=>(A(o(n)),F(["input","change"],t),i("change",p()),r),r.self=et,r}return Y.instances={},Y.state={class:"option-picker",parent:null},Y.version="1.0.0",Y}));