/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2025 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).OptionPicker=n()}(this,(function(){"use strict";var t=function(t,n){return-1!==n.indexOf(t)},n=function(t){return Array.isArray(t)},e=function(t){return u(t)&&0!=t%1},r=function(t){return"function"==typeof t},i=function(t,n,e){return!(!t||"object"!=typeof t)&&(e?s(n)&&s(t.constructor)&&n===t.constructor:s(n)&&t instanceof n)},o=function(t){return u(t)&&0==t%1},u=function(t){return"number"==typeof t},a=function(t,n){return void 0===n&&(n=!0),!(!t||"object"!=typeof t)&&(!n||i(t,Object,1))},s=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},f=function(t){return"string"==typeof t},l=function(t){return t.replace(/[-_.](\w)/g,(function(t,n){return v(n)}))},c=function(t){return t.toLowerCase()},v=function(t){return t.toUpperCase()},p=function(t){return t.length},d=function(t){if(n(t))return t.map((function(t){return d(t)}));if(a(t)){for(var e in t)t[e]=d(t[e]);return t}return f(t)&&function(t){return/^[+-]?(?:\d*.)?\d+$/.test(t+"")}(t)?"0"===t[0]&&-1===t.indexOf(".")?t:function(t,n){return void 0===n&&(n=10),n?parseInt(t,n):parseFloat(t)}(t):"false"!==t&&("null"===t?null:"true"===t||t)},h=function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var o=r.shift(),u=0,f=p(r);u<f;++u)for(var l in r[u])if(s(o[l]))if(n(o[l])&&n(r[u][l])){o[l]=[].concat(o[l]);for(var c=0,v=p(r[u][l]);c<v;++c)t(r[u][l][c],o[l])||o[l].push(r[u][l][c])}else a(o[l])&&a(r[u][l])?o[l]=h({},o[l],r[u][l]):o[l]=r[u][l];else o[l]=r[u][l];return o},_=function(t){if(n(t))return t.map((function(n){return _(t)}));if(a(t)){for(var e in t)t[e]=_(t[e]);return t}return!1===t?"false":null===t?"null":!0===t?"true":""+t};function m(t,n){for(var e in t)n(t[e],e)}var g=document,k=window,b=g.body,y=g.documentElement,x=function(t){return t.firstElementChild||null},w=function(t){return t.lastElementChild||null},z=function(t,n){var e=[].slice.call(t.children);return u(n)?e[n]||null:e},E=function(t,n,e){void 0===e&&(e=!0);var r=function(t,n,e){if(void 0===e&&(e=!0),!N(t,n))return null;var r=t.getAttribute(n);return e?d(r):r}(t,"data-"+n,e),i=(r+"").trim();return e&&i&&("["===i[0]&&"]"===i.slice(-1)||"{"===i[0]&&"}"===i.slice(-1))&&null!==(i=function(t){var n=null;try{n=JSON.parse(t)}catch(t){}return n}(r))?i:r},T=function(t){return c(t&&t.nodeName||"")||null},L=function(t,n){return t["next"+(n?"":"Element")+"Sibling"]||null},O=function(t,n){return n?t.closest(n)||null:t.parentNode||null},A=function(t){var n="form";return R(t,n)&&n===T(t[n])?t[n]:O(t,n)},C=function(t,n){return t["previous"+(n?"":"Element")+"Sibling"]||null},P=function(t,n,e){var r=k.getComputedStyle(t).getPropertyValue(n);return r||""===r||0===r?r:null},S=function(t,n){return R(t,n)&&t[n]||null},M=function(t,n){void 0===n&&(n=!0);var e="textContent";if(!R(t,e))return!1;var r=t[e];return""!==(r=n?r.trim():r)?r:null},N=function(t,n){return t.hasAttribute(n)},j=function(t,n){return t.classList.contains(n)},R=function(t,n){return n in t},D=function(t,n){return t.removeAttribute(n),t},H=function(t,n){return t.classList.remove(n),t},I=function(t,n){return D(t,"data-"+n)},K=function(t){var n=O(t);return t.remove(),n},B=function(t,n){return t.style[l(n)]=null,t},U=function(t,n,e){return!0===e&&(e=n),t.setAttribute(n,_(e)),t},Y=function(t,n){return t.append(n),n},J=function(t,n){return t.classList.add(n),t},V=function(t,e){return n(e)?(r=function(n){return J(t,n)},e.forEach(r),t):a(e)?(m(e,(function(n,e){return n?J(t,e):H(t,e)})),t):(t.className=e,t);var r},W=function(t,e,r){return(n(r)||a(r))&&(r=JSON.stringify(r)),U(t,"data-"+e,r)},q=function(t,n,e){return t=f(t)?g.createElement(t):t,a(n)&&(e=n,n=!1),f(n)&&F(t,n),a(e)?(function(t,n){m(n,(function(n,e){n||""===n||0===n?U(t,e,n):D(t,e)}))}(t,e),t):t},F=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="innerHTML";return R(t,r)&&(t[r]=e?n.trim():n),t},X=function(t,n,e){return u(e)&&(e+="px"),t.style[l(n)]=_(e),t},$=function(t,n){return m(n,(function(n,e){n||""===n||0===n?X(t,e,n):B(t,e)})),t},G=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="textContent";return R(t,r)&&(t[r]=e?n.trim():n),t},Q=function(t,n){var e;return function(){var r=arguments,i=this;e&&clearTimeout(e),e=setTimeout((function(){return t.apply(i,r)}),n)}},Z=function(t,n){return function(){var e=arguments,r=this;setTimeout((function(){return t.apply(r,e)}),n)}},tt=function(t){var n,e,r,i,o,u,a;return!function(t){return t===k}(t)?(i=(e=t.getBoundingClientRect()).left,o=e.top,r=e.width,n=e.height,u=e.right,a=e.bottom):(i=t.pageXOffset||y.scrollLeft||b.scrollLeft,o=t.pageYOffset||y.scrollTop||b.scrollTop,r=t.innerWidth,n=t.innerHeight),[i,o,r,n,u,a]},nt=function(t){return[t.scrollLeft,t.scrollTop]};var et=function(t,n,e){n.removeEventListener(t,e)},rt=function(t){return t&&t.preventDefault()},it=function(t){return t&&t.stopPropagation()},ot=function(t,n,e,r){void 0===r&&(r=!1),n.addEventListener(t,e,r)},ut="ArrowDown",at="ArrowUp",st="Backspace",ft="Delete",lt="Enter",ct="Escape",vt="PageDown",pt="PageUp",dt="Tab",ht=Q((function(t){return t.fit()}),10),_t=new WeakMap;function mt(t,e,i){var o,u,a=[],f=t._options,l=t.self,c=t.state;c.n;var v=Ct(l);if(Nt(l)?!(o=l.list)||z(o):z(o=l),f.let(null,0),Tt(i,(function(t,e){n(t)&&t[1]&&!t[1].disabled&&t[1].selected&&a.push(d(t[1].value||e)),It(d(e),t,f)})),r(c.options)||(c.options=i),0===p(a)){if(St(u=d(v),i))return[u];if(u=function(t){var e,r=t._options,i=t.self;try{Tt(r,(function(t,r){if(n(t)&&t[1]&&!t[1].disabled&&t[1].selected)throw e=d(t[1].value||r),""}))}catch(t){}if(!s(e)&&!Nt(i))try{Tt(r,(function(t,r){throw e=n(t)&&t[1]&&!t[1].disabled?d(t[1].value||r):d(t),""}))}catch(t){}return e}(t))return[u]}return a}function gt(t,e,r){var o=i(e,Map)?e:new Map;return n(e)?Et(e,(function(t){var e,r,i;n(t)?(t[0]=null!=(e=t[0])?e:"",t[1]=null!=(r=t[1])?r:{},It(d(null!=(i=t[1].value)?i:t[0]),t,o)):It(d(t),[t,{}],o)})):a(e,0)&&function(t,n){for(var e in t)n(t[e],e)}(e,(function(t,r){var i,u,a;n(t)?(e[r][0]=null!=(i=t[0])?i:"",e[r][1]=null!=(u=t[1])?u:{},It(d(null!=(a=t[1].value)?a:r),t,o)):It(d(r),[t,{}],o)})),mt(t,0,o)}function kt(t,n,e){Object.defineProperty(t,n,e)}function bt(t){t.focus()}function yt(t,n,e){n.mask;var r=n.state.n;if(t)return zt(n),e?bt(t):J(t,r+"__option--focus"),t}function xt(t,n,e){var r,i=t._options,o=t.state.n;if(o+="__option--disabled",r=Kt(i)["find"+(e||"")]((function(t){return!t[2].hidden&&!j(t[2],o)})))return yt(r[2],t,n)}function wt(t,n){return xt(t,n,"Last")}function zt(t){var n=t._options;t.mask;var e=t.state.n;e+="__option--focus",Tt(n,(function(t){return H(t[2],e)}))}function Et(t,n){t.forEach(n)}function Tt(t,n){t instanceof xn&&(t=t.map),Et(t,n)}function Lt(t){return E(t,"value",!1)}function Ot(t){var n,e,r=new Map,i=[],o=Ct(t);return Et(Nt(t)?(e=t.list)?z(e):[]:z(e=t),(function(t,n){var e=function(t,n){void 0===n&&(n=!0);for(var e,r=t.attributes,i={},o=0,u=r.length;o<u;++o)e=r[o].value,i[r[o].name]=n?d(e):e;return i}(t);Et(["disabled","selected"],(function(t){R(e,t)?(e[t]=""===e[t]||e[t],"selected"===t&&i.push(1)):e[t]=null})),"optgroup"===T(t)?Tt(Ot(t),(function(n,e){n[1]["&"]=t.label,It(d(e),n,r)})):It(d(t.value),[M(t)||t.value,e,null,t],r)})),0===p(i)&&(n=Pt(o=d(o),r))&&(n[1].selected=!0,It(o,n,r)),r}function At(t){return Pt(t,_t)||null}function Ct(t){return(t.value||"").replace(/\r/g,"")}function Pt(t,n){return n.get(t)}function St(t,n){return n.has(t)}function Mt(t){return t.disabled}function Nt(t){return"input"===T(t)}function jt(t){return t.readOnly}function Rt(t){return Dt(t,_t)}function Dt(t,n){return n instanceof xn?n.let(t):n.delete(t)}function Ht(t,n){return It(t,n,_t)}function It(t,n,e){return e.set(t,n)}function Kt(t){var n=[];return Tt(t,(function(t){return n.push(t)})),n}function Bt(t,n){var e=this;return t?i(e,Bt)?(Ht(t,function(t,n){return(n=n||t).fire=function(t,n,e){var r=this,i=r.hooks;return s(i[t])?(i[t].forEach((function(t){return t.apply(e||r,n)})),r):r},n.off=function(t,n){var e=this,r=e.hooks;if(!s(t))return r={},e;if(s(r[t]))if(s(n)){var i=r[t].length;if(0===i)delete r[t];else for(var o=0;o<i;++o)if(n===r[t][o]){r[t].splice(o,1);break}}else delete r[t];return e},n.on=function(t,n){var e=this.hooks;return s(e[t])||(e[t]=[]),s(n)&&e[t].push(n),this},t.hooks={},t}(e,Bt._)),e.attach(t,h({},Bt.state,n||{}))):new Bt(t,n):e}Bt.from=function(t,n){return new Bt(t,n)},Bt.of=At,Bt.state={n:"option-picker",options:null,size:null,strict:!1,with:[]},Bt.version="2.0.0",kt(Bt,"name",{value:"OptionPicker"});var Ut=Bt._=Bt.prototype;kt(Ut,"options",{get:function(){return this._options},set:function(t){var n,r=this,i=r._mask;r._options,r.state.n,(e(t)||o(t)||f(t))&&(t=[t]),p(n=gt(r,t,i.options))&&(r.value=n[0])}}),kt(Ut,"size",{get:function(){var t=this.state.size||1;return o(t)?t<1?1:t:1},set:function(t){var n=this,e=n._mask,r=n._options,i=n.mask,u=n.state,a=e.options;u.n;var s=o(t)?t<1?1:t:1;if(u.size=s,1===s)I(i,"size"),B(a,"max-height"),Rt(y);else{var f=Kt(r).find((function(t){return!t[2].hidden}));if(f){var l,c,v=P(a,"gap"),p=P(a,"padding-bottom"),d=null!=(l=null!=(c=P(f,"height"))?c:P(f,"min-height"))?l:P(f,"line-height");W(i,"size",s),X(a,"max-height","calc(("+d+" + max("+v+","+p+"))*"+s+")"),Ht(y,n)}}}}),kt(Ut,"text",{get:function(){var t=this._mask,n=t.input;return t.text?M(n):null},set:function(t){var n=this._mask,e=this.self,r=n.hint,i=n.input;n.text&&(G(i,_(t)),M(i,!1)?G(r,""):G(r,e.placeholder+""))}}),kt(Ut,"value",{get:function(){var t=Ct(this.self);return""===t?null:t},set:function(t){var n,e=this,r=e._options;e.mask,e.state.n,(n=Pt(d(t),r))&&kn(n[2],e)}}),kt(Ut,"values",{get:function(){},set:function(t){}});var Yt=Q((function(n,e,o,u){var a=f(e)?e:M(e)||"",s=c(a),l=n._event,v=n._mask,d=n.mask,h=n.self,_=n.state,m=v.options;v.value;var g=_.n,k=_.strict,b=E(d,"size");g+="__option--disabled";var y=o.count;if(u)try{Tt(o,(function(t){var e=c(M(t[2])+"\t"+Lt(t[2]));if(""!==s&&s===e.slice(0,p(s))&&!j(t[2],g))throw kn(t[2],n),b&&t[2].scrollIntoView({block:"nearest"}),"";--y}))}catch(t){}else zt(n),Tt(o,(function(n){var e=c(M(n[2])+"\t"+Lt(n[2]));""===s||t(s,e)?n[2].hidden=!1:(n[2].hidden=!0,--y)})),m.hidden=!y,k&&xt(n),h.value=k?"":a;n.fire("search",[l,a]);var x=_.options;0===y&&r(x)&&(U(m,"aria-busy","true"),x=x.call(n,a),i(x,Promise)?(m.hidden=!1,x.then((function(t){gt(n,t),D(m,"aria-busy"),n.fire("load",[l,t,a]).fit()}))):gt(n,x))}),10);function Jt(t){var n=this,e=At(n),r=e.state.n;e._event=t,H(n,r+="--focus"),H(n,r+="-self")}function Vt(t){var n=At(this),e=n.mask,r=n.state.n;n._event=t,H(this,r+"__option--focus"),H(e,r+="--focus"),H(e,r+"-option")}function Wt(t){var n=At(this),e=n._mask,r=n.mask,i=n.state,o=e.text,u=i.n,a=i.strict;n._event=t,H(o,u+"__text--focus"),H(r,u+="--focus"),H(r,u+"-text"),a&&(bn(n)||yn(n,0,1))}function qt(t){var n=this,e=At(n),r=e._mask,i=e.self,o=r.hint;e._event=t,Z((function(){return G(o,M(n,!1)?"":i.placeholder)}),1)()}function Ft(t){var n=this,e=At(n),r=e.state.n;e._event=t,J(n,r+="--focus"),J(n,r+="-self")}function Xt(t){var n=At(this),e=n.mask,r=n.state.n;mn(),n._event=t,J(this,r+"__option--focus"),J(e,r+="--focus"),J(e,r+="-option")}function $t(t){var n=At(this);n._event=t,n.focus()}function Gt(t){var n=this,e=At(n),r=e._mask,i=e.mask;e.self;var o=e.state,u=r.text,a=o.n;e._event=t,J(u,a+"__text--focus"),J(i,a+="--focus"),J(i,a+="-text"),M(n,!1)?gn(n):e.enter().fit()}function Qt(t){var n,e=this,r=t.key,i=At(e),o=i._mask,u=i._options,a=i.mask,s=i.self,f=i.state,l=o.hint,c=o.input,v=f.n,h=f.strict;if(i._event=t,Z((function(){return G(l,M(e,!1)?"":s.placeholder)}),1)(),st!==r&&ft!==r&&1!==p(r)||Z((function(){return i.enter().fit()}),11)(),ut===r||at===r||lt===r){var _=Pt(d(Ct(s)),u);if(!(_=_?_[2]:0)||_.hidden)for(_=(_=Kt(u).shift())?_[2]:0;_&&(j(_,v+"__option--disabled")||_.hidden);)_=L(_);j(a,v+"--open")?h&&bn(i)&&(i.exit(),bt(c),gn(c)):i.enter(),_&&bt(_),n=!0}else dt===r?i.exit():Yt(i,e,u);n&&(rt(t),it(t))}var Zt="",tn=Q((function(){return Zt=""}),500);function nn(t){var n,e=t.key,r=t.altKey,i=t.ctrlKey,o=At(this),u=o._options,a=o.self;if(tn(),Mt(a)||jt(a))return rt(t);o._event=t,st===e||ft===e?Zt="":ct===e?(Zt="",o.exit(n=!0)):dt===e?(Zt="",o.exit(!(n=!1))):ut===e||at===e||lt===e||vt===e||pt===e||""===Zt&&" "===e?o.enter(n=!0).fit():1!==p(e)||r||i||(Zt+=e),""!==Zt&&Yt(o,Zt,u,n=!0),n&&rt(t)}function en(t){var n,e=this,r=t.key,i=t.altKey,o=t.ctrlKey,u=At(e),a=u._mask;u._options,u.mask;var s=u.self,f=u.state,l=a.hint;a.input,a.value;var c,v,d,h=f.n;if(h+="__option",u._event=t,st===r)u.exit(n=!0);else if(lt===r||ct===r||dt===r||" "===r)ct!==r&&kn(e,u),u.exit(n=dt!==r);else if(ut===r||vt===r){for(n=!0,c=vt===r&&j(v=O(e),h+"-group")?L(v):L(e);c&&(j(c,h+"--disabled")||c.hidden);)c=L(c);for(c?j(c,h+"-group")&&(c=x(c)):((v=O(e))&&j(v,h+"-group")&&(c=L(v)),c&&j(c,h+"-group")&&(c=x(c)));c&&(j(c,h+"--disabled")||c.hidden);)c=L(c);c?yt(c,u,1):xt(u,1)}else if(at===r||pt===r){for(n=!0,d=pt===r&&j(v=O(e),h+"-group")?C(v):C(e);d&&(j(d,h+"--disabled")||d.hidden);)d=C(d);for(d?j(d,h+"-group")&&(d=w(d)):((v=O(e))&&j(v,h+"-group")&&(d=C(v)),d&&j(d,h+"-group")&&(d=w(d)));d&&(j(d,h+"--disabled")||d.hidden);)d=C(d);d?yt(d,u,1):wt(u,1)}else"Home"===r?(n=!0,xt(u,1)):"End"===r?(n=!0,wt(u,1)):(Nt(s)&&1===p(r)&&!i&&!o&&G(l,""),u.exit(!(n=!1)));n&&(rt(t),it(t))}function rn(t){var n=this,e=At(n),r=e._mask,i=e.self,o=r.hint;e._event=t,Z((function(){return G(n,M(n))}))(),Z((function(){return G(o,M(n,!1)?"":i.placeholder)}),1)()}function on(t){var n=this,e=At(n),r=e.self,i=e.state.n,o=t.target;rt(t),Mt(r)||jt(r)||E(n,"size")||(e._event=t,j(o,i+"__options")||O(o,"."+i+"__options")||e[j(n,i+"--open")?"exit":"enter"](!0).fit())}var un=0;function an(t){var n=this,e=At(n),r=e._mask,i=e.mask,o=r.options;e._event=t,"mousedown"===t.type?(kn(n,e),E(i,"size")||e.exit(!0)):(bt(n),un=nt(o)[1]),rt(t)}var sn=!1;function fn(t){"touchstart"===t.type&&(sn=t.touches[0].clientY);var n=At(this);if(n){var e=n.mask,r=n.state.n,i=t.target;n._event=t,e!==i&&e!==O(i,"."+r)&&(E(e,"size")?n.blur():(Rt(this),n.exit()))}}function ln(t){if(!1!==sn){var n,e,r=At(this);if(r._event=t,"touchmove"===t.type&&r){var i=r._mask.options,o=t.touches[0].clientY;if(i){var u=nt(i);u[1]-=o-sn,e=u,(n=i).scrollLeft=e[0],n.scrollTop=e[1],sn=o}}}}function cn(t){var n=At(this),e=n._mask.options;n._event=t,nt(e)[1]===un&&(kn(this,n),n.exit(!0))}function vn(){sn=!1}function pn(t){var n=At(this);n._event=t,n.reset()}function dn(t){var n=At(this);n&&(ht(n),n._event=t)}function hn(t){dn.call(this,t)}function _n(t){var n=At(this);return n._event=t,n.fire("submit",[t])}function mn(t){var n=g.getSelection();n.rangeCount&&n.removeRange(n.getRangeAt(0))}function gn(t,n){var e=g.getSelection();mn();var r=g.createRange();r.selectNodeContents(t),e.addRange(r),1===n?e.collapseToEnd():-1===n&&e.collapseToStart()}function kn(t,n){var e=n._event,r=n._mask;n._options;var i=n.self,o=n.state,u=r.hint,a=r.input,s=r.value,f=o.n;if(f+="__option--selected",t){var l,c=Ct(i);return yn(n),U(t._[0],"selected",""),J(t,f),i.value=l=Lt(t),Nt(i)?(G(u,""),G(a,M(t))):(W(s,"value",l),F(s,function(t,n){void 0===n&&(n=!0);var e="innerHTML";if(!R(t,e))return!1;var r=t[e];return""!==(r=n?r.trim():r)?r:null}(t))),l!==c&&n.fire("change",[e,d(l)]),t}}function bn(t,n){var e,r=t._options,i=t.state.n;if(i+="__option--disabled",e=Kt(r).find((function(t){return!t[2].hidden&&!j(t[2],i)})))return kn(e[2],t)}function yn(t,n,e){var r=t._event,i=t._mask,o=t._options,u=t.self,a=t.state,s=i.hint,f=i.input,l=i.options,c=i.value,v=a.n;v+="__option--selected",l.hidden=!1;var p=Ct(u);Tt(o,(function(t){D(t[3],"selected"),H(t[2],v)})),e&&(u.value="",Nt(u)?(G(s,u.placeholder),G(f,"")):(I(c,"value"),F(c,"")),n&&""!==p&&t.fire("change",[r,d("")]))}function xn(t,n){var e=this;return i(e,xn)?(e.count=0,e.map=new Map,e.of=t,n&&p(n)&&gt(t,n,t._mask.options),e):new xn(t,n)}Ut.attach=function(t,e){var o,u=this;t=t||u.self,e=e||u.state,u._active=!Mt(t)&&!jt(t),u._event=null,u._options=new xn(u),u._value=Ct(t)||null,u.self=t,u.state=e;var l=Nt(t),c=e.n,v=q("span",{class:c+"__arrow"}),d=A(t),h=q("div",{class:c,tabindex:!Mt(t)&&!l&&0});u.mask=h;var _,m,g=q("div",{class:c+"__options"}),b=q("div",{class:c+"__values"}),x=q("span",{class:c+"__"+(l?"text":"value")}),w=q("span",{autocapitalize:"off",contenteditable:!(Mt(t)||jt(t)||!l)&&"",spellcheck:!!l&&"false"}),z=q("span",l?t.placeholder+"":"");Y(h,b),Y(h,g),Y(b,x),Y(b,v),l?(ot("blur",w,Wt),ot("cut",w,qt),ot("focus",w,Gt),ot("keydown",w,Qt),ot("paste",w,rn),Y(x,w),Y(x,z),Ht(w,u)):(ot("blur",h,Jt),ot("focus",h,Ft),ot("keydown",h,nn)),J(t,c+"__self"),m=h,O(_=t).insertBefore(m,L(_,!0)),d&&(ot("reset",d,pn),ot("submit",d,_n),Ht(d,u)),ot("focus",t,$t),ot("mousedown",y,fn),ot("mousedown",h,on),ot("mousemove",y,ln),ot("mouseup",y,vn),ot("resize",k,dn),ot("scroll",k,hn),ot("touchend",y,vn),ot("touchmove",y,ln),ot("touchstart",y,fn),ot("touchstart",h,on),t.tabIndex=-1,Ht(h,u);var E={};E.arrow=v,E.hint=l?z:null,E.input=l?w:null,E.of=t,E.options=g,E.self=h,E[l?"text":"value"]=x,u._mask=E,u.size=null!=(o=e.size)?o:l?1:t.size;var T,C=e.options;return r(C)?(U(g,"aria-busy","true"),C=C.call(u,null),i(C,Promise)?C.then((function(t){D(g,"aria-busy"),p(T=gt(u,t))&&(u.value=T[0]),u.fire("load",[u._event,t,null]).fit()})):p(T=gt(u,C))&&(u.value=T[0])):p(T=gt(u,C||Ot(t)))&&(u.value=T[0]),s(e)&&n(e.with)&&Et(e.with,(function(n,i){f(n)&&(n=Bt[n]),r(n)?n.call(u,t,e):a(n)&&r(n.attach)&&n.attach.call(u,t,e)})),u},Ut.blur=function(){mn();var t=this,n=t._mask,e=t.mask;return(n.input||e).blur(),t.exit()},Ut.detach=function(){var t=this,e=t._mask,i=t.mask,o=t.self,u=t.state,s=e.input,l=A(o);return t._active=!1,t._options=new xn(t,u.options=Ot(o)),t._value=Ct(o)||null,l&&(et("reset",l,pn),et("submit",l,_n)),s&&(et("blur",s,Wt),et("blur",i,Jt),et("cut",s,qt),et("focus",s,Gt),et("focus",i,Ft),et("keydown",s,Qt),et("keydown",i,nn),et("paste",s,rn)),et("focus",o,$t),et("mousedown",y,fn),et("mousedown",i,on),et("mousemove",y,ln),et("mouseup",y,vn),et("resize",k,dn),et("scroll",k,hn),et("touchend",y,vn),et("touchmove",y,ln),et("touchstart",y,fn),et("touchstart",i,on),n(u.with)&&Et(u.with,(function(n,e){f(n)&&(n=Bt[n]),a(n)&&r(n.detach)&&n.detach.call(t,o,u)})),o.tabIndex=null,H(o,u.n+"__self"),K(i),t._mask={of:o},t.mask=null,t},Ut.enter=function(t,n){var e,r=this,i=r._event,o=r._mask,u=r._options,a=r.mask,s=r.self,f=r.state,l=o.input,c=f.n;J(a,c+"--open");var v=At(y);return v&&r!==v&&v.exit(),Ht(y,r),Ht(k,r),r.fire("enter",[i]),t&&(Nt(s)?(bt(l),gn(l,n)):(e=Pt(d(Ct(s)),u))&&bt(e[2]),r.fire("focus",[i]).fire("focus.option",[i])),r},Ut.exit=function(t,n){var e=this,r=e._event,i=e._mask,o=e._options,u=e.mask,a=e.self,s=e.state,f=i.input,l=s.n;return Tt(o,(function(t){return t[2].hidden=!1})),H(u,l+"--open"),e.fire("exit",[r]),t&&(Nt(a)?(bt(f),gn(f,n)):bt(u),e.fire("focus",[r]).fire("focus.self",[r])),e},Ut.fit=function(){var t=this,n=t._mask,e=t.mask,r=n.options;if(E(e,"size"))return t;var i=P(e,"border-bottom-width"),o=P(e,"border-top-width"),u=tt(e),a=tt(k);return u[1]+u[3]/2>a[3]/2?$(r,{bottom:"100%","max-height":"calc("+u[1]+"px + "+i+")",top:"auto"}):$(r,{bottom:"auto","max-height":"calc("+(a[3]-u[1]-u[3])+"px + "+o+")",top:"100%"}),t},Ut.focus=function(t){var n=this,e=n._mask,r=n.mask,i=e.input;return i?(bt(i),gn(i,t),n):(bt(r),n)},Ut.reset=function(t,n){var e=this;return e.value=e._value,e.fire("reset",[e._event]),t?e.focus(n):e},kt(xn,"name",{value:"Options"});var wn=xn.prototype;return wn.get=function(t){return Pt(d(t),this.map)},wn.has=function(t){return St(d(t),this.map)},wn.let=function(t,n){void 0===n&&(n=1);var e,r=this,i=r.map,o=r.of,u=o._mask,a=o.self,f=o.state,l=u.options,c=f.n;if(!s(t))return Tt(i,(function(t,n){return r.let(n)})),yn(o,1,n),l.hidden=!0,0===r.count;if(!(e=r.get(d(t))))return!1;var v=O(e[2]),h=O(e[3]),_=Lt(e[2]),m=o.value;return et("blur",e[2],Vt),et("focus",e[2],Xt),et("keydown",e[2],en),et("mousedown",e[2],an),et("touchend",e[2],cn),et("touchstart",e[2],an),K(e[2]),K(e[3]),(e=Dt(d(t),i))&&--r.count,v&&j(v,c+"__option-group")&&0===p(z(v))&&K(v),h&&"optgroup"===T(h)&&0===p(z(h))&&K(h),0===p(z(l))?(yn(o,1,!Nt(a)),l.hidden=!0):_===m&&bn(o),e},wn.set=function(t,n){var r,i,u,a=this;if(a.has(t))return a;var l,c,v,p,h,m,k,b,y,x,w=a.map,E=a.of,T=E._mask,L=E.self,O=E.state,A=T.options,C=O.n;(C+="__option",Nt(L)?!(l=L.list)||z(l):z(l=L),A.hidden=!1,s(n)?(e(n)||o(n)||f(n))&&(n=[n,{}]):n=[t,{}],R(n[1],"&"))?(x="."+C+'-group[data-value="'+n[1]["&"].replace(/"/g,'\\"')+'"]',(p=(A||g).querySelector(x))&&Lt(p)===n[1]["&"]||(Y(A,p=q("span",{class:C+"-group","data-value":n[1]["&"],title:null!=(b=S(n[1],"title"))&&b})),Y(l,h=q("optgroup",{label:n[1]["&"],title:null!=(y=S(n[1],"title"))&&y})),(m=S(n[1],"class"))&&(V(p,m),V(h,m)),(k=S(n[1],"style"))&&($(p,k),$(h,k)))):p=h=!1;var P=n[1],M=P.disabled,N=P.selected,j=P.value;return Mt(L)&&(M=!0),j=_(j||t),c=n[2]||q("span",_(n[0]),{class:C+(M?" "+C+"--disabled":"")+(N?" "+C+"--selected":""),"data-group":null!=(r=S(n[1],"&"))&&r,"data-value":j,tabindex:!M&&-1,title:null!=(i=S(n[1],"title"))&&i}),v=n[3]||q("option",_(n[0]),{disabled:!!M&&"",selected:!!N&&"",title:null!=(u=S(n[1],"title"))&&u,value:j}),(m=S(n[1],"class"))&&(V(c,m),V(v,m)),(k=S(n[1],"style"))&&($(c,k),$(v,k)),c._={},c._[0]=v,M||n[2]||(ot("blur",c,Vt),ot("focus",c,Xt),ot("keydown",c,en),ot("mousedown",c,an),ot("touchend",c,cn),ot("touchstart",c,an)),Y(p||A,c),Y(h||l,v),Ht(c,E),n[2]=c,n[3]=v,++a.count,It(d(t),n,w),E.value=E.value,a},Bt.Options=xn,Bt}));