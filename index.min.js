/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).OP=t()}(this,(function(){"use strict";var n=function(n,t){return-1!==t.indexOf(n)},t=function(n){return Array.isArray(n)},e=function(n,t){return n&&o(t)&&n instanceof t},r=function(n){return"number"==typeof n},i=function(n,t){return void 0===t&&(t=!0),"object"==typeof n&&(!t||e(n,Object))},o=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},u=function(n){return"string"==typeof n},f=function(n){return n.replace(/[-_.](\w)/g,(function(n,t){return l(t)}))},l=function(n){return n.toUpperCase()},c=function(n){return n.length},s=function(n,t){return void 0===t&&(t=10),t?parseInt(n,t):parseFloat(n)},a=function(n){return Object.keys(n)},d=function n(e){if(t(e))return e.map((function(t){return n(t)}));if(function(n){return/^-?(?:\d*.)?\d+$/.test(n+"")}(e))return s(e);if(i(e)){for(var r in e)e[r]=n(e[r]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},p=function e(){for(var r=arguments.length,u=Array(r),f=0;f<r;f++)u[f]=arguments[f];for(var l=u.shift(),s=0,a=c(u);s<a;++s)for(var d in u[s])if(o(l[d]))if(t(l[d])&&t(u[s][d])){l[d]=[].concat(l[d]);for(var p=0,v=c(u[s][d]);p<v;++p)n(u[s][d][p],l[d])||l[d].push(u[s][d][p])}else i(l[d])&&i(u[s][d])?l[d]=e({},l[d],u[s][d]):l[d]=u[s][d];else l[d]=u[s][d];return l},v=function n(e){if(t(e))return e.map((function(t){return n(e)}));if(i(e)){for(var r in e)e[r]=n(e[r]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},h=document,b=window,g=h.body,m=h.documentElement,y=function(n,t){var e=n.children;return r(t)?e[t]||null:e||[]},w=function(n,t){void 0===t&&(t=!0);var e=(L(n,"className")||"").trim();return t?e.split(/\s+/):e},x=function(n){return(n&&n.nodeName||"").toLowerCase()||null},k=function(n){return n.parentNode||null},E=function(n,t,e){void 0===e&&(e=!0);var r=b.getComputedStyle(n).getPropertyValue(t);return e&&(r=d(r)),r||""===r||0===r?r:null},L=function(n,t){return P(n,t)&&n[t]||null},O=function(n,t){void 0===t&&(t=!0);var e="textContent";if(!P(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},T=function(n,t){return n.hasAttribute(t)},A=function(n,t){return n.classList.contains(t)},P=function(n,t){return t in n},$=function(n){return n===b},z=function(n,t){return n.removeAttribute(t),n},C=function(n,t){return n.classList.remove(t),n},H=function(n,t){return z(n,"data-"+t)},N=function(n,t){return n.style[f(t)]=null,n},I=function(n,t,e){return!0===e&&(e=t),n.setAttribute(t,v(e)),n},S=function(n,t){return n.append(t),t},W=function(n,t){return n.classList.add(t),n},_=function(n,e,r){return(t(r)||i(r))&&(r=JSON.stringify(r)),I(n,"data-"+e,r)},B=function(n,t,e){return n=u(n)?h.createElement(n):n,i(t)&&(e=t,t=!1),u(t)&&D(n,t),i(e)&&function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?I(n,r,e):z(n,r)}(n,e),n},D=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="innerHTML";return P(n,r)&&(n[r]=e?t.trim():t),n},K=function(n,t,e){return r(e)&&(e+="px"),n.style[f(t)]=v(e),n},U=function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?K(n,r,e):N(n,r);return n},F=function(n,t,e){return n.classList.toggle(t,e),n},J=function(n,t,e){t.removeEventListener(n,e)},M=function(n){return n&&n.preventDefault()},R=function(n,t,e,r){void 0===r&&(r=!1),t.addEventListener(n,e,r)},V=function(n){return $(n)?[n.innerWidth,n.innerHeight]:[n.offsetWidth,n.offsetHeight]},X=function(n,t){return n.scrollLeft=t[0],n.scrollTop=t[1],n};function Y(n){var t={};return n.hooks=t,n.fire=function(e,r){return o(t[e])?(t[e].forEach((function(t){return t.apply(n,r)})),n):n},n.off=function(e,r){if(!o(e))return t={},n;if(o(t[e]))if(o(r)){for(var i=0,u=t[e].length;i<u;++i)if(r===t[e][i]){t[e].splice(i,1);break}0===j&&delete t[e]}else delete t[e];return n},n.on=function(e,r){return o(t[e])||(t[e]=[]),o(r)&&t[e].push(r),n},n}function q(r,i={}){if(!r)return;if(r.OP)return r.OP;const o=this;if(!e(o,q))return new q(r,i);let{fire:u,hooks:f}=Y(o);var l;function L(){return[d(j()),o.options]}function j(){if(gn){let n=[];for(let t=0,e=c(yn);t<e;++t)G(yn[t])&&n.push(N(yn[t]));return n}let n=r.value;return""!==n?n:null}function N(n){let t=n.value||O(n);return""!==t?t:null}function G(n){return T(n,"selected")}function Q(n){z(n,"selected"),n.selected=!1}function Z(n){C(n,cn+"selected")}function nn(n){I(n,"selected",!0),n.selected=!0}function tn(n){W(n,cn+"selected")}function en(n){n=n||"‌",On.title=n.replace(/<.*?>/g,""),D(On,n)}function rn(n){if(gn){let n,e=function(n){return t(n)?n:[n]}(n);for(let t=0,r=c(yn);t<r;++t)n=N(yn[t]),e.includes(d(n))?nn(yn[t]):Q(yn[t])}}o.state=i=p({},q.state,i),o.options={},o.source=r,q.instances[r.id||r.name||(l=q.instances,c(a(l)))]=o,r.OP=o;let on=i.class,un=on+"__",fn=on+"--",ln=un+"option",cn=ln+"--",sn=un+"options",an=un+"value",dn=un+"values",pn=B(r,{class:un+"source",tabindex:-1}),vn="input"===x(pn),hn=()=>pn.disabled,bn=y(pn),gn=pn.multiple,mn=0,yn=pn.options,wn=i.parent||h,xn=pn.size,kn=pn.title,En=j(),Ln=B("div",{class:on,tabindex:!hn()&&0,title:kn}),On=B("div",vn?"":"‌",{class:dn,contenteditable:!!vn&&""}),Tn=0,An=0,jn=B("div",{class:sn,tabindex:-1}),Pn=[],$n=!1,zn=!1,Cn=pn.list;var Hn,Nn;function In(){gn||xn||(C(Ln,fn+"open"),u("exit",L()))}function Sn(n){F(Ln,fn+"open",n);let t=_n();return u(t?"enter":"exit",L()),t}function Wn(n,t,e,r){return'<span class="'+an+" "+r+'" data-index="'+e+'"'+(t?' data-value="'+t+'"':"")+">"+n+"</span>"}function _n(){return A(Ln,fn+"open")}function Bn(){Ln.focus()}function Dn(n){if(hn())return;let t=this,e=t.$,r=En;mn=t.i,En=t.v;let o,f,l,s=[];if(n&&n.isTrusted&&Bn(),M(n),gn&&($n||zn)){!function(n){return A(n,cn+"selected")}(t)?(nn(e),tn(t)):(Q(e),Z(t));for(let n=0,t=c(yn);n<t;++n)G(yn[n])&&(o=O(Pn[n]),f=Pn[n].i,l=Pn[n].v,o=Wn(o,l,f,w(Pn[n],!1)),s.push(o));return en(s.join("<span>"+i.join+"</span>")),void u("change",L())}o=O(t),f=t.i,l=t.v,o=Wn(o,l,f,w(t,!1)),en(o),Pn.forEach((n=>{En===n.v?(nn(n.$),tn(n)):(Q(n.$),Z(n))})),En!==r&&u("change",L())}function Kn(n){C(Ln,fn+"focus"),u("blur",L())}function Un(n){if(!hn()){if(mn=pn.selectedIndex,xn)return W(Ln,fn+"open"),void u("enter",L());Tn=s(E(Ln,"border-bottom-width")),An=s(E(Ln,"border-top-width")),Sn()&&Yn(Ln)}}function Fn(n){mn=pn.selectedIndex,W(Ln,fn+"focus"),u("focus",L())}function Jn(n){$n=n.ctrlKey,zn=n.shiftKey;let t=n.key,e=mn,r=Pn[e],i=n=>A(n,cn+"disabled"),o=n=>Dn.call(n),u=_n();if("ArrowDown"===t){for(;(r=Pn[++e])&&i(r););r&&(o(r),Sn(u)),gn&&zn&&(r=Pn[mn-1])&&(nn(r.$),tn(r)),M(n)}else if("ArrowUp"===t){for(;(r=Pn[--e])&&i(r););r&&(o(r),Sn(u)),gn&&zn&&(r=Pn[mn+1])&&(nn(r.$),tn(r)),M(n)}else if("End"===t){for(e=c(yn);(r=Pn[--e])&&i(r););r&&(o(r),Sn(u)),M(n)}else if("Enter"===t)Sn(),M(n);else if("Escape"===t)!xn&&In();else if("Home"===t){for(e=-1;(r=Pn[++e])&&i(r););r&&(o(r),Sn(u)),M(n)}else"Tab"===t&&(r&&o(r),!xn&&In());!_n()||$n||zn||(Tn=s(E(Ln,"border-bottom-width")),An=s(E(Ln,"border-top-width")),Yn(Ln))}function Mn(){$n=zn=!1}function Rn(n){let t=n.target;if(t!==Ln)for(;(t=k(t))&&Ln!==t;);Ln!==t&&In()}function Vn(){_n()&&Yn(Ln,1)}function Xn(e,r){if("optgroup"===x(e)){let n=B("span",{class:ln+"-group"+(e.disabled?" "+cn+"disabled":"")}),t=y(e);n.title=e.label;for(let e=0,r=c(t);e<r;++e)Xn(t[e],n);return void S(r,n)}let i=function(n,t,e){if(void 0===e&&(e=!0),!T(n,t))return null;var r=n.getAttribute(t);return e?d(r):r}(e,"value",!1),u=i,f=O(e),l=e.title,s=B("a",f,{class:ln,title:l||f});i=i||f,s.i=mn,s.$=e,s.v=i,function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?_(n,r,e):H(n,r)}(s,{index:mn,value:u}),o.options[i]=f;let a=e.disabled;a?W(s,cn+"disabled"):R("click",s,Dn),S(r,s),Pn.push(s),""===u&&(i=null),t(En)&&n(i,En)||i===En?(W(s,cn+"selected"),en(Wn(f,u,mn,ln+" "+(a?" "+cn+"disabled":""))),nn(e)):Q(e),++mn}function Yn(n,t){if(!xn){let[t,e,r,i]=function(n){var t,e,r,i,o,u,f;return $(n)?(i=n.pageXOffset||m.scrollLeft||g.scrollLeft,o=n.pageYOffset||m.scrollTop||g.scrollTop,r=n.innerWidth,t=n.innerHeight):(i=(e=n.getBoundingClientRect()).left,o=e.top,r=e.width,t=e.height,u=e.right,f=e.bottom),[i,o,r,t,u,f]}(n),o=V(b)[1],u=o-e-i;U(jn,{bottom:"",left:t,"max-height":u,top:e+i-An,width:r}),u<(o-i)/2?(u=e,U(jn,{top:"",bottom:o-e-Tn,"max-height":u+An}),C(n,fn+"down"),W(n,fn+"up")):(C(n,fn+"up"),W(n,fn+"down"))}if(!t){let n=Pn.find((n=>A(n,cn+"selected")));if(n){let t=V(n)[1],e=V(jn)[1],[r,i]=function(n){return[n.offsetLeft,n.offsetTop]}(n),o=function(n){return[n.scrollLeft,n.scrollTop]}(jn)[1];i<o?X(jn,[r,i]):i+t-e>o&&X(jn,[r,i+t-e])}}u("fit",L())}vn&&Cn&&(bn=y(Cn),yn=Cn.options,xn=null),gn&&!xn&&(pn.size=xn=i.size),S(Ln,On),Nn=Ln,k(Hn=pn).insertBefore(Nn,function(n){return n.nextElementSibling||null}(Hn)),function(n,t,e,r){void 0===r&&(r=!1),n.forEach((function(n){return R(n,t,e,r)}))}(["resize","scroll"],b,Vn),R("click",wn,Rn),R("focus",pn,Bn),R("blur",Ln,Kn),R("click",Ln,Un),R("focus",Ln,Fn),R("keydown",Ln,Jn),R("keyup",Ln,Mn);let qn=c(bn);if(qn){S(Ln,jn);for(let n=0;n<qn;++n)Xn(bn[n],jn);if(xn){let n=Pn[0],t=V(n)[1]*xn;K(jn,"max-height",t)}}return xn&&(W(Ln,fn+"down"),W(Ln,fn+"open")),o.get=(n=!0)=>{let t=j();return n?d(t):t},o.pop=()=>r.OP?(delete r.OP,function(n,t,e){n.forEach((function(n){return J(n,t,e)}))}(["resize","scroll"],b,Vn),J("click",wn,Rn),J("focus",pn,Bn),C(pn,un+"source"),J("blur",Ln,Kn),J("click",Ln,Un),J("focus",Ln,Fn),J("keydown",Ln,Jn),J("keyup",Ln,Mn),function(n){var t="textContent";P(n,t)&&(n[t]="")}(Ln),function(n){var t=k(n);n.remove()}(Ln),u("pop",L())):o,o.set=n=>(rn(v(n)),Pn.forEach(((n,t)=>{let e=yn[t];F(n,cn+"selected",e&&G(e))})),u("change",L()),o),o.self=Ln,o}return q.instances={},q.state={class:"option-picker",join:", ",parent:null,size:5},q.version="1.2.4",q}));