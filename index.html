<!DOCTYPE html>
<html dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta content="#000" name="theme-color">
    <meta content="width=device-width" name="viewport">
    <meta content="Just a generic custom `&lt;select&gt;` element with accessibility in mind." name="description">
    <title>Option Picker 2.0.0</title>
    <link href="../layout/index.min.css" rel="stylesheet">
    <link href="index.min.css" rel="stylesheet">
    <style>
      body {
        margin-left: auto;
        margin-right: auto;
        max-width: 60rem;
      }
      .option-picker {
        border-width: 2px;
        flex: 1;
      }
      .option-picker__arrow,
      .option-picker__text,
      .option-picker__value {
        border-width: 0;
        padding: 0 0.5em;
      }
      .option-picker--focus {
        border-color: #00f;
      }
      .option-picker--focus .option-picker__options {
        border-color: #00f;
      }
      .option-picker--focus .option-picker__value {
        background: 0 0;
        outline: 0;
      }
      .option-picker__option {
        border: 0;
        padding: 0 0.5em;
      }
      .option-picker__option:focus,
      .option-picker__option:hover {
        background: #00f;
        color: #fff;
        outline: 0;
      }
      .option-picker__option-group {
        border: 0;
        gap: 0;
        padding: 0;
      }
      .option-picker__option-group::before {
        border: 0;
        padding: 0 0.5em;
      }
      .option-picker__option-group .option-picker__option {
        padding-left: 1em;
      }
      .option-picker__option--selected {
        background: #000;
        color: #fff;
        outline: 0;
      }
      .option-picker__options {
        background: #fff;
        gap: 0;
        left: -2px;
        min-width: calc(100% + 4px);
        padding: 0;
      }
      .option-picker__values {
        padding: 0;
      }
    </style>
  </head>
  <body>
    <p role="alert">Do you like this project? Please support my <a href="https://github.com/mecha-cms">Mecha CMS</a> project too. Thank you!</p>
    <header>
      <hgroup>
        <h1>Option Picker 2.0.0</h1>
        <p>Just a generic custom <code>&lt;select&gt;</code> element with accessibility in mind.</p>
      </hgroup>
    </header>
    <main>
      <form method="get" target="_blank">
        <p role="group"><select name="option">
            <option value="1">Option 1</option>
            <option value="2">Option 2</option>
            <optgroup label="Group A">
              <option value="A:1">Option A:1</option>
              <option value="A:2">Option A:2</option>
              <option value="A:3">Option A:3</option>
            </optgroup>
            <option value="3">Option 3</option>
            <option disabled value="4">Option 4</option>
            <option>Option 5</option>
          </select> <button type="submit">Submit</button> <button type="reset">Reset</button></p>
      </form>
      <h2 id="usage"><a href="#usage">#</a> Usage</h2>
      <div role="note">
        <p><strong>Note:</strong> CSS variables have been removed since version 2.0.0. From now on, I will only provide a minimal style just to make viable interaction. Expect it to look ugly by default. The main goal of this application is to be able to integrate it seamlessly into your web design. By providing a minimal style, it is easy to add other styles to it to adapt it to your own web design. Have a look at the source code on this page to see how I adapted the style to resemble the default style of the previous version.</p>
      </div>
      <h3>Browser</h3>
      <pre><code>&lt;!DOCTYPE html&gt;
&lt;html dir="ltr"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;link href="<a href="index.min.css" target="_blank">./index.min.css</a>" rel="stylesheet"&gt;
    &lt;style&gt;
      .option-picker {
        width: 100%;
      }
      .option-picker__options {
        background: #fff;
      }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;
      &lt;select&gt;
        &lt;option&gt;
          Option 1
        &lt;/option&gt;
        &lt;option&gt;
          Option 2
        &lt;/option&gt;
        &lt;option value="3"&gt;
          Option 3
        &lt;/option&gt;
      &lt;/select&gt;
    &lt;/p&gt;
    &lt;script src="<a href="index.min.js" target="_blank">./index.min.js</a>"&gt;&lt;/script&gt;
    &lt;script&gt;
      const picker = new OptionPicker(document.querySelector('select'));
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
      <h3>Node.js</h3>
      <p>Functions and methods in this application are mostly native JavaScript and are intended for use by the browser. Node.js doesn’t know about the DOM, so this kind of practice will probably be used more often to build new browser packages than to be used directly in the Node.js server.</p>
      <h4>CommonJS</h4>
      <pre><code>const OptionPicker = require('@taufik-nurrohman/option-picker').default;

const picker = new OptionPicker(document.querySelector('select'));</code></pre>
      <h4>ECMAScript</h4>
      <pre><code>import OptionPicker from '@taufik-nurrohman/option-picker';

const picker = new OptionPicker(document.querySelector('select'));</code></pre>
      <h2 id="tests"><a href="#tests">#</a> Tests</h2>
      <ul>
        <li><a href="test.html" target="_blank">No Idea?</a></li>
      </ul>
      <h2 id="tweaks"><a href="#tweaks">#</a> Tweaks</h2>
      <ul>
        <li><a href="tweak/bootstrap5.html" target="_blank">Bootstrap v5.3 Style</a></li>
      </ul>
      <h2 id="constructor"><a href="#constructor">#</a> Constructor</h2>
      <pre><code>const picker = new OptionPicker(self, state = {
    options: null,
    with: []
});</code></pre>
      <h2 id="parameters"><a href="#parameters">#</a> Parameters</h2>
      <h3><code>self</code></h3>
      <p>The <code>&lt;input&gt;</code> or <code>&lt;select&gt;</code> element.</p>
      <h3><code>state</code></h3>
      <p>The configuration data.</p>
      <h3><code>state.options</code></h3>
      <p>TODO</p>
      <h3><code>state.with</code></h3>
      <p>List of callable functions or objects containing an <code>attach()</code> method to be invoked each time the application is initialized. A very simple “plugin” system.</p>
      <h2 id="methods"><a href="#methods">#</a> Methods</h2>
      <h3>Instance Methods</h3>
      <h4><code>picker.attach(self, state)</code></h4>
      <p>Re-initializes the application and its extensions after it has been detached.</p>
      <pre><code>picker.attach();</code></pre>
      <h4><code>picker.blur()</code></h4>
      <p>Blurs from the tag picker’s input.</p>
      <pre><code>picker.blur();</code></pre>
      <h4><code>picker.detach()</code></h4>
      <p>Disables the application methods (except for the <code>attach()</code> method) and executes the <code>detach()</code> method of the extensions, if they are present.</p>
      <pre><code>picker.detach();</code></pre>
      <h4><code>picker.fire(name, data)</code></h4>
      <p>Fires an event.</p>
      <pre><code>picker.fire('change', []);</code></pre>
      <h4><code>picker.focus(mode = true)</code></h4>
      <p>Focuses to the tag picker’s input. If it has a text, it will select the text as well.</p>
      <pre><code>picker.focus(); // Focus and select the text
picker.focus(-1); // Focus and put the caret to the start of the text
picker.focus(+1); // Focus and put the caret to the end of the text</code></pre>
      <h4><code>picker.get(name)</code></h4>
      <p>Returns the tag position in the list, starting from <code>0</code>.</p>
      <pre><code>if (null !== picker.get('foo')) { … }</code></pre>
      <h4><code>picker.let(name)</code></h4>
      <p>Removes a tag by its name.</p>
      <pre><code>picker.let('foo'); // Remove “foo” tag
picker.let(); // Reset to the initial value</code></pre>
      <h4><code>picker.off(name, event)</code></h4>
      <p>Removes an event.</p>
      <pre><code>picker.off('change'); // Remove all events from the `change` event container
picker.off('change', onChange); // Remove `onChange` event from the `change` event container</code></pre>
      <h4><code>picker.on(name, event)</code></h4>
      <p>Adds a new event.</p>
      <pre><code>picker.on('change', function () {
    console.log(this.value.split(this.state.join));
});</code></pre>
      <pre><code>function onChange() {
    console.log(this.value.split(this.state.join));
}

picker.on('change', onChange);</code></pre>
      <h4><code>picker.set(name, at = -1)</code></h4>
      <p>Adds a new tag with the given name.</p>
      <pre><code>picker.set('foo'); // Append “foo” tag
picker.set('bar', 0); // Prepend “bar” tag
picker.set('baz', 2); // Insert “baz” tag at index 2 in the list</code></pre>
      <h3>Static Methods</h3>
      <p role="status">This application does not have any static methods.</p>
      <h2 id="properties"><a href="#properties">#</a> Properties</h2>
      <h3>Instance Properties</h3>
      <h4><code>picker.hooks</code></h4>
      <p>Returns the events data.</p>
      <pre><code>console.log(picker.hooks);</code></pre>
      <h4><code>picker.mask</code></h4>
      <p>Returns the tag picker’s mask.</p>
      <pre><code>picker.mask.classList.add(picker.state.n + '--dark');</code></pre>
      <h4><code>picker.self</code></h4>
      <p>Returns the input element.</p>
      <pre><code>console.log(picker.self.getAttribute('name'));</code></pre>
      <h4><code>picker.state</code></h4>
      <p>Returns the application states if any.</p>
      <pre><code>console.log(picker.state);</code></pre>
      <h4><code>picker.text</code></h4>
      <p>Gets or sets the current text in the tag picker’s input.</p>
      <pre><code>console.log(picker.text);</code></pre>
      <pre><code>picker.text = 'foo, bar, baz';</code></pre>
      <h4><code>picker.value</code></h4>
      <p>Proxy that passes to the <code>picker.self.value</code> property, with additional actions that are executed while the value is being set.</p>
      <pre><code>console.log(picker.value);</code></pre>
      <pre><code>picker.on('change', function () {
    console.log(this.value);
});

picker.value = 'foo, bar, baz';</code></pre>
      <h3>Static Properties</h3>
      <h4><code>TagPicker.state</code></h4>
      <p>Returns the default values of <code>picker.state</code>.</p>
      <pre><code>const picker = new TagPicker(document.querySelector('input'), {
    foo: ['bar', 'baz', 'qux']
});

console.log([TagPicker.state, picker.state]);</code></pre>
      <h4><code>TagPicker.version</code></h4>
      <p>Returns the application version.</p>
      <h2 id="extensions"><a href="#extensions">#</a> Extensions</h2>
      <h3>Anatomy of an Extension</h3>
      <p>Extension as a function:</p>
      <pre><code>function Extension(self, state = {}) {
    this.a = 1;
    this.b = function () {};
    return this;
}

Object.defineProperty(Extension, 'name', {
    value: 'Extension'
});</code></pre>
      <p>Extension as an object:</p>
      <pre><code>const Extension = {
    attach: function (self, state = {}) {},
    detach: function (self, state = {}) {},
    name: 'Extension'
};</code></pre>
      <h3>Usage of an Extension</h3>
      <p>As a core extension:</p>
      <pre><code>TagPicker.state.with.push(Extension);</code></pre>
      <p>As an optional extension:</p>
      <pre><code>const picker = new TagPicker(document.querySelector('input'), {
    with: [Extension]
});</code></pre>
      <h3>List of Extensions</h3>
      <ul>
        <li><a aria-disabled="true">Clear Feature</a></li>
        <li><a aria-disabled="true">History Feature</a></li>
        <li><a aria-disabled="true">Options Feature</a></li>
        <li><a aria-disabled="true">Sortable Feature</a></li>
      </ul>
      <h2 id="license"><a href="#license">#</a> License</h2>
      <p>Use it for free, pay if you get paid. So, you’ve just benefited financially after using this project? It’s a good idea to <a href="https://paypal.me/tatautaufik" target="_blank">share a little financial support</a> with this open source project too. Your support will motivate me to do any further development, as well as to provide voluntary support to overcome problems related to this project.</p>
      <p>Thank you! ❤️</p>
    </main>
    <footer>
      <hr>
      <p>© 2024 <a href="/">Taufik Nurrohman</a></p>
    </footer>
    <script src="index.min.js"></script>
    <script>
      const picker = new OptionPicker(document.forms[0].option);
      picker.on('change', function (value) {
          console.log(value);
      });
    </script>
  </body>
</html>