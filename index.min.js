/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).OP=t()}(this,(function(){"use strict";var n=function(n){return Array.isArray(n)},t=function(n,t){return n&&i(t)&&n instanceof t},e=function(n){return"number"==typeof n},r=function(n,e){return void 0===e&&(e=!0),"object"==typeof n&&(!e||t(n,Object))},i=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},u=function(n){return"string"==typeof n},o=function t(e){if(n(e))return e.map((function(n){return t(e)}));if(r(e)){for(var i in e)e[i]=t(e[i]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},f=function(n){return n.replace(/[-_.](\w)/g,(function(n,t){return c(t)}))},c=function(n){return n.toUpperCase()},l=function(n){return n.length},s=function(n,t){return void 0===t&&(t=10),t?parseInt(n,t):parseFloat(n)},a=function(n){return Object.keys(n)},d=function t(e){if(n(e))return e.map((function(n){return t(n)}));if(function(n){return/^-?(?:\d*.)?\d+$/.test(n+"")}(e))return s(e);if(r(e)){for(var i in e)e[i]=t(e[i]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},p=document,v=window,h=p.body,b=p.documentElement,g=function(n,t){var r=n.children;return e(t)?r[t]||null:r||[]},m=function(n){return n.parentNode||null},y=function(n,t,e){void 0===e&&(e=!0);var r=v.getComputedStyle(n).getPropertyValue(t);return e&&(r=d(r)),r||""===r||0===r?r:null},k=function(n,t){void 0===t&&(t=!0);var e="textContent";if(!E(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},x=function(n,t){return n.hasAttribute(t)},w=function(n,t){return n.classList.contains(t)},E=function(n,t){return t in n},L=function(n){return n===v},O=function(n,t){return n.removeAttribute(t),n},T=function(n,t){return n.classList.remove(t),n},$=function(n,t){return O(n,"data-"+t)},A=function(n,t){return n.style[f(t)]=null,n},C=function(n,t,e){return!0===e&&(e=t),n.setAttribute(t,o(e)),n},P=function(n,t){return n.append(t),t},H=function(n,t){return n.classList.add(t),n},N=function(t,e,i){return(n(i)||r(i))&&(i=JSON.stringify(i)),C(t,"data-"+e,i)},S=function(n,t,e){return n=u(n)?p.createElement(n):n,r(t)&&(e=t,t=!1),u(t)&&W(n,t),r(e)&&function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?C(n,r,e):O(n,r)}(n,e),n},W=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="innerHTML";return E(n,r)&&(n[r]=e?t.trim():t),n},B=function(n,t,r){return e(r)&&(r+="px"),n.style[f(t)]=o(r),n},D=function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?B(n,r,e):A(n,r);return n},I={},K=function(n,t,e,r){t.dispatchEvent(function(n,t,e){return e&&i(I[n])?I[n]:I[n]=new Event(n,t)}(n,e,r))},U=function(n,t,e){t.removeEventListener(n,e)},z=function(n){return n&&n.preventDefault()},F=function(n,t,e,r){void 0===r&&(r=!1),t.addEventListener(n,e,r)};function J(n){var t={};return n.hooks=t,n.fire=function(e,r){return i(t[e])?(t[e].forEach((function(t){return t.apply(n,r)})),n):n},n.off=function(e,r){if(!i(e))return t={},n;if(i(t[e]))if(i(r)){for(var u=0,o=t[e].length;u<o;++u)if(r===t[e][u]){t[e].splice(u,1);break}0===j&&delete t[e]}else delete t[e];return n},n.on=function(e,r){return i(t[e])||(t[e]=[]),i(r)&&t[e].push(r),n},n}var M=function(n){return L(n)?[n.innerWidth,n.innerHeight]:[n.offsetWidth,n.offsetHeight]},R=function(n,t){return n.scrollLeft=t[0],n.scrollTop=t[1],n};function V(e,r={}){if(!e)return;const i=this;if(!t(i,V))return new V(e,r);if(e.OP)return;let{fire:u,hooks:f}=J(i);var c;function A(){return[d(j()),i.options]}function j(){if(en){let n=[];for(let t=0,e=l(un);t<e;++t)I(un[t])&&n.push(W(un[t]));return n}let n=e.value;return""!==n?n:null}function W(n){let t=n.value||k(n);return""!==t?t:null}function I(n){return x(n,"selected")}function X(n){O(n,"selected"),n.selected=!1}function Y(n){T(n,"selected")}function _(n){C(n,"selected",!0),n.selected=!0}function q(n){H(n,"selected")}function G(n){n=n||"‌",an.title=n,function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="textContent";E(n,r)&&(n[r]=e?t.trim():t)}(an,n)}function Q(t){if(en){let t,e=function(t){return n(t)?t:[t]}(t);for(let n=0,r=l(un);n<r;++n)t=W(un[n]),e.includes(d(t))?_(un[n]):X(un[n])}}i.state=r=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return Object.assign.apply(Object,[{}].concat(t))}(V.state,r),i.options={},i.source=e,i.value=e.value,V.instances[e.id||e.name||(c=V.instances,l(a(c)))]=i,e.OP=1;let Z=r.class,nn=S(e,{class:Z+"-source",tabindex:-1}),tn=g(nn),en=nn.multiple,rn=0,un=nn.options,on=r.parent||p,fn=nn.size,cn=nn.title,ln=j(),sn=S("div",{class:Z,tabindex:0,title:cn}),an=S("b","‌"),dn=S("div",{tabindex:-1}),pn=[],vn=!1,hn=!1;var bn,gn;function mn(){en||fn||(T(sn,"open"),u("exit",A()))}function yn(n){!function(n,t,e){n.classList.toggle(t,e)}(sn,"open",n);let t=kn();return u(t?"enter":"exit",A()),t}function kn(){return w(sn,"open")}function xn(n){En()}function wn(n){sn.focus()}function En(){let n=pn.find((n=>ln===n.$value));n&&K("click",n)}function Ln(n){vn=n.ctrlKey,hn=n.shiftKey}function On(){vn=hn=!1}function Tn(n){let t=this,e=t.$source,r=ln;ln=t.$value;let i=[];if(n.isTrusted&&sn.focus(),z(n),en&&vn){!function(n){return w(n,"selected")}(t)?(_(e),q(t)):(X(e),Y(t));for(let n=0,t=l(un);n<t;++n)I(un[n])&&i.push(k(pn[n]));return G(i.join(", ")),void u("change",A())}en&&hn||(G(k(t)),pn.forEach((n=>{ln===n.$value?(_(n.$source),q(n)):(X(n.$source),Y(n))})),ln!==r&&u("change",A()))}function $n(n){T(sn,"focused"),u("blur",A())}function An(n){if(fn)return H(sn,"open"),void u("enter",A());yn()&&Sn(sn)}function jn(n){H(sn,"focused"),u("focus",A())}function Cn(n){let t=n.key,e=nn.selectedIndex,r=pn[e],i=n=>w(n,"disabled"),u=kn();if("ArrowDown"===t){for(;(r=pn[++e])&&i(r););r&&(K("click",r),yn(u)),z(n)}else if("ArrowUp"===t){for(;(r=pn[--e])&&i(r););r&&(K("click",r),yn(u)),z(n)}else if("End"===t){for(e=l(un);(r=pn[--e])&&i(r););r&&(K("click",r),yn(u)),z(n)}else if("Enter"===t)yn(),z(n);else if("Escape"===t)!fn&&mn();else if("Home"===t){for(e=0;(r=pn[++e])&&i(r););r&&(K("click",r),yn(u)),z(n)}else"Tab"===t&&(r&&K("click",r),!fn&&mn());u&&!vn&&!hn&&Sn(sn)}function Pn(n){let t=n.target;if(t!==sn)for(;(t=m(t))&&sn!==t;);sn!==t&&mn()}function Hn(){kn()&&Sn(sn)}function Nn(n,t){if("optgroup"===function(n){return(n&&n.nodeName||"").toLowerCase()||null}(n)){let e=S("span"),r=g(n);e.title=n.label;for(let n=0,t=l(r);n<t;++n)Nn(r[n],e);return void P(t,e)}let e=function(n,t,e){if(void 0===e&&(e=!0),!x(n,t))return null;var r=n.getAttribute(t);return e?d(r):r}(n,"value",!1),r=k(n),u=S("a",r,{title:r});e=e||r,u.$index=rn,u.$source=n,u.$value=e,function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?N(n,r,e):$(n,r)}(u,{index:rn,value:e}),i.options[e]=r,n.disabled?H(u,"disabled"):F("click",u,Tn),P(t,u),pn.push(u),e===ln?(H(u,"selected"),G(r),_(n)):X(n),++rn}function Sn(n){let t=s(y(n,"border-top-width")),e=s(y(n,"border-bottom-width"));if(!fn){let[r,i,u,o]=function(n){var t,e,r,i,u,o,f;return L(n)?(i=n.pageXOffset||b.scrollLeft||h.scrollLeft,u=n.pageYOffset||b.scrollTop||h.scrollTop,r=n.innerWidth,t=n.innerHeight):(i=(e=n.getBoundingClientRect()).left,u=e.top,r=e.width,t=e.height,o=e.right,f=e.bottom),[i,u,r,t,o,f]}(n),f=M(v)[1],c=f-i-o;D(dn,{bottom:"",left:r,"max-height":c,top:i+o-t,width:u}),c<(f-o)/2?(c=i,D(dn,{top:"",bottom:f-i-e,"max-height":c+t}),H(dn,"up")):T(dn,"up")}let r=pn.find((n=>w(n,"selected")));if(r){let n=M(r)[1],t=M(dn)[1],[e,i]=function(n){return[n.offsetLeft,n.offsetTop]}(r),u=function(n){return[n.scrollLeft,n.scrollTop]}(dn)[1];i<u?R(dn,[e,i]):i+n-t>u&&R(dn,[e,i+n-t])}u("fit",A())}P(sn,an),gn=sn,m(bn=nn).insertBefore(gn,function(n){return n.nextElementSibling||null}(bn)),nn.disabled?H(sn,"disabled"):(F("scroll",v,Hn),F("keydown",p,Ln),F("keyup",p,On),F("click",on,Pn),F("focus",nn,wn),F("change",nn,xn),F("input",nn,En),F("blur",sn,$n),F("click",sn,An),F("focus",sn,jn),F("keydown",sn,Cn));let Wn=l(tn);if(Wn){P(sn,dn);for(let n=0;n<Wn;++n)Nn(tn[n],dn);if(fn){let n=pn[0],t=M(n)[1]*fn;B(dn,"max-height",t)}}return fn&&H(sn,"open"),i.get=(n=!0)=>{let t=j();return n?d(t):t},i.pop=()=>e.OP?(delete e.OP,U("scroll",v,Hn),U("keydown",p,Ln),U("keyup",p,On),U("click",on,Pn),U("change",nn,xn),U("focus",nn,wn),U("input",nn,En),T(nn,Z+"-source"),U("blur",sn,$n),U("click",sn,An),U("focus",sn,jn),U("keydown",sn,Cn),letText(sn),function(n){var t=m(n);n.remove()}(sn),u("pop",A())):i,i.set=n=>(Q(o(n)),function(n,t,e,r){n.forEach((function(n){return K(n,t,e,r)}))}(["input","change"],e),u("change",A()),i),i.self=sn,i}return V.instances={},V.state={class:"option-picker",parent:null},V.version="1.0.0",V}));