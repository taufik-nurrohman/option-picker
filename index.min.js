/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2025 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).OptionPicker=n()}(this,(function(){"use strict";var t=function(t,n){return-1!==n.indexOf(t)},n=function(t){return Array.isArray(t)},e=function(t){return u(t)&&0!=t%1},r=function(t){return"function"==typeof t},i=function(t,n,e){return!(!t||"object"!=typeof t)&&(e?s(n)&&s(t.constructor)&&n===t.constructor:s(n)&&t instanceof n)},o=function(t){return u(t)&&0==t%1},u=function(t){return"number"==typeof t},a=function(t,n){return void 0===n&&(n=!0),!(!t||"object"!=typeof t)&&(!n||i(t,Object,1))},s=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},f=function(t){return"string"==typeof t},c=function(t){return t.replace(/[-_.](\w)/g,(function(t,n){return v(n)}))},l=function(t){return t.toLowerCase()},v=function(t){return t.toUpperCase()},p=function(t){return t.length},d=function(t){if(n(t))return t.map((function(t){return d(t)}));if(a(t)){for(var e in t)t[e]=d(t[e]);return t}return f(t)&&function(t){return/^[+-]?(?:\d*.)?\d+$/.test(t+"")}(t)?"0"===t[0]&&-1===t.indexOf(".")?t:function(t,n){return void 0===n&&(n=10),n?parseInt(t,n):parseFloat(t)}(t):"false"!==t&&("null"===t?null:"true"===t||t)},h=function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var o=r.shift(),u=0,f=p(r);u<f;++u)for(var c in r[u])if(s(o[c]))if(n(o[c])&&n(r[u][c])){o[c]=[].concat(o[c]);for(var l=0,v=p(r[u][c]);l<v;++l)t(r[u][c][l],o[c])||o[c].push(r[u][c][l])}else a(o[c])&&a(r[u][c])?o[c]=h({},o[c],r[u][c]):o[c]=r[u][c];else o[c]=r[u][c];return o},_=function(t){if(n(t))return t.map((function(n){return _(t)}));if(a(t)){for(var e in t)t[e]=_(t[e]);return t}return!1===t?"false":null===t?"null":!0===t?"true":""+t},m=document,g=window,k=m.body,b=m.documentElement,w=function(t){return t.firstElementChild||null},y=function(t){return t.lastElementChild||null},x=function(t,n){var e=[].slice.call(t.children);return u(n)?e[n]||null:e},z=function(t,n,e){void 0===e&&(e=!0);var r=function(t,n,e){if(void 0===e&&(e=!0),!S(t,n))return null;var r=t.getAttribute(n);return e?d(r):r}(t,"data-"+n,e),i=(r+"").trim();return e&&i&&("["===i[0]&&"]"===i.slice(-1)||"{"===i[0]&&"}"===i.slice(-1))&&null!==(i=function(t){var n=null;try{n=JSON.parse(t)}catch(t){}return n}(r))?i:r},E=function(t){return l(t&&t.nodeName||"")||null},T=function(t,n){return t["next"+(n?"":"Element")+"Sibling"]||null},L=function(t,n){return n?t.closest(n)||null:t.parentNode||null},O=function(t){var n="form";return j(t,n)&&n===E(t[n])?t[n]:L(t,n)},A=function(t,n){return t["previous"+(n?"":"Element")+"Sibling"]||null},C=function(t,n,e){var r=g.getComputedStyle(t).getPropertyValue(n);return r||""===r||0===r?r:null},P=function(t,n){void 0===n&&(n=!0);var e="textContent";if(!j(t,e))return!1;var r=t[e];return""!==(r=n?r.trim():r)?r:null},S=function(t,n){return t.hasAttribute(n)},M=function(t,n){return t.classList.contains(n)},j=function(t,n){return n in t},N=function(t,n){return t.removeAttribute(n),t},R=function(t,n){return t.classList.remove(n),t},D=function(t,n){return N(t,"data-"+n)},H=function(t){var n=L(t);return t.remove(),n},I=function(t,n){return t.style[c(n)]=null,t},K=function(t,n,e){return!0===e&&(e=n),t.setAttribute(n,_(e)),t},B=function(t,n){return t.append(n),n},U=function(t,n){return t.classList.add(n),t},Y=function(t,e,r){return(n(r)||a(r))&&(r=JSON.stringify(r)),K(t,"data-"+e,r)},J=function(t,n,e){return t=f(t)?m.createElement(t):t,a(n)&&(e=n,n=!1),f(n)&&V(t,n),a(e)&&function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?K(t,r,e):N(t,r)}(t,e),t},V=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="innerHTML";return j(t,r)&&(t[r]=e?n.trim():n),t},W=function(t,n,e){return u(e)&&(e+="px"),t.style[c(n)]=_(e),t},q=function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?W(t,r,e):I(t,r);return t},F=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="textContent";return j(t,r)&&(t[r]=e?n.trim():n),t},X=function(t,n){var e;return function(){var r=arguments,i=this;e&&clearTimeout(e),e=setTimeout((function(){return t.apply(i,r)}),n)}},$=function(t,n){return function(){var e=arguments,r=this;setTimeout((function(){return t.apply(r,e)}),n)}},G=function(t){var n,e,r,i,o,u,a;return!function(t){return t===g}(t)?(i=(e=t.getBoundingClientRect()).left,o=e.top,r=e.width,n=e.height,u=e.right,a=e.bottom):(i=t.pageXOffset||b.scrollLeft||k.scrollLeft,o=t.pageYOffset||b.scrollTop||k.scrollTop,r=t.innerWidth,n=t.innerHeight),[i,o,r,n,u,a]},Q=function(t){return[t.scrollLeft,t.scrollTop]};var Z=function(t,n,e){n.removeEventListener(t,e)},tt=function(t){return t&&t.preventDefault()},nt=function(t){return t&&t.stopPropagation()},et=function(t,n,e,r){void 0===r&&(r=!1),n.addEventListener(t,e,r)},rt="ArrowDown",it="ArrowUp",ot="Backspace",ut="Delete",at="Enter",st="Escape",ft="PageDown",ct="PageUp",lt="Tab",vt=X((function(t){return t.fit()}),10),pt=new WeakMap;function dt(t,e,o){var u=i(e,Map)?e:new Map;if(n(e))wt(e,(function(t){var e,r,i;n(t)?(t[0]=null!=(e=t[0])?e:"",t[1]=null!=(r=t[1])?r:{},jt(d(null!=(i=t[1].value)?i:t[0]),t,u)):jt(d(t),[t,{}],u)}));else if(a(e,0))for(var s in e){var f,c,l;if(n(e[s]))e[s][0]=null!=(f=e[s][0])?f:"",e[s][1]=null!=(c=e[s][1])?c:{},jt(d(null!=(l=e[s][1].value)?l:s),e[s],u);else jt(d(s),[e[s],{}],u)}!function(t,n,e){var i,o,u=t._options,a=t.self,s=t.state;s.n,i="input"===E(a)?(o=a.list)?x(o):[]:x(o=a);for(var f=0,c=p(i);f<c;++f){if("optgroup"===E(i[f]))for(var l=x(i[f]),v=0,h=p(l);v<h;++v)l[v]&&H(l[v]);i[f]&&H(i[f])}u.let(),yt(e,(function(t,n){return jt(d(n),t,u)})),r(s.options)||(s.options=e)}(t,0,u)}function ht(t,n,e){Object.defineProperty(t,n,e)}function _t(t){t.focus()}function mt(t,n,e){n.mask;var r=n.state.n;if(t)return bt(n),e?_t(t):U(t,r+"__option--focus"),t}function gt(t,n,e){var r,i=t._options,o=t.state.n;if(o+="__option--disabled",r=Nt(i)["find"+(e||"")]((function(t){return!t[2].hidden&&!M(t[2],o)})))return mt(r[2],t,n)}function kt(t,n){return gt(t,n,"Last")}function bt(t){var n=t._options;t.mask;var e=t.state.n;e+="__option--focus",yt(n,(function(t){return R(t[2],e)}))}function wt(t,n){t.forEach(n)}function yt(t,n){t instanceof mn&&(t=t.map),wt(t,n)}function xt(t){var e,r=t._options;try{yt(r,(function(t,r){if(n(t)&&t[1]&&!t[1].disabled&&t[1].selected)throw e=t[1].value||r,""}))}catch(t){}if(!s(e))try{yt(r,(function(t,r){throw e=n(t)&&t[1]&&!t[1].disabled?t[1].value||r:t,""}))}catch(t){}return e}function zt(t){return z(t,"value",!1)}function Et(t){var n,e,r,i=new Map,o=[],u=Lt(t);e="input"===E(t)?(r=t.list)?x(r):[]:x(r=t);for(var a=function(t){var n=e[t],r=function(t,n){void 0===n&&(n=!0);for(var e,r=t.attributes,i={},o=0,u=r.length;o<u;++o)e=r[o].value,i[r[o].name]=n?d(e):e;return i}(n);if(wt(["disabled","selected"],(function(n){n in r?(r[n]=""===r[n]||r[n],"selected"===n&&o.push(t)):r[n]=null})),"optgroup"===E(n))return yt(Et(n),(function(t,e){t[1]["&"]=n.label,jt(d(e),t,i)})),1;jt(d(n.value),[P(n)||n.value,r,null,n],i)},s=0,f=p(e);s<f;++s)a(s);return 0===p(o)&&(n=Ot(u=d(u),i))&&(n[1].selected=!0,jt(u,n,i)),i}function Tt(t){return Ot(t,pt)||null}function Lt(t){return(t.value||"").replace(/\r/g,"")}function Ot(t,n){return n.get(t)}function At(t){return t.disabled}function Ct(t){return t.readOnly}function Pt(t){return St(t,pt)}function St(t,n){return n instanceof mn?n.let(t):n.delete(t)}function Mt(t,n){return jt(t,n,pt)}function jt(t,n,e){return e.set(t,n)}function Nt(t){var n=[];return yt(t,(function(t){return n.push(t)})),n}function Rt(t,n){var e=this;return t?i(e,Rt)?(Mt(t,function(t,n){return(n=n||t).fire=function(t,n,e){var r=this,i=r.hooks;return s(i[t])?(i[t].forEach((function(t){return t.apply(e||r,n)})),r):r},n.off=function(t,n){var e=this,r=e.hooks;if(!s(t))return r={},e;if(s(r[t]))if(s(n)){var i=r[t].length;if(0===i)delete r[t];else for(var o=0;o<i;++o)if(n===r[t][o]){r[t].splice(o,1);break}}else delete r[t];return e},n.on=function(t,n){var e=this.hooks;return s(e[t])||(e[t]=[]),s(n)&&e[t].push(n),this},t.hooks={},t}(e,Rt._)),e.attach(t,h({},Rt.state,n||{}))):new Rt(t,n):e}Rt.from=function(t,n){return new Rt(t,n)},Rt.of=Tt,Rt.state={n:"option-picker",options:null,size:null,strict:!1,with:[]},Rt.version="2.0.0",ht(Rt,"name",{value:"OptionPicker"});var Dt=Rt._=Rt.prototype;ht(Dt,"options",{get:function(){return this._options},set:function(t){var n,r=this,i=r._mask,u=r._options,a=r.state.n;a+="__option",(e(t)||o(t)||f(t))&&(t=[t]),dt(r,t,i.options),(n=Nt(u).find((function(t){return!t[2].hidden&&!M(t[2],a+"--disabled")})))&&(r.value=zt(n[2]))}}),ht(Dt,"size",{get:function(){var t=this.state.size||1;return o(t)?t<1?1:t:1},set:function(t){var n=this,e=n._mask,r=n._options,i=n.mask,u=n.state,a=e.options;u.n;var s=o(t)?t<1?1:t:1;if(u.size=s,1===s)D(i,"size"),I(a,"max-height"),Pt(b);else{var f=Nt(r).find((function(t){return!t[2].hidden}));if(f){var c,l,v=C(a,"gap"),p=C(a,"padding-bottom"),d=null!=(c=null!=(l=C(f,"height"))?l:C(f,"min-height"))?c:C(f,"line-height");Y(i,"size",s),W(a,"max-height","calc(("+d+" + max("+v+","+p+"))*"+s+")"),Mt(b,n)}}}}),ht(Dt,"text",{get:function(){var t=this._mask,n=t.input;return t.text?P(n):null},set:function(t){var n=this._mask,e=this.self,r=n.hint,i=n.input;n.text&&(F(i,_(t)),P(i,!1)?F(r,""):F(r,e.placeholder+""))}}),ht(Dt,"value",{get:function(){var t=Lt(this.self);return""===t?null:t},set:function(t){var n,e=this,r=e._options;e.mask,e.state.n,(n=Ot(d(t),r))&&dn(n[2],e)}}),ht(Dt,"values",{get:function(){},set:function(t){}});var Ht=X((function(n,e,o,u){var a=f(e)?e:P(e)||"",s=l(a),c=n._event,v=n._mask,d=n.mask,h=n.self,_=n.state,m=v.options;v.value;var g=_.n,k=_.strict,b=z(d,"size");if(g+="__option--disabled",u)try{yt(o,(function(t){var e=l(P(t[2])+"\t"+zt(t[2]));if(""!==s&&s===e.slice(0,p(s))&&!M(t[2],g))throw dn(t[2],n),b&&t[2].scrollIntoView({block:"nearest"}),""}))}catch(t){}else{var w=o.count;bt(n),yt(o,(function(n){var e=l(P(n[2])+"\t"+zt(n[2]));""===s||t(s,e)?n[2].hidden=!1:(n[2].hidden=!0,--w)})),m.hidden=!w,k&&gt(n),h.value=k?"":a}n.fire("search",[c,a]);var y=_.options;r(y)&&(y=y.call(n,a),i(y,Promise)?y.then((function(t){dt(n,t),n.fire("load",[c,t,a]).fit()})):dt(n,y))}),50);function It(t){var n=this,e=Tt(n),r=e.state.n;e._event=t,R(n,r+="--focus"),R(n,r+="-self")}function Kt(t){var n=Tt(this),e=n.mask,r=n.state.n;n._event=t,R(this,r+"__option--focus"),R(e,r+="--focus"),R(e,r+"-option")}function Bt(t){var n=Tt(this),e=n._mask,r=n.mask,i=n.state,o=e.text,u=i.n,a=i.strict;n._event=t,R(o,u+"__text--focus"),R(r,u+="--focus"),R(r,u+"-text"),a&&(hn(n)||_n(n))}function Ut(t){var n=this,e=Tt(n),r=e._mask,i=e.self,o=r.hint;e._event=t,$((function(){return F(o,P(n,!1)?"":i.placeholder)}),1)()}function Yt(t){var n=this,e=Tt(n),r=e.state.n;e._event=t,U(n,r+="--focus"),U(n,r+="-self")}function Jt(t){var n=Tt(this),e=n.mask,r=n.state.n;vn(),n._event=t,U(this,r+"__option--focus"),U(e,r+="--focus"),U(e,r+="-option")}function Vt(t){var n=Tt(this);n._event=t,n.focus()}function Wt(t){var n=this,e=Tt(n),r=e._mask,i=e.mask;e.self;var o=e.state,u=r.text,a=o.n;e._event=t,U(u,a+"__text--focus"),U(i,a+="--focus"),U(i,a+="-text"),P(n,!1)?pn(n):e.enter().fit()}function qt(t){var n,e=this,r=t.key,i=Tt(e),o=i._mask,u=i._options,a=i.mask,s=i.self,f=i.state,c=o.hint,l=o.input,v=f.n,h=f.strict;if(i._event=t,$((function(){return F(c,P(e,!1)?"":s.placeholder)}),1)(),ot!==r&&ut!==r&&1!==p(r)||$((function(){return i.enter().fit()}),51)(),rt===r||it===r||at===r){var _=Ot(d(Lt(s)),u);if(!(_=_?_[2]:0)||_.hidden)for(_=(_=Nt(u).shift())?_[2]:0;_&&(M(_,v+"__option--disabled")||_.hidden);)_=T(_);M(a,v+"--open")?h&&hn(i)&&(i.exit(),_t(l),pn(l)):(_n(i),i.enter()),_&&_t(_),n=!0}else lt===r?i.exit():Ht(i,e,u);n&&(tt(t),nt(t))}var Ft="",Xt=X((function(){return Ft=""}),500);function $t(t){var n,e=t.key,r=t.altKey,i=t.ctrlKey,o=Tt(this),u=o._options,a=o.self;if(Xt(),At(a)||Ct(a))return tt(t);o._event=t,ot===e||ut===e?Ft="":st===e?(Ft="",o.exit(n=!0)):lt===e?(Ft="",o.exit(!(n=!1))):rt===e||it===e||at===e||ft===e||ct===e||""===Ft&&" "===e?o.enter(n=!0).fit():1!==p(e)||r||i||(Ft+=e),""!==Ft&&Ht(o,Ft,u,n=!0),n&&tt(t)}function Gt(t){var n,e=this,r=t.key,i=t.altKey,o=t.ctrlKey,u=Tt(e),a=u._mask;u._options,u.mask;var s=u.self,f=u.state,c=a.hint;a.input,a.value;var l=f.n;l+="__option";var v,d,h,_="input"===E(s);if(u._event=t,ot===r)u.exit(n=!0);else if(at===r||st===r||lt===r||" "===r)st!==r&&dn(e,u),u.exit(n=lt!==r);else if(rt===r||ft===r){for(n=!0,v=ft===r&&M(d=L(e),l+"-group")?T(d):T(e);v&&(M(v,l+"--disabled")||v.hidden);)v=T(v);for(v?M(v,l+"-group")&&(v=w(v)):((d=L(e))&&M(d,l+"-group")&&(v=T(d)),v&&M(v,l+"-group")&&(v=w(v)));v&&(M(v,l+"--disabled")||v.hidden);)v=T(v);v?mt(v,u,1):gt(u,1)}else if(it===r||ct===r){for(n=!0,h=ct===r&&M(d=L(e),l+"-group")?A(d):A(e);h&&(M(h,l+"--disabled")||h.hidden);)h=A(h);for(h?M(h,l+"-group")&&(h=y(h)):((d=L(e))&&M(d,l+"-group")&&(h=A(d)),h&&M(h,l+"-group")&&(h=y(h)));h&&(M(h,l+"--disabled")||h.hidden);)h=A(h);h?mt(h,u,1):kt(u,1)}else"Home"===r?(n=!0,gt(u,1)):"End"===r?(n=!0,kt(u,1)):(_&&1===p(r)&&!i&&!o&&F(c,""),u.exit(!(n=!1)));n&&(tt(t),nt(t))}function Qt(t){var n=this,e=Tt(n),r=e._mask,i=e.self,o=r.hint;e._event=t,$((function(){return F(n,P(n))}))(),$((function(){return F(o,P(n,!1)?"":i.placeholder)}),1)()}function Zt(t){var n=this,e=Tt(n),r=e.self,i=e.state.n,o=t.target;tt(t),At(r)||Ct(r)||z(n,"size")||(e._event=t,M(o,i+"__options")||L(o,"."+i+"__options")||e[M(n,i+"--open")?"exit":"enter"](!0).fit())}var tn=0;function nn(t){var n=this,e=Tt(n),r=e._mask,i=e.mask,o=r.options;e._event=t,"mousedown"===t.type?(dn(n,e),z(i,"size")||e.exit(!0)):(_t(n),tn=Q(o)[1]),tt(t)}var en=!1;function rn(t){"touchstart"===t.type&&(en=t.touches[0].clientY);var n=Tt(this);if(n){var e=n.mask,r=n.state.n,i=t.target;n._event=t,e!==i&&e!==L(i,"."+r)&&(z(e,"size")?n.blur():(Pt(this),n.exit()))}}function on(t){if(!1!==en){var n,e,r=Tt(this);if(r._event=t,"touchmove"===t.type&&r){var i=r._mask.options,o=t.touches[0].clientY;if(i){var u=Q(i);u[1]-=o-en,e=u,(n=i).scrollLeft=e[0],n.scrollTop=e[1],en=o}}}}function un(t){var n=Tt(this),e=n._mask.options;n._event=t,Q(e)[1]===tn&&(dn(this,n),n.exit(!0))}function an(){en=!1}function sn(t){var n=Tt(this);n._event=t,n.let().fire("reset",[t])}function fn(t){var n=Tt(this);n&&(vt(n),n._event=t)}function cn(t){fn.call(this,t)}function ln(t){var n=Tt(this);return n._event=t,n.fire("submit",[t])}function vn(t){var n=m.getSelection();n.rangeCount&&n.removeRange(n.getRangeAt(0))}function pn(t,n){var e=m.getSelection();vn();var r=m.createRange();r.selectNodeContents(t),e.addRange(r),1===n?e.collapseToEnd():-1===n&&e.collapseToStart()}function dn(t,n){var e=n._event,r=n._mask;n._options;var i=n.self,o=n.state,u=r.hint,a=r.input,s=r.value,f=o.n;if(f+="__option--selected",t){var c,l=Lt(i);return _n(n),K(t._[0],"selected",""),U(t,f),i.value=c=zt(t),"input"===E(i)?(F(u,""),F(a,P(t))):(Y(s,"value",c),V(s,function(t,n){void 0===n&&(n=!0);var e="innerHTML";if(!j(t,e))return!1;var r=t[e];return""!==(r=n?r.trim():r)?r:null}(t))),c!==l&&n.fire("change",[e,c]),t}}function hn(t,n){var e,r=t._options,i=t.state.n;if(i+="__option--disabled",e=Nt(r).find((function(t){return!t[2].hidden&&!M(t[2],i)})))return dn(e[2],t)}function _n(t,n){t._event;var e=t._mask,r=t._options,i=t.self,o=t.state,u=e.hint,a=e.input,s=e.options,f=e.value,c=o.n;s.hidden=!1,c+="__option--selected",Lt(i),yt(r,(function(t){N(t[3],"selected"),R(t[2],c),t[2].hidden=!1})),i.value="","input"===E(i)?(F(u,i.placeholder),F(a,"")):(D(f,"value"),V(f,""))}function mn(t,n){var e=this;return i(e,mn)?(e.count=0,e.map=new Map,e.of=t,n&&p(n)&&dt(t,n,t._mask.options),e):new mn(t,n)}Dt.attach=function(t,e){var o,u=this;t=t||u.self,e=e||u.state,u._active=!At(t)&&!Ct(t),u._event=null,u._options=new mn(u),u._value=Lt(t)||null,u.self=t,u.state=e;var c="input"===E(t),l=e.n,v=J("span",{class:l+"__arrow"}),h=O(t),_=J("div",{class:l,tabindex:!At(t)&&!c&&0});u.mask=_;var m,k,w=J("div",{class:l+"__options"}),y=J("div",{class:l+"__values"}),x=J("span",{class:l+"__"+(c?"text":"value")}),z=J("span",{autocapitalize:"off",contenteditable:!(At(t)||Ct(t)||!c)&&"",spellcheck:!!c&&"false"}),A=J("span",c?t.placeholder+"":"");B(_,y),B(_,w),B(y,x),B(y,v),c?(et("blur",z,Bt),et("cut",z,Ut),et("focus",z,Wt),et("keydown",z,qt),et("paste",z,Qt),B(x,z),B(x,A),Mt(z,u)):(et("blur",_,It),et("focus",_,Yt),et("keydown",_,$t)),U(t,l+"__self"),k=_,L(m=t).insertBefore(k,T(m,!0)),h&&(et("reset",h,sn),et("submit",h,ln),Mt(h,u)),et("focus",t,Vt),et("mousedown",b,rn),et("mousedown",_,Zt),et("mousemove",b,on),et("mouseup",b,an),et("resize",g,fn),et("scroll",g,cn),et("touchend",b,an),et("touchmove",b,on),et("touchstart",b,rn),et("touchstart",_,Zt),t.tabIndex=-1,Mt(_,u);var C,P={};P.arrow=v,P.hint=c?A:null,P.input=c?z:null,P.of=t,P.options=w,P.self=_,P[c?"text":"value"]=x,u._mask=P,u.size=null!=(o=e.size)?o:c?1:t.size;var S,M=e.options;if(r(M)?(M=M.call(u,null),i(M,Promise)?M.then((function(t){dt(u,t),(S=xt(u))&&(u.value=S),u.fire("load",[u._event,t,null]).fit()})):(dt(u,M),(S=xt(u))&&(u.value=S))):dt(u,M||Et(t)),(C=Ot(d(u._value),u._options)||(c?0:Nt(u._options).find((function(t){return!At(t[3])}))))&&(u.value=zt(C[2])),s(e)&&n(e.with))for(var j=0,N=p(e.with);j<N;++j){var R=e.with[j];f(R)&&(R=Rt[R]),r(R)?R.call(u,t,e):a(R)&&r(R.attach)&&R.attach.call(u,t,e)}return u},Dt.blur=function(){vn();var t=this,n=t._mask,e=t.mask;return(n.input||e).blur(),t.exit()},Dt.detach=function(){var t=this,e=t._mask,i=t.mask,o=t.self,u=t.state,s=e.input,c=O(o);if(t._active=!1,t._options=new mn(t,u.options=Et(o)),t._value=Lt(o)||null,c&&(Z("reset",c,sn),Z("submit",c,ln)),s&&(Z("blur",s,Bt),Z("blur",i,It),Z("cut",s,Ut),Z("focus",s,Wt),Z("focus",i,Yt),Z("keydown",s,qt),Z("keydown",i,$t),Z("paste",s,Qt)),Z("focus",o,Vt),Z("mousedown",b,rn),Z("mousedown",i,Zt),Z("mousemove",b,on),Z("mouseup",b,an),Z("resize",g,fn),Z("scroll",g,cn),Z("touchend",b,an),Z("touchmove",b,on),Z("touchstart",b,rn),Z("touchstart",i,Zt),n(u.with))for(var l=0,v=p(u.with);l<v;++l){var d=u.with[l];f(d)&&(d=Rt[d]),a(d)&&r(d.detach)&&d.detach.call(t,o,u)}return o.tabIndex=null,R(o,u.n+"__self"),H(i),t._mask={of:o},t.mask=null,t},Dt.enter=function(t){var n,e=this,r=e._event,i=e._mask,o=e._options,u=e.mask,a=e.self,s=e.state,f=i.input,c=s.n;U(u,c+"--open");var l=Tt(b);return l&&e!==l&&l.exit(),Mt(b,e),Mt(g,e),e.fire("enter",[r]),t&&("input"===E(a)?(_t(f),pn(f)):(n=Ot(d(Lt(a)),o))&&_t(n[2]),e.fire("focus",[r]).fire("focus.option",[r])),e},Dt.exit=function(t){var n=this,e=n._event,r=n._mask,i=n.mask,o=n.self,u=n.state,a=r.input,s=u.n;return R(i,s+"--open"),n.fire("exit",[e]),t&&("input"===E(o)?(_t(a),pn(a)):_t(i),n.fire("focus",[e]).fire("focus.self",[e])),n},Dt.fit=function(){var t=this,n=t._mask,e=t.mask,r=n.options;if(z(e,"size"))return t;var i=C(e,"border-bottom-width"),o=C(e,"border-top-width"),u=G(e),a=G(g);return u[1]+u[3]/2>a[3]/2?q(r,{bottom:"100%","max-height":"calc("+u[1]+"px + "+i+")",top:"auto"}):q(r,{bottom:"auto","max-height":"calc("+(a[3]-u[1]-u[3])+"px + "+o+")",top:"100%"}),t},Dt.focus=function(t){var n=this,e=n._mask,r=n.mask,i=e.input;return i?(_t(i),pn(i,t),n):(_t(r),n)},ht(mn,"name",{value:"Options"});var gn=mn.prototype;return gn.get=function(t){return Ot(d(t),this.map)},gn.has=function(t){return n=d(t),this.map.has(n);var n},gn.let=function(t){var n,e=this,r=e.map,i=e.of,o=i.state.n;if(!s(t))return yt(r,(function(t,n){return e.let(n)})),_n(i),0===e.count;if(!(n=e.get(d(t))))return!1;var u=L(n[2]),a=L(n[3]),f=zt(n[2]),c=i.value;return Z("blur",n[2],Kt),Z("focus",n[2],Jt),Z("keydown",n[2],Gt),Z("mousedown",n[2],nn),Z("touchend",n[2],un),Z("touchstart",n[2],nn),H(n[2]),H(n[3]),(n=St(d(t),r))&&--e.count,u&&M(u,o+"__option-group")&&0===p(x(u))&&H(u),a&&"optgroup"===E(a)&&0===p(x(a))&&H(a),f===c&&hn(i),n},gn.set=function(t,n){var r=this;if(r.has(t))return r;var i,u,a,c,l,v,p=r.map,h=r.of,g=h._mask,k=h.self,b=h.state,w=g.options,y=b.n;y+="__option","input"===E(k)?!(i=k.list)||x(i):x(i=k),s(n)?(e(n)||o(n)||f(n))&&(n=[n,{}]):n=[t,{}],"&"in n[1]?(v="."+y+'-group[data-value="'+n[1]["&"].replace(/"/g,'\\"')+'"]',(c=(w||m).querySelector(v))&&zt(c)===n[1]["&"]||(B(w,c=J("span",{class:y+"-group","data-value":n[1]["&"]})),B(i,l=J("optgroup",{label:n[1]["&"]})))):c=l=!1;var z=n[1],T=z.disabled,L=z.selected,O=z.value;return At(k)&&(T=!0),O=_(O||t),u=n[2]||J("span",_(n[0]),{class:y+(T?" "+y+"--disabled":"")+(L?" "+y+"--selected":""),"data-group":"&"in n[1]&&n[1]["&"],"data-value":O,tabindex:!T&&-1,title:"title"in n[1]&&_(n[1].title)}),a=n[3]||J("option",_(n[0]),{disabled:!!T&&"",selected:!!L&&"",title:"title"in n[1]&&_(n[1].title),value:O}),u._={},u._[0]=a,T||n[2]||(et("blur",u,Kt),et("focus",u,Jt),et("keydown",u,Gt),et("mousedown",u,nn),et("touchend",u,un),et("touchstart",u,nn)),B(c||w,u),B(l||i,a),Mt(u,h),n[2]=u,n[3]=a,++r.count,jt(d(t),n,p),r},Rt.Options=mn,Rt}));