/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2025 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).OptionPicker=e()}(this,(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e(e,n,r){if(n&&!Array.isArray(n)&&"number"==typeof n.length){var i=n.length;return t(n,r<i?r:i)}return e(n,r)}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,u,a=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);s=!0);}catch(t){l=!0,i=t}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw i}}return a}}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}var i=function(t,e){return-1!==e.indexOf(t)},o=function(t){return Array.isArray(t)},u=function(t){return f(t)&&0!=t%1},a=function(t){return"function"==typeof t},s=function(t,e,n){return!(!t||"object"!=typeof t)&&(n?v(e)&&v(t.constructor)&&e===t.constructor:v(e)&&t instanceof e)},l=function(t){return f(t)&&0==t%1},f=function(t){return"number"==typeof t},c=function(t,e){return void 0===e&&(e=!0),!(!t||"object"!=typeof t)&&(!e||s(t,Object,1))},v=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},d=function(t){return"string"==typeof t},p=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.shift(),u=0,a=g(e);u<a;++u)for(var s in e[u])if(v(r[s]))if(o(r[s])&&o(e[u][s])){r[s]=[].concat(r[s]);for(var l=0,f=g(e[u][s]);l<f;++l)i(e[u][s][l],r[s])||r[s].push(e[u][s][l])}else c(r[s])&&c(e[u][s])?r[s]=p({},r[s],e[u][s]):r[s]=e[u][s];else r[s]=e[u][s];return r},h=function(t){if(o(t))return t.map((function(e){return h(t)}));if(c(t)){for(var e in t)t[e]=h(t[e]);return t}return!1===t?"false":null===t?"null":!0===t?"true":""+t},m=function(t){return t.replace(/[-_.](\w)/g,(function(t,e){return b(e)}))},_=function(t){return t.toLowerCase()},b=function(t){return t.toUpperCase()},g=function(t){return t.length},y=function(t){if(o(t))return t.map((function(t){return y(t)}));if(c(t)){for(var e in t)t[e]=y(t[e]);return t}return d(t)&&function(t){return/^[+-]?(?:\d*\.)?\d+$/.test(t+"")}(t)?"0"===t[0]&&-1===t.indexOf(".")?t:function(t,e){return void 0===e&&(e=10),e?parseInt(t,e):parseFloat(t)}(t):"false"!==t&&("null"===t?null:"true"===t||t)},k=function(t,e){for(var n=0,r=g(t);n<r&&0!==e(t[n],n);++n);return t},x=function(t,i){for(var o,u=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=r(t))||t&&"number"==typeof t.length){e&&(t=e);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(o=u()).done;){var a=e(n,o.value,2),s=a[0],l=a[1];if(0===(l=i(l,s)))break}return t},w=function(t,e){for(var n in t)if(0===e(t[n],n))break;return t},A=function(t){return t.prototype},S=function(t){return z(t,P)||null},z=function(t,e){return e.get(t)},T=function(t,e){return e.has(t)},O=function(t){return E(t,P)},E=function(t,e){return e.delete(t)},L=function(t,e,n){return n||(t=A(t)),w(e,(function(e,n){return Object.defineProperty(t,n,e)})),t},C=function(t,e,n){return t=A(t),w(e,(function(e,n){return t[n]=e})),t},j=function(t,e){return I(t,e,P)},I=function(t,e,n){return n.set(t,e)},M=function(t){var e=[];return x(t,(function(t){return e.push(t)})),e},P=new WeakMap,N=document,H=window,R=N.body,D=N.documentElement,K=function(t){return t.focus()},U=function(t,e,n){if(void 0===n&&(n=!0),!rt(t,e))return null;var r=t.getAttribute(e);return n?y(r):r},B=function(t,e){return t["first"+(e?"":"Element")+"Child"]||null},Y=function(t,e){return t["last"+(e?"":"Element")+"Child"]||null},J=function(t,e,n){var r=[].slice.call(t.children);return f(e)?r[e]||null:r},V=function(t,e,n){void 0===n&&(n=!0);var r=U(t,"data-"+e,n),i=(r+"").trim();return n&&i&&("["===i[0]&&"]"===i.slice(-1)||"{"===i[0]&&"}"===i.slice(-1))&&null!==(i=function(t){var e=null;try{e=JSON.parse(t)}catch(t){}return e}(r))?i:r},W=function(t,e){if(!t||!X(t))return-1;for(var n=0;t=Q(t,e);)++n;return n},$=function(t,e){return void 0===e&&(e="e:"),t.id?t.id:(v(zt[e])||(zt[e]=0),t.id=e+(zt[e]+=1))},q=function(t){return _(t&&t.nodeName||"")||null},F=function(t,e){return t["next"+(e?"":"Element")+"Sibling"]||null},X=function(t,e){return e?t.closest(e)||null:t.parentNode||null},G=function(t){var e="form";return it(t,e)&&e===q(t[e])?t[e]:X(t,e)},Q=function(t,e){return t["previous"+(e?"":"Element")+"Sibling"]||null},Z=function(t,e,n){var r=H.getComputedStyle(t).getPropertyValue(e);return r||""===r||0===r?r:null},tt=function(t,e){return it(t,e)&&t[e]||null},et=function(t,e){void 0===e&&(e=!0);var n="textContent";if(!it(t,n))return!1;var r=t[n];return""!==(r=e?r.trim():r)?r:null},nt=function(t,e){var n=(t.value||"").replace(/\r?\n|\r/g,"\n");return""!==n?n:null},rt=function(t,e){return t.hasAttribute(e)},it=function(t,e){return e in t},ot=function(t){return t.disabled},ut=function(t){return t.readOnly},at=function(t,e){return t.removeAttribute(e),t},st=function(t,e){return t.classList.remove(e),t},lt=function(t,e){return at(t,"data-"+e)},ft=function(t){var e=X(t);return t.remove(),e},ct=function(t,e){return t.style[m(e)]=null,t},vt=function(t){var e=N.getSelection();e.rangeCount&&e.removeRange(e.getRangeAt(0))},dt=function(t,e){var n=N.getSelection();vt();var r=N.createRange();r.selectNodeContents(t),n.addRange(r),1===e?n.collapseToEnd():-1===e&&n.collapseToStart()},pt=function(t,e,n){return!0===n&&(n=e),t.setAttribute(e,h(n)),t},ht=function(t,e){return t.append(e),e},mt=function(t,e){return t.classList.add(e),t},_t=function(t,e){return o(e)?(k(e,(function(e){return mt(t,e)})),t):c(e)?(w(e,(function(e,n){return e?mt(t,n):st(t,n)})),t):(t.className=e,t)},bt=function(t,e,n){return(o(n)||c(n))&&(n=JSON.stringify(n)),pt(t,"data-"+e,n)},gt=function(t,e,n,r){return t=d(t)?N.createElement(t,d(r)?{is:r}:r):t,o(e)&&g(e)?(!function(t){var e="innerHTML";it(t,e)&&(t[e]="")}(t),k(e,(function(t){return ht(d(t)?yt(t):t)}))):c(e)&&(n=e,e=!1),d(e)&&kt(t,e),c(n)?(function(t,e){w(e,(function(e,n){e||""===e||0===e?pt(t,n,e):at(t,n)}))}(t,n),t):t},yt=function(t){return d(t)?N.createTextNode(t):t},kt=function(t,e,n){if(void 0===n&&(n=!0),null===e)return t;var r="innerHTML";return it(t,r)&&(t[r]=n?e.trim():e),t},xt=function(t,e,n){return f(n)&&(n+="px"),t.style[m(e)]=h(n),t},wt=function(t,e){return w(e,(function(e,n){e||""===e||0===e?xt(t,n,e):ct(t,n)})),t},At=function(t,e,n){if(void 0===n&&(n=!0),null===e)return t;var r="textContent";return it(t,r)&&(t[r]=n?e.trim():e),t},St=function(t,e){return null===e?at(t,"value"):(t.value=h(e),t)},zt={},Tt=function(t,e){var n;return function(){var r=arguments,i=this;n&&clearTimeout(n),n=setTimeout((function(){return t.apply(i,r)}),e)}},Ot=function(t,e){return function(){var n=arguments,r=this;setTimeout((function(){return t.apply(r,n)}),e)}},Et=function(t){var e,n,r,i,o,u,a;return!function(t){return t===H}(t)?(i=(n=t.getBoundingClientRect()).left,o=n.top,r=n.width,e=n.height,u=n.right,a=n.bottom):(i=t.pageXOffset||D.scrollLeft||R.scrollLeft,o=t.pageYOffset||D.scrollTop||R.scrollTop,r=t.innerWidth,e=t.innerHeight),[i,o,r,e,u,a]},Lt=function(t){return[t.scrollLeft,t.scrollTop]};var Ct=function(t,e,n){e.removeEventListener(t,n)},jt=function(t){return t&&t.preventDefault()},It=function(t){return t&&t.stopPropagation()},Mt=function(t,e,n,r){void 0===r&&(r=!1),e.addEventListener(t,n,r)},Pt="ArrowDown",Nt="ArrowUp",Ht="Backspace",Rt="Delete",Dt="Enter",Kt="Escape",Ut="PageDown",Bt="PageUp",Yt="Tab",Jt=Tt((function(t){return t.fit()}),10);function Vt(t,e,n){var r=s(e,Map)?e:new Map;return o(e)?k(e,(function(t){var e,n,i;o(t)?(t[0]=null!=(e=t[0])?e:"",t[1]=null!=(n=t[1])?n:{},I(y(null!=(i=t[1].value)?i:t[0]),t,r)):I(y(t),[t,{}],r)})):c(e,0)&&w(e,(function(t,n){var i,u,a;o(t)?(e[n][0]=null!=(i=t[0])?i:"",e[n][1]=null!=(u=t[1])?u:{},I(y(null!=(a=t[1].value)?a:n),t,r)):I(y(n),[t,{}],r)})),function(t,e,n){var r,i,u=[],s=t._options,l=t.self,f=t.state;f.n;var c=nt(l);if(Zt(l)?!(r=l.list)||J(r):J(r=l),s.delete(null,0,0),x(n,(function(t,e){var n,r;o(t)&&t[1]&&!t[1].disabled&&t[1].selected&&u.push(y(null!=(r=t[1].value)?r:e)),s.set(y(o(t)&&t[1]&&null!=(n=t[1].value)?n:e),t,0)})),a(f.options)||(f.options=n),0===g(u)){if(T(i=y(c),n))return[i];if(i=Xt(t))return[Gt(i,1)]}return u}(t,0,r)}function Wt(t,e,n){if(e.mask,e.state.n,t)return Ft(e),K(t),t}function $t(t,e,n){var r,i=t._options;if(r=M(i)["find"+(n||"")]((function(t){return!U(t[2],"aria-disabled")&&!t[2].hidden})))return Wt(r[2],t)}function qt(t,e){return $t(t,0,"Last")}function Ft(t){var e=t._options;t.mask;var n=t.state.n;n+="__option--focus",x(e,(function(t){return st(t[2],n)}))}function Xt(t,e){var n,r=t._options,i=t.self;return x(r,(function(t,e){if(o(t)&&t[2]&&!U(t[2],"aria-disabled")&&U(t[2],"aria-selected"))return n=t[2],0})),v(n)||!e&&Zt(i)||x(r,(function(t,e){return n=t[2],0})),n}function Gt(t,e){return V(t,"value",e)}function Qt(t){var e,n,r,i=new Map,o=[],u=nt(t);return n=Zt(t)?(r=t.list)?J(r):[]:J(r=t),k(n,(function(t,e){var n=function(t,e){void 0===e&&(e=!0);var n=t.attributes,r={};return k(n,(function(t){var n=t.name,i=t.value;r[n]=e?y(i):i})),r}(t);k(["disabled","selected"],(function(t){it(n,t)?(n[t]=""===n[t]||n[t],"selected"===t&&o.push(1)):n[t]=null})),"optgroup"===q(t)?x(Qt(t),(function(e,n){e[1]["&"]=t.label,I(y(n),e,i)})):I(y(t.value),[et(t)||t.value,n,null,t],i)})),0===g(o)&&(e=z(u=y(u),i))&&(e[1].selected=!0,I(u,e,i)),i}function Zt(t){return"input"===q(t)}var te=Tt((function(t,e,n,r){var o=d(e)?e:et(e)||"",u=_(o),l=t._event,f=t._mask,c=t.mask,v=t.self,p=t.state,h=f.options;f.value;var m,b=p.strict,y=V(c,"size"),k=n.count;r?x(n,(function(e){var n=_(et(e[2])+"\t"+Gt(e[2]));if(""!==u&&u===n.slice(0,g(u))&&!U(e[2],"aria-disabled"))return Oe(e[2],t),y&&e[2].scrollIntoView({block:"nearest"}),0;--k})):(Ft(t),x(n,(function(t){var e=_(et(t[2])+"\t"+Gt(t[2]));""===u||i(u,e)?t[2].hidden=!1:(t[2].hidden=!0,--k)})),h.hidden=!k,b?(Le(t),k&&(m=M(n).find((function(t){return!U(t[2],"aria-disabled")&&!t[2].hidden})))?(pt(m[2],"aria-selected","true"),pt(m[3],"selected",""),St(v,Gt(m[2]))):St(v,"")):St(v,o)),t.fire("search",[l,o]);var w=p.options;0===k&&a(w)&&(pt(c,"aria-busy","true"),w=w.call(t,o),s(w,Promise)?w.then((function(e){Vt(t,e),at(c,"aria-busy"),t.fire("load",[l,o,e]).fit()})):Vt(t,w))}),10);function ee(t){var e=this,n=S(e),r=n.state.n;st(e,r+="--focus"),st(e,r+="-self"),n.fire("blur",[t]).fire("blur.self",[t])._event=t}function ne(t){var e=S(this),n=e.mask,r=e.state.n;e._event=t,st(this,r+"__option--focus"),st(n,r+="--focus"),st(n,r+"-option")}function re(t){var e=S(this),n=e._mask,r=e.mask,i=e.state;n.input;var o,u=n.text,a=i.n,s=i.strict;e._event=t,st(u,a+"__text--focus"),st(r,a+="--focus"),st(r,a+"-text"),s&&((o=Xt(e,1))?Oe(o,e):Le(e,1))}function ie(t){var e=this,n=S(e),r=n._mask,i=n.self,o=r.hint;n._event=t,Ot((function(){return At(o,et(e,!1)?"":i.placeholder)}),1)()}function oe(t){var e=this,n=S(e),r=n.state.n;mt(e,r+="--focus"),mt(e,r+="-self"),n.fire("focus",[t]).fire("focus.self",[t])._event=t}function ue(t){var e=S(this),n=e.mask,r=e.state.n;vt(),e._event=t,mt(this,r+"__option--focus"),mt(n,r+="--focus"),mt(n,r+="-option")}function ae(t){var e=S(this);e._event=t,e.focus()}function se(t){var e=this,n=S(e),r=n._mask,i=n.mask;n.self;var o=n.state,u=r.text,a=o.n;n._event=t,mt(u,a+"__text--focus"),mt(i,a+="--focus"),mt(i,a+="-text"),et(e,!1)?dt(e):n.enter().fit()}var le="";function fe(t){var e,n=this,r=t.key,i=S(n),o=i._mask,u=i._options,a=i.mask,s=i.self,l=i.state,f=o.hint;o.input;var c=l.strict;if(i._event=t,Ot((function(){return At(f,et(n,!1)?"":s.placeholder)}),1)(),Ht!==r&&Rt!==r&&1!==g(r)||Ot((function(){return i.enter().fit()}),11)(),Pt===r||Nt===r||Dt===r){var v=z(y(nt(s)),u._o);if(!(v=v?v[2]:0)||v.hidden)for(v=(v=M(u).shift())?v[2]:0;v&&(U(v,"aria-disabled")||v.hidden);)v=F(v);e=!0,U(a,"aria-expanded")?c&&Dt===r?Ee(i)&&i.exit(e):v&&K(v):(i.enter(e),v&&K(v))}else Yt===r?i.exit():Ot((function(){""!==le&&le===et(n)+""||(te(i,n,u),le=et(n)+"")}),1)();e&&(jt(t),It(t))}var ce="",ve=Tt((function(){return ce=""}),500);function de(t){var e,n=t.key,r=t.altKey,i=t.ctrlKey,o=S(this),u=o._options,a=o.self;if(ve(),ot(a)||ut(a))return jt(t);o._event=t,Ht===n||Rt===n?ce="":Kt===n?(ce="",o.exit(e=!0)):Yt===n?(ce="",o.exit(e=!1)):Pt===n||Nt===n||Dt===n||Ut===n||Bt===n||""===ce&&" "===n?o.enter(e=!0).fit():1!==g(n)||r||i||(ce+=n),""!==ce&&te(o,ce,u,e=!0),e&&jt(t)}function pe(t){var e,n=this,r=t.key,i=t.altKey,o=t.ctrlKey,u=S(n),a=u._mask;u._options,u.mask;var s,l,f,c=u.self,v=a.hint;if(a.input,a.value,u._event=t,Ht===r)u.exit(e=!0);else if(Dt===r||Kt===r||Yt===r||" "===r)Kt!==r&&Oe(n,u),u.exit(e=Yt!==r);else if(Pt===r||Ut===r){for(e=!0,s=Ut===r&&"group"===U(l=X(n),"role")?F(l):F(n);s&&(U(s,"aria-disabled")||s.hidden);)s=F(s);for(s?"group"===U(s,"role")&&(s=B(s)):((l=X(n))&&"group"===U(l,"role")&&(s=F(l)),s&&"group"===U(s,"role")&&(s=B(s)));s&&(U(s,"aria-disabled")||s.hidden);)s=F(s);s?Wt(s,u):$t(u)}else if(Nt===r||Bt===r){for(e=!0,f=Bt===r&&"group"===U(l=X(n),"role")?Q(l):Q(n);f&&(U(f,"aria-disabled")||f.hidden);)f=Q(f);for(f?"group"===U(f,"role")&&(f=Y(f)):((l=X(n))&&"group"===U(l,"role")&&(f=Q(l)),f&&"group"===U(f,"role")&&(f=Y(f)));f&&(U(f,"aria-disabled")||f.hidden);)f=Q(f);f?Wt(f,u):qt(u)}else"Home"===r?(e=!0,$t(u)):"End"===r?(e=!0,qt(u)):(Zt(c)&&1===g(r)&&!i&&!o&&At(v,""),u.exit(!(e=!1)));e&&(jt(t),It(t))}function he(t){var e=this,n=S(e),r=n._mask,i=n.self,o=r.hint;n._event=t,Ot((function(){return At(e,et(e))}))(),Ot((function(){return At(o,et(e,!1)?"":i.placeholder)}),1)()}function me(t){jt(t);var e=this,n=S(e),r=n._options,i=n.self,o=t.target;n._event=t,ot(i)||ut(i)||V(e,"size")||"listbox"===U(o,"role")||X(o,"[role=listbox]")||(x(r,(function(t){return t[2].hidden=!1})),n.fire("focus",[t]).fire("focus.self",[t])[U(e,"aria-expanded")?"exit":"enter"](!0).fit())}var _e=0;function be(t){var e=this,n=S(e),r=n._mask,i=n.mask,o=r.options;n._event=t,"mousedown"===t.type?(Oe(e,n),V(i,"size")||n.exit(!0)):(K(e),_e=Lt(o)[1]),jt(t)}var ge=!1;function ye(t){"touchstart"===t.type&&(ge=t.touches[0].clientY);var e=S(this);if(e){var n=e.mask,r=e.state.n,i=t.target;e._event=t,n!==i&&n!==X(i,"."+r)&&(V(n,"size")?e.blur():(O(this),e.exit()))}}function ke(t){if(!1!==ge){var e,n,r=S(this);if(r._event=t,"touchmove"===t.type&&r){var i=r._mask.options,o=t.touches[0].clientY;if(i){var u=Lt(i);u[1]-=o-ge,n=u,(e=i).scrollLeft=n[0],e.scrollTop=n[1],ge=o}}}}function xe(t){var e=S(this),n=e._mask.options;e._event=t,Lt(n)[1]===_e&&(Oe(this,e),e.exit(!0))}function we(){ge=!1}function Ae(t){var e=S(this);e._event=t,e.reset()}function Se(t){var e=S(this);e&&(Jt(e),e._event=t)}function ze(t){Se.call(this,t)}function Te(t){var e=S(this);return e._event=t,e.fire("submit",[t,e.value])}function Oe(t,e){var n=e._event,r=e._mask;e._options;var i=e.self,o=r.hint,u=r.input,a=r.value;if(t){var s,l=nt(i);return Le(e),pt(t,"aria-selected","true"),pt(t._[0],"selected",""),St(i,s=Gt(t)),Zt(i)?(pt(u,"aria-activedescendant",$(t)),At(o,""),At(u,et(t))):(bt(a,"value",s),kt(a,function(t,e){void 0===e&&(e=!0);var n="innerHTML";if(!it(t,n))return!1;var r=t[n];return""!==(r=e?r.trim():r)?r:null}(t))),l!==s&&e.fire("change",[n,y(s)]),t}}function Ee(t,e){var n,r=t._options;if(t.state,n=M(r).find((function(t){return!U(t[2],"aria-disabled")&&!t[2].hidden})))return Oe(n[2],t)}function Le(t,e){t._event;var n=t._mask,r=t._options,i=t.self,o=n.hint,u=n.input;n.options;var a=n.value;x(r,(function(t){at(t[2],"aria-selected"),at(t[3],"selected")})),e&&(St(i,""),Zt(i)?(at(u,"aria-activedescendant"),At(o,i.placeholder),At(u,"")):(lt(a,"value"),kt(a,"")))}function Ce(t,e){var n=this;return t?s(n,Ce)?(j(t,function(t,e){return(e=e||t).fire=function(t,e,n){var r=this,i=r.hooks;return v(i[t])?(i[t].forEach((function(t){return t.apply(n||r,e)})),r):r},e.off=function(t,e){var n=this,r=n.hooks;if(!v(t))return r={},n;if(v(r[t]))if(v(e)){var i=r[t].length;if(0===i)delete r[t];else for(var o=0;o<i;++o)if(e===r[t][o]){r[t].splice(o,1);break}}else delete r[t];return n},e.on=function(t,e){var n=this.hooks;return v(n[t])||(n[t]=[]),v(e)&&n[t].push(e),this},t.hooks={},t}(n,Ce._)),n.attach(t,p({},Ce.state,e||{}))):new Ce(t,e):n}function je(t,e){var n=this;return s(n,je)?(n._o=new Map,n.count=0,n.of=t,e&&g(e)&&Vt(t,e,t._mask.options),n):new je(t,e)}return Ce.from=function(t,e){return new Ce(t,e)},Ce.of=S,Ce.state={n:"option-picker",options:null,size:null,strict:!1,with:[]},Ce.version="2.0.0",L(Ce,{name:{value:"OptionPicker"}},1),L(Ce,{options:{get:function(){return this._options},set:function(t){var e,n=this,r=n._event,i=n._mask,o=n._options,a=n.self;(u(t)||l(t)||d(t))&&(t=[t]);var s=n.value;g(e=Vt(n,t,i.options))&&(St(a,e[0]),n.value=n._value=e[0],s!==n.value&&n.fire("change",[r,n.value]));var f=[];return x(o,(function(t,e){return f.push(e)})),n.fire("set.options",[r,f])}},size:{get:function(){var t=this.state.size||1;return l(t)?t<1?1:t:1},set:function(t){var e=this,n=e._event,r=e._mask,i=e._options,o=e.mask,u=e.state,a=r.options;u.n;var s=l(t)?t<1?1:t:1;if(u.size=s,1===s)lt(o,"size"),ct(a,"max-height"),O(D);else{var f=M(i).find((function(t){return!t[2].hidden}));if(f){var c,v,d=Z(a,"gap"),p=Z(a,"padding-bottom"),h=null!=(c=null!=(v=Z(f,"height"))?v:Z(f,"min-height"))?c:Z(f,"line-height");bt(o,"size",s),xt(a,"max-height","calc(("+h+" + max("+d+","+p+"))*"+s+")"),j(D,e)}}return e.fire("set.size",[n,s])}},text:{get:function(){var t=this._mask,e=t.input;return t.text?et(e):null},set:function(t){var e=this,n=e._event,r=e._mask,i=e.self,o=r.hint,u=r.input;return r.text&&(At(u,h(t)),At(o,et(u,!1)?"":i.placeholder+"")),e.fire("set.text",[n,t])}},value:{get:function(){var t=nt(this.self);return""===t?null:t},set:function(t){var e,n=this,r=n._active,i=n._event,o=n._options;return n.mask,n.state.n,r?((e=z(y(t),o._o))&&Oe(e[2],n),n.fire("set.value",[i,t])):n}},values:{get:function(){},set:function(t){}}}),Ce._=C(Ce,{attach:function(t,e){var n,r=this;t=t||r.self,e=e||r.state,r._active=!ot(t)&&!ut(t),r._event=null,r._options=new je(r,[]),r._value=nt(t)||null,r.self=t,r.state=e;var i=Zt(t),u=e.n,l=gt("span",{class:u+"__arrow"}),f=G(t),p=gt("div",{"aria-expanded":"false","aria-haspopup":"listbox","aria-multiselectable":!!t.multiple&&"true",class:u,role:"combobox",tabindex:!ot(t)&&!i&&0});r.mask=p;var h,m,_=gt("div",{class:u+"__options",role:"listbox"}),b=gt("div",{class:u+"__values",role:"group"}),y=gt("span",{class:u+"__"+(i?"text":"value")}),w=gt("span",{"aria-autocomplete":"list","aria-disabled":!!ot(t)&&"true","aria-multiline":"false","aria-placeholder":!!i&&t.placeholder,"aria-readonly":!!ut(t)&&"true",autocapitalize:"off",contenteditable:!(ot(t)||ut(t)||!i)&&"",role:"searchbox",spellcheck:!!i&&"false",tabindex:!(!ut(t)||!i)&&0}),A=gt("span",i?t.placeholder+"":"");ht(p,b),ht(p,_),ht(b,y),ht(b,l),i?(Mt("blur",w,re),Mt("cut",w,ie),Mt("focus",w,se),Mt("keydown",w,fe),Mt("paste",w,he),ht(y,w),ht(y,A),j(w,r)):(Mt("blur",p,ee),Mt("focus",p,oe),Mt("keydown",p,de)),mt(t,u+"__self"),m=p,X(h=t).insertBefore(m,F(h,!0)),f&&(f.id=$(f),Mt("reset",f,Ae),Mt("submit",f,Te),j(f,r)),Mt("focus",t,ae),Mt("mousedown",D,ye),Mt("mousedown",p,me),Mt("mousemove",D,ke),Mt("mouseup",D,we),Mt("resize",H,Se,{passive:!0}),Mt("scroll",H,ze,{passive:!0}),Mt("touchend",D,we),Mt("touchmove",D,ke,{passive:!0}),Mt("touchstart",D,ye),Mt("touchstart",p,me),t.tabIndex=-1,j(p,r);var S={};S.arrow=l,S.hint=i?A:null,S.input=i?w:null,S.of=t,S.options=_,S.self=p,S[i?"text":"value"]=y,r._mask=S,r.size=null!=(n=e.size)?n:i?1:t.size;var z,T=r._active,O=e.options;return r._active=!0,a(O)?(pt(p,"aria-busy","true"),O=O.call(r,null),s(O,Promise)?O.then((function(t){at(p,"aria-busy"),g(z=Vt(r,t))?r.value=z[0]:(z=Xt(r,1))&&(r.value=Gt(z));var e=[];x(r._options,(function(t,n){return e.push(n)})),r.fire("load",[r._event,null,e]).fit()})):g(z=Vt(r,O))&&(r.value=z[0])):g(z=Vt(r,O||Qt(t)))&&(r.value=z[0]),r._active=T,l.id=$(l),p.id=$(p),_.id=$(_),b.id=$(b),t.id=$(t),y.id=$(y),w.id=$(w),A.id=$(A),pt(p,"aria-controls",$(_)),pt(p,"aria-labelledby",$(y)),pt(t,"aria-hidden","true"),pt(w,"aria-controls",$(_)),v(e)&&o(e.with)&&k(e.with,(function(n,i){d(n)&&(n=Ce[n]),a(n)?n.call(r,t,e):c(n)&&a(n.attach)&&n.attach.call(r,t,e)})),r},blur:function(){var t=this,e=t._mask,n=t.mask,r=e.input;return r&&vt(),(r||n).blur(),t.exit()},detach:function(){var t=this,e=t._mask,n=t.mask,r=t.self,i=t.state,u=e.input,s=G(r);return t._active=!1,t._options=new je(t,i.options=Qt(r)),t._value=nt(r)||null,s&&(Ct("reset",s,Ae),Ct("submit",s,Te)),u&&(Ct("blur",u,re),Ct("blur",n,ee),Ct("cut",u,ie),Ct("focus",u,se),Ct("focus",n,oe),Ct("keydown",u,fe),Ct("keydown",n,de),Ct("paste",u,he)),Ct("focus",r,ae),Ct("mousedown",D,ye),Ct("mousedown",n,me),Ct("mousemove",D,ke),Ct("mouseup",D,we),Ct("resize",H,Se),Ct("scroll",H,ze),Ct("touchend",D,we),Ct("touchmove",D,ke),Ct("touchstart",D,ye),Ct("touchstart",n,me),o(i.with)&&k(i.with,(function(e,n){d(e)&&(e=Ce[e]),c(e)&&a(e.detach)&&e.detach.call(t,r,i)})),r.tabIndex=null,at(r,"aria-hidden"),st(r,i.n+"__self"),ft(n),t._mask={of:r},t.mask=null,t},enter:function(t,e){var n,r=this,i=r._active,o=r._event,u=r._mask,a=r._options,s=r.mask,l=r.self,f=u.input;if(!i)return r;pt(s,"aria-expanded","true");var c=S(D);return c&&r!==c&&c.exit(),j(D,r),j(H,r),r.fire("enter",[o]),t&&(Zt(l)?(K(f),dt(f,e)):(n=z(y(nt(l)),a._o))&&K(n[2])),r},exit:function(t,e){var n=this,r=n._active,i=n._event,o=n._mask,u=n._options,a=n.mask,s=n.self,l=o.input;return r?(x(u,(function(t){return t[2].hidden=!1})),pt(a,"aria-expanded","false"),n.fire("exit",[i]),t&&(Zt(s)?(K(l),dt(l,e)):K(a)),n):n},fit:function(){var t=this,e=t._active,n=t._event,r=t._mask,i=t.mask,o=r.options;if(!e||!U(i,"aria-expanded")||V(i,"size"))return t;var u=Z(i,"border-bottom-width"),a=Z(i,"border-top-width"),s=Et(i),l=Et(H);return s[1]+s[3]/2>l[3]/2?wt(o,{bottom:"100%","max-height":"calc("+s[1]+"px + "+u+")",top:"auto"}):wt(o,{bottom:"auto","max-height":"calc("+(l[3]-s[1]-s[3])+"px + "+a+")",top:"100%"}),t.fire("fit",[n])},focus:function(t){var e=this,n=e._event,r=e._mask,i=e.mask,o=r.input;return o?(K(o),dt(o,t)):K(i),e.fire("focus",[n]).fire("focus.self",[n])},reset:function(t,e){var n=this,r=n._active,i=n._event,o=n._value;if(!r)return n;var u=n.value;return n.value=o,n.fire("reset",[i,u]),t?n.focus(e):n}}),L(je,{name:{value:"Options"}},1),L(je,{open:{get:function(){var t=this.of.mask;return U(t,"aria-expanded")}}}),C(je,{delete:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1);var r,i=this,o=i._o,u=i.of,a=u._active,s=u._event,l=u._mask,f=u.self,c=u.state,d=l.options;if(c.n,!a)return!1;if(!v(t))return x(o,(function(t,e){return i.let(e,0)})),Le(u,e),d.hidden=!0,n&&u.fire("let.options",[s,[]])&&0===i.count;if(!(r=z(t=y(t),o)))return n&&u.fire("not.option",[s,t]),!1;var p=X(r[2]),h=X(r[3]),m=Gt(r[2]),_=u.value;return Ct("blur",r[2],ne),Ct("focus",r[2],ue),Ct("keydown",r[2],pe),Ct("mousedown",r[2],be),Ct("touchend",r[2],xe),Ct("touchstart",r[2],be),ft(r[2]),ft(r[3]),(r=E(t,o))&&--i.count,p&&"group"===U(p,"role")&&0===g(J(p))&&ft(p),h&&"optgroup"===q(h)&&0===g(J(h))&&ft(h),0===g(J(d))?(Le(u,!Zt(f)),d.hidden=!0):m===_&&Ee(u),n&&u.fire("let.option",[s,t]),r},get:function(t){var e=this._o;this.of;var n,r=z(y(t),e);return r&&(n=X(r[2]))&&"group"===U(n,"role")?[W(r[2]),W(n)]:r?W(r[2]):-1},has:function(t){return T(y(t),this._o)},let:function(t,e){return void 0===e&&(e=1),this.delete(t,1,e)},set:function(t,e,n){var r,i,o;void 0===n&&(n=1);var a=this,s=a._o,f=a.of,c=f._active,p=f._event;if(!c)return!1;if(a.has(t=y(t)))return n&&f.fire("has.option",[p,t]),!1;var m,_,b,g,k,x,w,A,S,z,T=f._mask,O=f.self,E=f.state,L=T.options,C=E.n;(C+="__option",Zt(O)?!(_=O.list)||J(_):J(_=O),_.id=$(_),L.hidden=!1,v(e)?(u(e)||l(e)||d(e))&&(e=[e,{}]):e=[t,{}],it(e[1],"&"))?(z="."+C+'-group[data-value="'+e[1]["&"].replace(/"/g,'\\"')+'"]',(g=(L||N).querySelector(z))&&Gt(g)===e[1]["&"]||(ht(L,g=gt("span",{class:C+"-group","data-value":e[1]["&"],role:"group",title:null!=(A=tt(e[1],"title"))&&A})),ht(_,k=gt("optgroup",{label:e[1]["&"],title:null!=(S=tt(e[1],"title"))&&S})),(m=tt(e[1],"class"))&&(_t(g,m),_t(k,m)),(w=tt(e[1],"style"))&&(wt(g,w),wt(k,w)),g.id=$(g),k.id=$(k))):g=k=!1;var M=e[1],P=M.disabled,H=M.selected,R=M.value;return ot(O)&&(P=!0),R=h(R||t),b=e[2]||gt("span",h(e[0]),{"aria-disabled":!!P&&"true","aria-selected":!!H&&"true",class:C,"data-group":null!=(r=tt(e[1],"&"))&&r,"data-value":R,role:"option",tabindex:!P&&-1,title:null!=(i=tt(e[1],"title"))&&i}),x=e[3]||gt("option",h(e[0]),{disabled:!!P&&"",selected:!!H&&"",title:null!=(o=tt(e[1],"title"))&&o,value:R}),(m=tt(e[1],"class"))&&(_t(b,m),_t(x,m)),(w=tt(e[1],"style"))&&(wt(b,w),wt(x,w)),b.id=$(b),x.id=$(x),b._={},b._[0]=x,P||e[2]||(Mt("blur",b,ne),Mt("focus",b,ue),Mt("keydown",b,pe),Mt("mousedown",b,be),Mt("touchend",b,xe),Mt("touchstart",b,be)),ht(g||L,b),ht(k||_,x),j(b,f),e[2]=b,e[3]=x,++a.count,I(t,e,s),n&&f.fire("set.option",[p,t]),!0}}),A(je)[Symbol.iterator]=function(){return this._o[Symbol.iterator]()},Ce.Options=je,Ce}));