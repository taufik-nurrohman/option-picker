/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).OP=n()}(this,(function(){"use strict";var t=function(t){return Array.isArray(t)},n=function(t,n){return t&&i(n)&&t instanceof n},e=function(t){return"number"==typeof t},r=function(t,e){return void 0===e&&(e=!0),"object"==typeof t&&(!e||n(t,Object))},i=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},u=function(t){return"string"==typeof t},o=function n(e){if(t(e))return e.map((function(t){return n(e)}));if(r(e)){for(var i in e)e[i]=n(e[i]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},f=function(t){return t.replace(/[-_.](\w)/g,(function(t,n){return c(n)}))},c=function(t){return t.toUpperCase()},l=function(t){return t.length},a=function(t,n){return void 0===n&&(n=10),n?parseInt(t,n):parseFloat(t)},s=function(t){return Object.keys(t)},d=function n(e){if(t(e))return e.map((function(t){return n(t)}));if(function(t){return/^-?(?:\d*.)?\d+$/.test(t+"")}(e))return a(e);if(r(e)){for(var i in e)e[i]=n(e[i]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},p=document,v=window,h=p.body,g=p.documentElement,b=function(t,n){var r=t.children;return e(n)?r[n]||null:r||[]},m=function(t,n){void 0===n&&(n=!0);var e=(k(t,"className")||"").trim();return n?e.split(/\s+/):e},y=function(t){return t.parentNode||null},x=function(t,n,e){void 0===e&&(e=!0);var r=v.getComputedStyle(t).getPropertyValue(n);return e&&(r=d(r)),r||""===r||0===r?r:null},k=function(t,n){return O(t,n)&&t[n]||null},w=function(t,n){void 0===n&&(n=!0);var e="textContent";if(!O(t,e))return!1;var r=t[e];return""!==(r=n?r.trim():r)?r:null},E=function(t,n){return t.hasAttribute(n)},L=function(t,n){return t.classList.contains(n)},O=function(t,n){return n in t},T=function(t){return t===v},A=function(t,n){return t.removeAttribute(n),t},z=function(t,n){return t.classList.remove(n),t},P=function(t,n){return A(t,"data-"+n)},C=function(t,n){return t.style[f(n)]=null,t},H=function(t,n,e){return!0===e&&(e=n),t.setAttribute(n,o(e)),t},$=function(t,n){return t.append(n),n},N=function(t,n){return t.classList.add(n),t},S=function(n,e,i){return(t(i)||r(i))&&(i=JSON.stringify(i)),H(n,"data-"+e,i)},W=function(t,n,e){return t=u(t)?p.createElement(t):t,r(n)&&(e=n,n=!1),u(n)&&B(t,n),r(e)&&function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?H(t,r,e):A(t,r)}(t,e),t},B=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="innerHTML";return O(t,r)&&(t[r]=e?n.trim():n),t},D=function(t,n,r){return e(r)&&(r+="px"),t.style[f(n)]=o(r),t},I=function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?D(t,r,e):C(t,r);return t},K=function(t,n,e){return t.classList.toggle(n,e),t},U=function(t,n,e){n.removeEventListener(t,e)},F=function(t){return t&&t.preventDefault()},J=function(t,n,e,r){void 0===r&&(r=!1),n.addEventListener(t,e,r)},M=function(t){return T(t)?[t.innerWidth,t.innerHeight]:[t.offsetWidth,t.offsetHeight]},R=function(t,n){return t.scrollLeft=n[0],t.scrollTop=n[1],t};function V(t){var n={};return t.hooks=n,t.fire=function(e,r){return i(n[e])?(n[e].forEach((function(n){return n.apply(t,r)})),t):t},t.off=function(e,r){if(!i(e))return n={},t;if(i(n[e]))if(i(r)){for(var u=0,o=n[e].length;u<o;++u)if(r===n[e][u]){n[e].splice(u,1);break}0===j&&delete n[e]}else delete n[e];return t},t.on=function(e,r){return i(n[e])||(n[e]=[]),i(r)&&n[e].push(r),t},t}function X(e,r={}){if(!e)return;const i=this;if(!n(i,X))return new X(e,r);if(e.OP)return;let{fire:u,hooks:f}=V(i);var c;function k(){return[d(O()),i.options]}function O(){if(it){let t=[];for(let n=0,e=l(ot);n<e;++n)C(ot[n])&&t.push(j(ot[n]));return t}let t=e.value;return""!==t?t:null}function j(t){let n=t.value||w(t);return""!==n?n:null}function C(t){return E(t,"selected")}function Y(t){A(t,"selected"),t.selected=!1}function _(t){z(t,"active")}function q(t){H(t,"selected",!0),t.selected=!0}function G(t){N(t,"active")}function Q(t){t=t||"‌",dt.title=t.replace(/<.*?>/g,""),B(dt,t)}function Z(n){if(it){let n,e=function(n){return t(n)?n:[n]}(n);for(let t=0,r=l(ot);t<r;++t)n=j(ot[t]),e.includes(d(n))?q(ot[t]):Y(ot[t])}}i.state=r=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return Object.assign.apply(Object,[{}].concat(n))}(X.state,r),i.options={},i.source=e,X.instances[e.id||e.name||(c=X.instances,l(s(c)))]=i,e.OP=1;let tt=r.class,nt=W(e,{class:tt+"-source",tabindex:-1}),et=()=>nt.disabled,rt=b(nt),it=nt.multiple,ut=0,ot=nt.options,ft=r.parent||p,ct=nt.size,lt=nt.title,at=O(),st=W("div",{class:tt,tabindex:0,title:lt}),dt=W("b","‌"),pt=W("div",{tabindex:-1}),vt=[],ht=!1,gt=!1;var bt,mt;function yt(){it||ct||(z(st,"open"),u("exit",k()))}function xt(t){K(st,"open",t);let n=kt();return u(n?"enter":"exit",k()),n}function kt(){return L(st,"open")}function wt(){st.focus()}function Et(t){if(et())return;let n=this,e=n.$,i=at;at=n.v;let o,f,c,a=[];if(t&&t.isTrusted&&wt(),F(t),it&&ht){!function(t){return L(t,"active")}(n)?(q(e),G(n)):(Y(e),_(n));for(let t=0,n=l(ot);t<n;++t)C(ot[t])&&(o=w(vt[t]),f=vt[t].i,c=vt[t].v,o='<i class="'+m(vt[t],!1)+'" data-index="'+f+'"'+(E(vt[t],"data-value")?' data-value="'+c+'"':"")+">"+o+"</i>",a.push(o));return Q(a.join(r.join)),void u("change",k())}o=w(n),f=n.i,c=n.v,o='<i class="'+m(n,!1)+'" data-index="'+f+'"'+(E(n,"data-value")?' data-value="'+c+'"':"")+">"+o+"</i>",Q(o),vt.forEach((t=>{at===t.v?(q(t.$),G(t)):(Y(t.$),_(t))})),at!==i&&u("change",k())}function Lt(t){z(st,"focus"),u("blur",k())}function Ot(t){if(!et())return ct?(N(st,"open"),void u("enter",k())):void(xt()&&Ht(st))}function Tt(t){N(st,"focus"),u("focus",k())}function jt(t){ht=t.ctrlKey,gt=t.shiftKey;let n=t.key,e=nt.selectedIndex,r=vt[e],i=t=>L(t,"lock"),u=t=>Et.call(t),o=kt();if("ArrowDown"===n){for(;(r=vt[++e])&&i(r););r&&(u(r),xt(o)),F(t)}else if("ArrowUp"===n){for(;(r=vt[--e])&&i(r););r&&(u(r),xt(o)),F(t)}else if("End"===n){for(e=l(ot);(r=vt[--e])&&i(r););r&&(u(r),xt(o)),F(t)}else if("Enter"===n)xt(),F(t);else if("Escape"===n)!ct&&yt();else if("Home"===n){for(e=0;(r=vt[++e])&&i(r););r&&(u(r),xt(o)),F(t)}else"Tab"===n&&(r&&u(r),!ct&&yt());o&&!ht&&!gt&&Ht(st)}function At(){ht=gt=!1}function zt(t){let n=t.target;if(n!==st)for(;(n=y(n))&&st!==n;);st!==n&&yt()}function Pt(){kt()&&Ht(st)}function Ct(n,e){if("optgroup"===function(t){return(t&&t.nodeName||"").toLowerCase()||null}(n)){let t=W("span"),r=b(n);t.title=n.label;for(let n=0,e=l(r);n<e;++n)Ct(r[n],t);return void $(e,t)}let r=function(t,n,e){if(void 0===e&&(e=!0),!E(t,n))return null;var r=t.getAttribute(n);return e?d(r):r}(n,"value",!1),u=r,o=w(n),f=W("a",o,{title:o});r=r||o,f.i=ut,f.$=n,f.v=r,function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?S(t,r,e):P(t,r)}(f,{index:ut,value:u}),i.options[r]=o;let c=n.disabled;c?N(f,"lock"):J("click",f,Et),$(e,f),vt.push(f),t(at)&&function(t,n){return-1!==n.indexOf(t)}(r,at)||r===at?(N(f,"active"),Q('<i class="active'+(c?" lock":"")+'" data-index="'+ut+'"'+(u?' data-value="'+u+'"':"")+">"+o+"</i>"),q(n)):Y(n),++ut}function Ht(t){let n=a(x(t,"border-top-width")),e=a(x(t,"border-bottom-width"));if(!ct){let[r,i,u,o]=function(t){var n,e,r,i,u,o,f;return T(t)?(i=t.pageXOffset||g.scrollLeft||h.scrollLeft,u=t.pageYOffset||g.scrollTop||h.scrollTop,r=t.innerWidth,n=t.innerHeight):(i=(e=t.getBoundingClientRect()).left,u=e.top,r=e.width,n=e.height,o=e.right,f=e.bottom),[i,u,r,n,o,f]}(t),f=M(v)[1],c=f-i-o;I(pt,{bottom:"",left:r,"max-height":c,top:i+o-n,width:u}),c<(f-o)/2?(c=i,I(pt,{top:"",bottom:f-i-e,"max-height":c+n}),N(pt,"up")):z(pt,"up")}let r=vt.find((t=>L(t,"active")));if(r){let t=M(r)[1],n=M(pt)[1],[e,i]=function(t){return[t.offsetLeft,t.offsetTop]}(r),u=function(t){return[t.scrollLeft,t.scrollTop]}(pt)[1];i<u?R(pt,[e,i]):i+t-n>u&&R(pt,[e,i+t-n])}u("fit",k())}it&&!ct&&(nt.size=ct=r.size),$(st,dt),mt=st,y(bt=nt).insertBefore(mt,function(t){return t.nextElementSibling||null}(bt)),function(t,n,e,r){void 0===r&&(r=!1),t.forEach((function(t){return J(t,n,e,r)}))}(["resize","scroll"],v,Pt),J("click",ft,zt),J("focus",nt,wt),J("blur",st,Lt),J("click",st,Ot),J("focus",st,Tt),J("keydown",st,jt),J("keyup",st,At);let $t=l(rt);if($t){$(st,pt);for(let t=0;t<$t;++t)Ct(rt[t],pt);if(ct){let t=vt[0],n=M(t)[1]*ct;D(pt,"max-height",n)}}return ct&&N(st,"open"),i.get=(t=!0)=>{let n=O();return t?d(n):n},i.pop=()=>e.OP?(delete e.OP,function(t,n,e){t.forEach((function(t){return U(t,n,e)}))}(["resize","scroll"],v,Pt),U("click",ft,zt),U("focus",nt,wt),z(nt,tt+"-source"),U("blur",st,Lt),U("click",st,Ot),U("focus",st,Tt),U("keydown",st,jt),U("keyup",st,At),letText(st),function(t){var n=y(t);t.remove()}(st),u("pop",k())):i,i.set=t=>(Z(o(t)),vt.forEach(((t,n)=>{let e=ot[n];K(t,"active",e&&C(e))})),u("change",k()),i),i.self=st,i.value=d(O()),i}return X.instances={},X.state={class:"option-picker",join:", ",parent:null,size:5},X.version="1.0.0",X}));