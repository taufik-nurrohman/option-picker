/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).OP=t()}(this,(function(){"use strict";var n=function(n){return Array.isArray(n)},t=function(n,t){return n&&i(t)&&n instanceof t},e=function(n){return"number"==typeof n},r=function(n,e){return void 0===e&&(e=!0),"object"==typeof n&&(!e||t(n,Object))},i=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},o=function(n){return"string"==typeof n},u=function t(e){if(n(e))return e.map((function(n){return t(e)}));if(r(e)){for(var i in e)e[i]=t(e[i]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},f=function(n){return n.replace(/[-_.](\w)/g,(function(n,t){return c(t)}))},c=function(n){return n.toUpperCase()},l=function(n){return n.length},a=function(n,t){return void 0===t&&(t=10),t?parseInt(n,t):parseFloat(n)},s=function(n){return Object.keys(n)},d=function t(e){if(n(e))return e.map((function(n){return t(n)}));if(function(n){return/^-?(?:\d*.)?\d+$/.test(n+"")}(e))return a(e);if(r(e)){for(var i in e)e[i]=t(e[i]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},p=document,v=window,h=p.body,g=p.documentElement,b=function(n,t){var r=n.children;return e(t)?r[t]||null:r||[]},m=function(n){return n.parentNode||null},y=function(n,t,e){void 0===e&&(e=!0);var r=v.getComputedStyle(n).getPropertyValue(t);return e&&(r=d(r)),r||""===r||0===r?r:null},k=function(n,t){void 0===t&&(t=!0);var e="textContent";if(!L(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},x=function(n,t){return n.hasAttribute(t)},w=function(n,t){return n.classList.contains(t)},L=function(n,t){return t in n},O=function(n){return n===v},E=function(n,t){return n.removeAttribute(t),n},T=function(n,t){return n.classList.remove(t),n},A=function(n,t){return E(n,"data-"+t)},C=function(n,t){return n.style[f(t)]=null,n},P=function(n,t,e){return!0===e&&(e=t),n.setAttribute(t,u(e)),n},_=function(n,t){return n.append(t),t},H=function(n,t){return n.classList.add(t),n},B=function(t,e,i){return(n(i)||r(i))&&(i=JSON.stringify(i)),P(t,"data-"+e,i)},N=function(n,t,e){return n=o(n)?p.createElement(n):n,r(t)&&(e=t,t=!1),o(t)&&S(n,t),r(e)&&function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?P(n,r,e):E(n,r)}(n,e),n},S=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="innerHTML";return L(n,r)&&(n[r]=e?t.trim():t),n},W=function(n,t,r){return e(r)&&(r+="px"),n.style[f(t)]=u(r),n},D=function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?W(n,r,e):C(n,r);return n},F=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="textContent";return L(n,r)&&(n[r]=e?t.trim():t),n},I=function(n,t,e){return n.classList.toggle(t,e),n},U={},z=function(n,t,e,r){t.dispatchEvent(function(n,t,e){return e&&i(U[n])?U[n]:U[n]=new Event(n,t)}(n,e,r))},J=function(n,t,e){t.removeEventListener(n,e)},M=function(n){return n&&n.preventDefault()},R=function(n,t,e,r){void 0===r&&(r=!1),t.addEventListener(n,e,r)};function V(n){var t={};return n.hooks=t,n.fire=function(e,r){return i(t[e])?(t[e].forEach((function(t){return t.apply(n,r)})),n):n},n.off=function(e,r){if(!i(e))return t={},n;if(i(t[e]))if(i(r)){for(var o=0,u=t[e].length;o<u;++o)if(r===t[e][o]){t[e].splice(o,1);break}0===j&&delete t[e]}else delete t[e];return n},n.on=function(e,r){return i(t[e])||(t[e]=[]),i(r)&&t[e].push(r),n},n}var X=function(n){return O(n)?[n.innerWidth,n.innerHeight]:[n.offsetWidth,n.offsetHeight]},Y=function(n,t){return n.scrollLeft=t[0],n.scrollTop=t[1],n};function $(n,e={}){if(!n)return;const r=this;if(!t(r,$))return new $(n,e);if(n.OP)return;let{fire:i,hooks:o}=V(r);var u;function f(){let t=n.value;return""!==t?t:null}function c(t){n.value=t}r.state=e=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return Object.assign.apply(Object,[{}].concat(t))}($.state,e),r.option=null,r.options={},r.source=n,r.value=n.value,$.instances[n.id||n.name||(u=$.instances,l(s(u)))]=r,n.OP=1;let p=e.class,L=N(n,{class:p+"-source",tabindex:-1}),E=b(L);L.multiple;let j=0,C=L.options,P=L.size,S=L.title,U=f(),q=e.parent||h,G=N("div",{class:p,tabindex:0,title:S}),K=N("b","‌"),Q=N("div",{tabindex:-1}),Z=[];var nn,tn;function en(n){on()}function rn(n){G.focus()}function on(){let n=Z.find((n=>U===n._value));n&&z("click",n)}function un(n){let t=U;U=this._value,r.option=U,F(K,k(this)),Z.forEach((n=>{I(n,"active",U===n._value)})),n.isTrusted&&G.focus(),U!==t&&(c(U),z("input",L),z("change",L)),M(n)}function fn(n){T(this,"focus")}function cn(n){P?H(G,"open"):(I(G,"open"),w(G,"open")&&vn(G))}function ln(){H(this,"focus")}function an(n){let t=n.key,e=L.selectedIndex,r=Z[e],i=w(G,"open");if("ArrowDown"===t){for(;(r=Z[++e])&&w(r,"dead"););r&&(z("click",r),I(G,i)),M(n)}else if("ArrowUp"===t){for(;(r=Z[--e])&&w(r,"dead"););r&&(z("click",r),I(G,i)),M(n)}else if("End"===t){for(e=l(C);(r=Z[--e])&&w(r,"dead"););r&&(z("click",r),I(G,i)),M(n)}else if("Enter"===t)I(G,"open"),M(n);else if("Escape"===t)!P&&T(G,"open");else if("Home"===t){for(e=0;(r=Z[++e])&&w(seletBoxFakeOption,"dead"););r&&(z("click",r),I(G,i)),M(n)}else"Tab"===t&&(r&&z("click",r),!P&&T(G,"open"));w(G,"open")&&vn(G)}function sn(){}function dn(n){let t=n.target;if(t!==G)for(;(t=m(t))&&G!==t;);G!==t&&T(G,"open")}function pn(n,t){if("optgroup"===function(n){return(n&&n.nodeName||"").toLowerCase()||null}(n)){let e=N("span"),r=b(n);e.title=n.label;for(let n=0,t=l(r);n<t;++n)pn(r[n],e);return void _(t,e)}let e=function(n,t,e){if(void 0===e&&(e=!0),!x(n,t))return null;var r=n.getAttribute(t);return e?d(r):r}(n,"value",!1),i=k(n),o=N("a",i,{tabindex:-1,title:i});e=e||i,o._index=j,o._value=e,function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?B(n,r,e):A(n,r)}(o,{index:j,value:e}),r.options[e]=i,n.disabled?H(o,"dead"):R("click",o,un),_(t,o),Z.push(o),e===U&&(H(o,"active"),F(K,i),c(U),r.option=U),++j}function vn(n){let t=a(y(n,"border-top-width")),e=a(y(n,"border-bottom-width"));if(!P){let[r,i,o,u]=function(n){var t,e,r,i,o,u,f;return O(n)?(i=n.pageXOffset||g.scrollLeft||h.scrollLeft,o=n.pageYOffset||g.scrollTop||h.scrollTop,r=n.innerWidth,t=n.innerHeight):(i=(e=n.getBoundingClientRect()).left,o=e.top,r=e.width,t=e.height,u=e.right,f=e.bottom),[i,o,r,t,u,f]}(n),f=X(v)[1],c=f-i-u;D(Q,{bottom:"",left:r,"max-height":c,top:i+u-t,width:o}),c<(f-u)/2?(c=i,D(Q,{top:"",bottom:f-i-e,"max-height":c+t}),H(Q,"up")):T(Q,"up")}let r=Z.find((n=>w(n,"active")));if(r){let n=X(r)[1],t=X(Q)[1],[e,i]=function(n){return[n.offsetLeft,n.offsetTop]}(r),o=function(n){return[n.scrollLeft,n.scrollTop]}(Q)[1];i<o?Y(Q,[e,i]):i+n-t>o&&Y(Q,[e,i+n-t])}}_(G,K),tn=G,m(nn=L).insertBefore(tn,function(n){return n.nextElementSibling||null}(nn)),L.disabled?H(G,"dead"):(R("click",q,dn),R("focus",L,rn),R("change",L,en),R("input",L,on),R("blur",G,fn),R("click",G,cn),R("focus",G,ln),R("keydown",G,an),R("keyup",G,sn));let hn=l(E);if(hn){_(G,Q);for(let n=0;n<hn;++n)pn(E[n],Q);if(P){let n=Z[0],t=X(n)[1]*P;W(Q,"max-height",t)}}return P&&H(G,"open"),r.get=()=>f(),r.pop=()=>n.OP?(delete n.OP,J("click",q,dn),J("change",L,en),J("focus",L,rn),J("input",L,on),T(L,p+"-source"),J("blur",G,fn),J("click",G,cn),J("focus",G,ln),J("keydown",G,an),J("keyup",G,sn),letText(G),function(n){var t=m(n);n.remove()}(G),i("pop",[f()])):r,r.set=t=>(c(t),z(n,"input"),z(n,"change"),r),r.self=G,r}return $.instances={},$.state={class:"option-picker",parent:null},$.version="1.0.0",$}));