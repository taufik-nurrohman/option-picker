/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).OP=t()}(this,(function(){"use strict";var n=function(n,t){return-1!==t.indexOf(n)},t=function(n){return Array.isArray(n)},e=function(n,t){return n&&o(t)&&n instanceof t},r=function(n){return"number"==typeof n},i=function(n,t){return void 0===t&&(t=!0),"object"==typeof n&&(!t||e(n,Object))},o=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},u=function(n){return"string"==typeof n},f=function(n){return n.replace(/[-_.](\w)/g,(function(n,t){return c(t)}))},l=function(n){return n.toLowerCase()},c=function(n){return n.toUpperCase()},s=function(n){return n.length},a=function(n,t){return void 0===t&&(t=10),t?parseInt(n,t):parseFloat(n)},d=function(n){return Object.keys(n)},p=function n(e){if(t(e))return e.map((function(t){return n(t)}));if(function(n){return/^-?(?:\d*.)?\d+$/.test(n+"")}(e))return a(e);if(i(e)){for(var r in e)e[r]=n(e[r]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},v=function e(){for(var r=arguments.length,u=Array(r),f=0;f<r;f++)u[f]=arguments[f];for(var l=u.shift(),c=0,a=s(u);c<a;++c)for(var d in u[c])if(o(l[d]))if(t(l[d])&&t(u[c][d])){l[d]=[].concat(l[d]);for(var p=0,v=s(u[c][d]);p<v;++p)n(u[c][d][p],l[d])||l[d].push(u[c][d][p])}else i(l[d])&&i(u[c][d])?l[d]=e({},l[d],u[c][d]):l[d]=u[c][d];else l[d]=u[c][d];return l},h=function n(e){if(t(e))return e.map((function(t){return n(e)}));if(i(e)){for(var r in e)e[r]=n(e[r]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},b=document,g=window,m=b.body,y=b.documentElement,w=function(n,t){var e=n.children;return r(t)?e[t]||null:e||[]},k=function(n,t){void 0===t&&(t=!0);var e=(O(n,"className")||"").trim();return t?e.split(/\s+/):e},x=function(n){return l(n&&n.nodeName||"")||null},E=function(n,t){return t?n.closest(t)||null:n.parentNode||null},L=function(n,t,e){void 0===e&&(e=!0);var r=g.getComputedStyle(n).getPropertyValue(t);return e&&(r=p(r)),r||""===r||0===r?r:null},O=function(n,t){return C(n,t)&&n[t]||null},T=function(n,t){void 0===t&&(t=!0);var e="textContent";if(!C(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},A=function(n,t){return n.hasAttribute(t)},$=function(n,t){return n.classList.contains(t)},C=function(n,t){return t in n},P=function(n){return n===g},z=function(n,t){return n.removeAttribute(t),n},H=function(n,t){return n.classList.remove(t),n},N=function(n,t){return z(n,"data-"+t)},R=function(n,t){return n.style[f(t)]=null,n},S=function(n,t,e){return!0===e&&(e=t),n.setAttribute(t,h(e)),n},I=function(n,t){return n.append(t),t},W=function(n,t){return n.classList.add(t),n},_=function(n,e,r){return(t(r)||i(r))&&(r=JSON.stringify(r)),S(n,"data-"+e,r)},B=function(n,t,e){return n=u(n)?b.createElement(n):n,i(t)&&(e=t,t=!1),u(t)&&D(n,t),i(e)&&function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?S(n,r,e):z(n,r)}(n,e),n},D=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="innerHTML";return C(n,r)&&(n[r]=e?t.trim():t),n},K=function(n,t,e){return r(e)&&(e+="px"),n.style[f(t)]=h(e),n},U=function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?K(n,r,e):R(n,r);return n},F=function(n,t,e){return n.classList.toggle(t,e),n},J=function(n){return P(n)?[n.innerWidth,n.innerHeight]:[n.offsetWidth,n.offsetHeight]},M=function(n,t){return n.scrollLeft=t[0],n.scrollTop=t[1],n};function V(n){var t={};return n.hooks=t,n.fire=function(e,r){return o(t[e])?(t[e].forEach((function(t){return t.apply(n,r)})),n):n},n.off=function(e,r){if(!o(e))return t={},n;if(o(t[e]))if(o(r)){for(var i=0,u=t[e].length;i<u;++i)if(r===t[e][i]){t[e].splice(i,1);break}0===j&&delete t[e]}else delete t[e];return n},n.on=function(e,r){return o(t[e])||(t[e]=[]),o(r)&&t[e].push(r),n},n}var X=function(n,t,e){t.removeEventListener(n,e)},Y=function(n){return n&&n.preventDefault()},q=function(n,t,e,r){void 0===r&&(r=!1),t.addEventListener(n,e,r)};const G="Enter";function Q(r,i={}){const o=this;if(!r)return o;if(r.OP)return r.OP;if(!e(o,Q))return new Q(r,i);let{fire:u,hooks:f}=V(o);var c;function O(){return[p(j()),o.options]}function j(){if(yn){let n=[];for(let t=0,e=s(kn);t<e;++t)Z(kn[t])&&n.push(R(kn[t]));return n}let n=r.value;return""!==n?n:null}function R(n){let t=n.value||T(n);return""!==t?t:null}function Z(n){return A(n,"selected")}function nn(n){z(n,"selected"),n.selected=!1}function tn(n){H(n,an+"selected")}function en(n){S(n,"selected",!0),n.selected=!0}function rn(n){W(n,an+"selected")}function on(n){n=n||"‌",An.title=n.replace(/<.*?>/g,""),D(An,n)}function un(n){if(yn){let n,e=function(n){return t(n)?n:[n]}(n);for(let t=0,r=s(kn);t<r;++t)n=R(kn[t]),e.includes(p(n))?en(kn[t]):nn(kn[t])}else r.value=n}o.state=i=v({},Q.state,i),o.options={},o.source=r,Q.instances[r.id||r.name||(c=Q.instances,s(d(c)))]=o,r.OP=o;let fn=i.class,ln=fn+"__",cn=fn+"--",sn=ln+"option",an=sn+"--",dn=ln+"options",pn=ln+"value",vn=ln+"values",hn=B(r,{class:ln+"source",tabindex:-1}),bn="input"===x(hn),gn=()=>hn.disabled,mn=w(hn),yn=hn.multiple,wn=0,kn=hn.options,xn=i.parent||b,En=hn.size,Ln=hn.title,On=j(),Tn=B("div",{class:fn,tabindex:!bn&&!gn()&&0,title:Ln}),An=B("div",bn?"":"‌",{class:vn,contenteditable:!!bn&&"",tabindex:!!bn&&0}),$n=0,jn=0,Cn=B("div",{class:dn,tabindex:-1}),Pn=[],zn=!1,Hn=!1,Nn=hn.list;var Rn,Sn;function In(){H(Tn,cn+"focus"),u("blur",O())}function Wn(){W(Tn,cn+"focus"),u("focus",O())}function _n(){W(Tn,cn+"open"),u("enter",O())}function Bn(){yn||En||(H(Tn,cn+"open"),u("exit",O()))}function Dn(n){F(Tn,cn+"open",n);let t=Un();return u(t?"enter":"exit",O()),t}function Kn(n,t,e,r){return'<span class="'+pn+" "+r+'" data-index="'+e+'"'+(t?' data-value="'+t+'"':"")+">"+n+"</span>"}function Un(){return $(Tn,cn+"open")}function Fn(){(bn?An:Tn).focus()}function Jn(n){if(gn())return;let t=this,e=t.$,r=On;wn=t.i,On=t.v;let o,f,l,c=[];if(n&&n.isTrusted&&Fn(),Y(n),yn&&(zn||Hn)){!function(n){return $(n,an+"selected")}(t)?(en(e),rn(t)):(nn(e),tn(t));for(let n=0,t=s(kn);n<t;++n)Z(kn[n])&&(o=T(Pn[n]),f=Pn[n].i,l=Pn[n].v,o=Kn(o,l,f,k(Pn[n],!1)),c.push(o));return on(c.join("<span>"+i.join+"</span>")),void u("change",O())}o=T(t),bn&&un(o),f=t.i,l=t.v,o=Kn(o,l,f,k(t,!1)),on(o),bn&&function(n){let t=b.createRange();t.selectNodeContents(n);let e=g.getSelection();e.removeAllRanges(),e.addRange(t)}(An),Pn.forEach((n=>{On===n.v?(en(n.$),rn(n)):(nn(n.$),tn(n))})),On!==r&&u("change",O())}function Mn(n){In()}function Vn(n){if(!gn()){if(wn=hn.selectedIndex,En)return _n();bn?An.focus():($n=a(L(Tn,"border-bottom-width")),jn=a(L(Tn,"border-top-width")),Dn()&&lt(Tn))}}function Xn(n){wn=hn.selectedIndex,Wn()}function Yn(n){zn=n.ctrlKey,Hn=n.shiftKey;let t=n.key,e=wn,r=Pn[e],i=n=>$(n,an+"disabled"),o=n=>Jn.call(n),u=Un();if("ArrowDown"===t){for(;(r=Pn[++e])&&(i(r)||r.hidden););r&&(o(r),Dn(u)),yn&&Hn&&(r=Pn[wn-1])&&(en(r.$),rn(r)),Y(n)}else if("ArrowUp"===t){for(;(r=Pn[--e])&&(i(r)||r.hidden););r&&(o(r),Dn(u)),yn&&Hn&&(r=Pn[wn+1])&&(en(r.$),rn(r)),Y(n)}else if("End"===t){for(e=s(kn);(r=Pn[--e])&&(i(r)||r.hidden););r&&(o(r),Dn(u)),Y(n)}else if(G===t)r&&o(r),Dn(),Y(n);else if("Escape"===t)!En&&Bn();else if("Home"===t){for(e=-1;(r=Pn[++e])&&(i(r)||r.hidden););r&&(o(r),Dn(u)),Y(n)}else"Tab"===t&&(r&&o(r),!En&&Bn());!Un()||zn||Hn||($n=a(L(Tn,"border-bottom-width")),jn=a(L(Tn,"border-top-width")),lt(Tn))}function qn(){zn=Hn=!1}function Gn(){In()}function Qn(){let n,t,e=T(this);wn=-1;for(let r=0,i=s(kn);r<i;++r)n=kn[r],t=Pn[r],e===T(n)?(wn=r,en(n),rn(t)):(nn(n),tn(t));Wn(),$n=a(L(Tn,"border-bottom-width")),jn=a(L(Tn,"border-top-width")),Dn()&&lt(Tn)}function Zn(n){Yn(n)}bn&&Nn&&(mn=w(Nn),kn=Nn.options,En=null),yn&&!En&&(hn.size=En=i.size),I(Tn,An),Sn=Tn,E(Rn=hn).insertBefore(Sn,function(n){return n.nextElementSibling||null}(Rn));let nt=(tt=(n,t)=>{if(null===n)for(let n=0,t=s(Pn);n<t;++n)Pn[n].hidden=!1;else if(t){let t;n=l(n);for(let e,r=0,i=s(Pn);r<i;++r)nn(Pn[r].$),tn(Pn[r]),e=T(Pn[r]),e&&l(e).includes(n)?!t&&(t=Pn[r]):Pn[r].hidden=!0;t&&(wn=t.i,en(t.$),rn(t))}},et=10,function(){var n=arguments,t=this;rt&&clearTimeout(rt),rt=setTimeout((function(){return tt.apply(t,n)}),et)});var tt,et,rt;function it(n){qn();let t=n.key,e=t&&1===s(t),r=T(An);G!==t&&_n(),nt(r,e)}function ot(n){let t=n.target;if(t!==Tn)for(;(t=E(t))&&Tn!==t;);Tn!==t&&Bn()}function ut(){Un()&&lt(Tn,1)}function ft(e,r){if("optgroup"===x(e)){let n=B("span",{class:sn+"-group"+(e.disabled?" "+an+"disabled":"")}),t=w(e);n.title=e.label;for(let e=0,r=s(t);e<r;++e)ft(t[e],n);return void I(r,n)}let i=function(n,t,e){if(void 0===e&&(e=!0),!A(n,t))return null;var r=n.getAttribute(t);return e?p(r):r}(e,"value",!1),u=i,f=T(e),l=e.title,c=B("a",f,{class:sn,title:l||f});i=i||f,c.i=wn,c.$=e,c.v=i,function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?_(n,r,e):N(n,r)}(c,{index:wn,value:u}),o.options[i]=f;let a=e.disabled;a?W(c,an+"disabled"):q("click",c,Jn),I(r,c),Pn.push(c),""===u&&(i=null),t(On)&&n(i,On)||i===On?(W(c,an+"selected"),on(Kn(f,u,wn,sn+" "+(a?" "+an+"disabled":""))),en(e)):nn(e),++wn}function lt(n,t){if(!En){let[t,e,r,i]=function(n){var t,e,r,i,o,u,f;return P(n)?(i=n.pageXOffset||y.scrollLeft||m.scrollLeft,o=n.pageYOffset||y.scrollTop||m.scrollTop,r=n.innerWidth,t=n.innerHeight):(i=(e=n.getBoundingClientRect()).left,o=e.top,r=e.width,t=e.height,u=e.right,f=e.bottom),[i,o,r,t,u,f]}(n),o=J(g)[1],u=o-e-i;U(Cn,{bottom:"",left:t,"max-height":u,top:e+i-jn,width:r}),u<(o-i)/2?(u=e,U(Cn,{top:"",bottom:o-e-$n,"max-height":u+jn}),H(n,cn+"down"),W(n,cn+"up")):(H(n,cn+"up"),W(n,cn+"down"))}if(!t){let n=Pn.find((n=>$(n,an+"selected")));if(n){let t=J(n)[1],e=J(Cn)[1],[r,i]=function(n){return[n.offsetLeft,n.offsetTop]}(n),o=function(n){return[n.scrollLeft,n.scrollTop]}(Cn)[1];i<o?M(Cn,[r,i]):i+t-e>o&&M(Cn,[r,i+t-e])}}u("fit",O())}!function(n,t,e,r){void 0===r&&(r=!1),n.forEach((function(n){return q(n,t,e,r)}))}(["resize","scroll"],g,ut),q("click",xn,ot),q("focus",hn,Fn),q("click",Tn,Vn),bn?(q("blur",An,Gn),q("focus",An,Qn),q("keydown",An,Zn),q("keyup",An,it)):(q("blur",Tn,Mn),q("focus",Tn,Xn),q("keydown",Tn,Yn),q("keyup",Tn,qn));let ct=s(mn);if(ct){I(Tn,Cn);for(let n=0;n<ct;++n)ft(mn[n],Cn);if(En){let n=Pn[0],t=J(n)[1]*En;K(Cn,"max-height",t)}}return En&&(W(Tn,cn+"down"),W(Tn,cn+"open")),o.get=(n=!0)=>{let t=j();return n?p(t):t},o.pop=()=>r.OP?(delete r.OP,function(n,t,e){n.forEach((function(n){return X(n,t,e)}))}(["resize","scroll"],g,ut),X("click",xn,ot),X("focus",hn,Fn),H(hn,ln+"source"),X("click",Tn,Vn),bn?(X("blur",An,Gn),X("focus",An,Qn),X("keydown",An,Zn),X("keyup",An,it)):(X("blur",Tn,Mn),X("focus",Tn,Xn),X("keydown",Tn,Yn),X("keyup",Tn,qn)),function(n){var t="textContent";C(n,t)&&(n[t]="")}(Tn),function(n){var t=E(n);n.remove()}(Tn),u("pop",O())):o,o.set=n=>(un(h(n)),Pn.forEach(((n,t)=>{let e=kn[t];F(n,an+"selected",e&&Z(e))})),u("change",O()),o),o.self=Tn,o}return Q.instances={},Q.state={class:"option-picker",join:", ",parent:null,size:5},Q.version="1.3.0",Q}));