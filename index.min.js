/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2024 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).OptionPicker=t()}(this,(function(){"use strict";var n=function(n){return Array.isArray(n)},t=function(n){return"function"==typeof n},e=function(n,t){return n&&i(t)&&n instanceof t},r=function(n,t){return void 0===t&&(t=!0),"object"==typeof n&&(!t||e(n,Object))},i=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},u=function(n){return"string"==typeof n},o=function(n){return n.length},f=function t(e){if(n(e))return e.map((function(n){return t(n)}));if(function(n){return/^-?(?:\d*.)?\d+$/.test(n+"")}(e))return function(n,t){return void 0===t&&(t=10),t?parseInt(n,t):parseFloat(n)}(e);if(r(e)){for(var i in e)e[i]=t(e[i]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},a=function t(){for(var e=arguments.length,u=Array(e),f=0;f<e;f++)u[f]=arguments[f];for(var a,l=u.shift(),c=0,s=o(u);c<s;++c)for(var v in u[c])if(i(l[v]))if(n(l[v])&&n(u[c][v])){l[v]=[].concat(l[v]);for(var h=0,d=o(u[c][v]);h<d;++h)a=u[c][v][h],-1===l[v].indexOf(a)&&l[v].push(u[c][v][h])}else r(l[v])&&r(u[c][v])?l[v]=t({},l[v],u[c][v]):l[v]=u[c][v];else l[v]=u[c][v];return l},l=function t(e){if(n(e))return e.map((function(n){return t(e)}));if(r(e)){for(var i in e)e[i]=t(e[i]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},c=document,s=function(n,t){return t?n.closest(t)||null:n.parentNode||null},v=function(n){var t="form";return d(n,t)&&t===function(n){return(n&&n.nodeName||"").toLowerCase()||null}(n[t])?n[t]:s(n,t)},h=function(n,t){return n.hasAttribute(t)},d=function(n,t){return t in n},p=function(n,t){return n.removeAttribute(t),n},m=function(n,t,e){return!0===e&&(e=t),n.setAttribute(t,l(e)),n},b=function(n,t,e){return n=u(n)?c.createElement(n):n,r(t)&&(e=t,t=!1),u(t)&&_(n,t),r(e)&&function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?m(n,r,e):p(n,r)}(n,e),n},_=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="innerHTML";return d(n,r)&&(n[r]=e?t.trim():t),n};var y=function(n,t,e){t.removeEventListener(n,e)},k=function(n,t,e,r){void 0===r&&(r=!1),t.addEventListener(n,e,r)},g="OptionPicker";function w(n,t,e){Object.defineProperty(n,t,e)}function x(n){return(n.value||function(n,t,e){if(void 0===e&&(e=!0),!h(n,t))return null;var r=n.getAttribute(t);return e?f(r):r}(n,"value",!1)||"").replace(/\r/g,"")}function A(n){return n.disabled}function L(n,t){var r=this;return n?e(r,L)?(n["_"+g]=function(n,t){return(t=t||n).fire=function(n,t){var e=this,r=e.hooks;return i(r[n])?(r[n].forEach((function(n){return n.apply(e,t)})),e):e},t.off=function(n,t){var e=this,r=e.hooks;if(!i(n))return r={},e;if(i(r[n]))if(i(t)){var u=r[n].length;if(0===u)delete r[n];else for(var o=0;o<u;++o)if(t===r[n][o]){r[n].splice(o,1);break}}else delete r[n];return e},t.on=function(n,t){var e=this.hooks;return i(e[n])||(e[n]=[]),i(t)&&e[n].push(t),this},n.hooks={},n}(r,L.prototype),r.attach(n,a({},L.state,t||{}))):new L(n,t):r}L.state={n:"option-picker",options:null,with:[]},L.version="2.0.0",w(L,"name",{value:g});var O=L.prototype;function j(n){this["_"+g].let().fire("reset",[n])}function E(n){return this["_"+g].fire("submit",[n])}return w(O,"value",{get:function(){var n=this.self.value;return""===n?null:n},set:function(n){this.fire("change")}}),O.attach=function(e,f){var a=this;e=e||a.self,f=f||a.state,a._active=!A(e)&&!function(n){return n.readOnly}(e),a._options={},a._value=x(e),a.self=e,a.state=f;var l,c,h=f.n,d=v(e),p=b("div",{class:h,tabindex:!A(e)&&-1});a.mask=p,function(n,t){n.classList.add(t)}(e,h+"__self"),c=p,s(l=e).insertBefore(c,function(n,t){return n.nextSibling||null}(l)),d&&(d["_"+g]=a,k("reset",d,j),k("submit",d,E)),e.tabIndex=-1,p["_"+g]=a;var m={hint:null,input:null};if(m.of=e,m.options=null,m.self=p,m.text=null,a._mask=m,i(f)&&n(f.with))for(var _=0,y=o(f.with);_<y;++_){var w=f.with[_];u(w)&&(w=L[w]),t(w)?w.call(a,e,f):r(w)&&t(w.attach)&&w.attach.call(a,e,f)}return a},O.blur=function(){},O.detach=function(){var e=this;e._mask;var i,f=e.mask,a=e.self,l=e.state,c=v(a);if(e._active=!1,c&&(y("reset",c,j),y("submit",c,E)),n(l.with))for(var h=0,d=o(l.with);h<d;++h){var p=l.with[h];u(p)&&(p=L[p]),r(p)&&t(p.detach)&&p.detach.call(e,a,l)}return a.tabIndex=null,function(n,t){n.classList.remove(t)}(a,l.n+"__self"),s(i=f),i.remove(),e._mask={of:a},e.mask=null,e},O.focus=function(){},L}));