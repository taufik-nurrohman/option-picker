/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).OP=n()}(this,(function(){"use strict";var t=function(t){return Array.isArray(t)},n=function(t,n){return t&&i(n)&&t instanceof n},e=function(t){return"number"==typeof t},r=function(t,e){return void 0===e&&(e=!0),"object"==typeof t&&(!e||n(t,Object))},i=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},u=function(t){return"string"==typeof t},o=function n(e){if(t(e))return e.map((function(t){return n(e)}));if(r(e)){for(var i in e)e[i]=n(e[i]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},f=function(t){return t.replace(/[-_.](\w)/g,(function(t,n){return c(n)}))},c=function(t){return t.toUpperCase()},l=function(t){return t.length},s=function(t,n){return void 0===n&&(n=10),n?parseInt(t,n):parseFloat(t)},a=function(t){return Object.keys(t)},d=function n(e){if(t(e))return e.map((function(t){return n(t)}));if(function(t){return/^-?(?:\d*.)?\d+$/.test(t+"")}(e))return s(e);if(r(e)){for(var i in e)e[i]=n(e[i]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},p=document,v=window,h=p.body,m=p.documentElement,g=function(t,n){var r=t.children;return e(n)?r[n]||null:r||[]},b=function(t){return t.parentNode||null},y=function(t,n,e){void 0===e&&(e=!0);var r=v.getComputedStyle(t).getPropertyValue(n);return e&&(r=d(r)),r||""===r||0===r?r:null},k=function(t,n){void 0===n&&(n=!0);var e="textContent";if(!E(t,e))return!1;var r=t[e];return""!==(r=n?r.trim():r)?r:null},x=function(t,n){return t.hasAttribute(n)},w=function(t,n){return t.classList.contains(n)},E=function(t,n){return n in t},L=function(t){return t===v},O=function(t,n){return t.removeAttribute(n),t},T=function(t,n){return t.classList.remove(n),t},A=function(t,n){return O(t,"data-"+n)},_=function(t,n){return t.style[f(n)]=null,t},C=function(t,n,e){return!0===e&&(e=n),t.setAttribute(n,o(e)),t},P=function(t,n){return t.append(n),n},H=function(t,n){return t.classList.add(n),t},N=function(n,e,i){return(t(i)||r(i))&&(i=JSON.stringify(i)),C(n,"data-"+e,i)},S=function(t,n,e){return t=u(t)?p.createElement(t):t,r(n)&&(e=n,n=!1),u(n)&&W(t,n),r(e)&&function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?C(t,r,e):O(t,r)}(t,e),t},W=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="innerHTML";return E(t,r)&&(t[r]=e?n.trim():n),t},B=function(t,n,r){return e(r)&&(r+="px"),t.style[f(n)]=o(r),t},D=function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?B(t,r,e):_(t,r);return t},I=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="textContent";return E(t,r)&&(t[r]=e?n.trim():n),t},K=function(t,n,e){return t.classList.toggle(n,e),t},U={},z=function(t,n,e,r){n.dispatchEvent(function(t,n,e){return e&&i(U[t])?U[t]:U[t]=new Event(t,n)}(t,e,r))},F=function(t,n,e,r){t.forEach((function(t){return z(t,n,e,r)}))},J=function(t,n,e){n.removeEventListener(t,e)},M=function(t){return t&&t.preventDefault()},R=function(t,n,e,r){void 0===r&&(r=!1),n.addEventListener(t,e,r)};function V(t){var n={};return t.hooks=n,t.fire=function(e,r){return i(n[e])?(n[e].forEach((function(n){return n.apply(t,r)})),t):t},t.off=function(e,r){if(!i(e))return n={},t;if(i(n[e]))if(i(r)){for(var u=0,o=n[e].length;u<o;++u)if(r===n[e][u]){n[e].splice(u,1);break}0===j&&delete n[e]}else delete n[e];return t},t.on=function(e,r){return i(n[e])||(n[e]=[]),i(r)&&n[e].push(r),t},t}var X=function(t){return L(t)?[t.innerWidth,t.innerHeight]:[t.offsetWidth,t.offsetHeight]},Y=function(t,n){return t.scrollLeft=n[0],t.scrollTop=n[1],t};function $(t,e={}){if(!t)return;const r=this;if(!n(r,$))return new $(t,e);if(t.OP)return;let{fire:i,hooks:f}=V(r);var c;function p(){let t=E();return[u(t)?d(t):t,r.options]}function E(){let n=t.value;return""!==n?n:null}function j(n){t.value=n}r.state=e=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return Object.assign.apply(Object,[{}].concat(n))}($.state,e),r.options={},r.source=t,r.value=t.value,$.instances[t.id||t.name||(c=$.instances,l(a(c)))]=r,t.OP=1;let _=e.class,W=S(t,{class:_+"-source",tabindex:-1}),U=g(W),q=W.multiple,G=0,Q=W.options,Z=e.parent||h,tt=W.size,nt=W.title,et=E(),rt=S("div",{class:_,tabindex:0,title:nt}),it=S("b","‌"),ut=S("div",{tabindex:-1}),ot=[];var ft,ct;function lt(){q||tt||(T(rt,"open"),i("exit",p()))}function st(t){K(rt,"open",t);let n=at();return i(n?"enter":"exit",p()),n}function at(){return w(rt,"open")}function dt(t){vt()}function pt(t){rt.focus()}function vt(){let t=ot.find((t=>et===t._value));t&&z("click",t)}function ht(t){let n=this,e=n._item,r=et;et=n._value;let u=x(e,"selected")?[k(e)]:[];if(t.isTrusted&&rt.focus(),M(t),w(rt,"mode-c")){K(n,"active"),w(n,"active")?C(e,"selected",!0):O(e,"selected");for(let t=0,n=l(Q);t<n;++t)x(Q[t],"selected")&&u.push(k(ot[t]));I(it,u.join(", "))}else I(it,k(n)),ot.forEach((t=>{K(t,"active",et===t._value)})),et!==r&&(j(et),F(["input","change"],W),i("change",p()))}function mt(t){T(rt,"focus"),i("blur",p())}function gt(t){if(tt)return H(rt,"open"),void i("enter",p());st()&&Et(rt)}function bt(t){H(rt,"focus"),i("focus",p())}function yt(t){let n=t.key,e=W.selectedIndex,r=ot[e],i=t=>w(t,"dead"),u=at();if(q&&(K(rt,"mode-c",t.ctrlKey),K(rt,"mode-s",t.shiftKey)),"ArrowDown"===n){for(;(r=ot[++e])&&i(r););r&&(z("click",r),st(u)),M(t)}else if("ArrowUp"===n){for(;(r=ot[--e])&&i(r););r&&(z("click",r),st(u)),M(t)}else if("End"===n){for(e=l(Q);(r=ot[--e])&&i(r););r&&(z("click",r),st(u)),M(t)}else if("Enter"===n)st(),M(t);else if("Escape"===n)!tt&&lt();else if("Home"===n){for(e=0;(r=ot[++e])&&i(r););r&&(z("click",r),st(u)),M(t)}else"Tab"===n&&(r&&z("click",r),!tt&&lt());u&&Et(rt)}function kt(t){q&&(T(rt,"mode-c"),T(rt,"mode-s"))}function xt(t){let n=t.target;if(n!==rt)for(;(n=b(n))&&rt!==n;);rt!==n&&lt()}function wt(t,n){if("optgroup"===function(t){return(t&&t.nodeName||"").toLowerCase()||null}(t)){let e=S("span"),r=g(t);e.title=t.label;for(let t=0,n=l(r);t<n;++t)wt(r[t],e);return void P(n,e)}let e=function(t,n,e){if(void 0===e&&(e=!0),!x(t,n))return null;var r=t.getAttribute(n);return e?d(r):r}(t,"value",!1),i=k(t),u=S("a",i,{title:i});e=e||i,u._index=G,u._item=t,u._value=e,function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?N(t,r,e):A(t,r)}(u,{index:G,value:e}),r.options[e]=i,t.disabled?H(u,"dead"):R("click",u,ht),P(n,u),ot.push(u),e===et&&(H(u,"active"),I(it,i),j(et),r.option=et),++G}function Et(t){let n=s(y(t,"border-top-width")),e=s(y(t,"border-bottom-width"));if(!tt){let[r,i,u,o]=function(t){var n,e,r,i,u,o,f;return L(t)?(i=t.pageXOffset||m.scrollLeft||h.scrollLeft,u=t.pageYOffset||m.scrollTop||h.scrollTop,r=t.innerWidth,n=t.innerHeight):(i=(e=t.getBoundingClientRect()).left,u=e.top,r=e.width,n=e.height,o=e.right,f=e.bottom),[i,u,r,n,o,f]}(t),f=X(v)[1],c=f-i-o;D(ut,{bottom:"",left:r,"max-height":c,top:i+o-n,width:u}),c<(f-o)/2?(c=i,D(ut,{top:"",bottom:f-i-e,"max-height":c+n}),H(ut,"up")):T(ut,"up")}let r=ot.find((t=>w(t,"active")));if(r){let t=X(r)[1],n=X(ut)[1],[e,i]=function(t){return[t.offsetLeft,t.offsetTop]}(r),u=function(t){return[t.scrollLeft,t.scrollTop]}(ut)[1];i<u?Y(ut,[e,i]):i+t-n>u&&Y(ut,[e,i+t-n])}i("fit",p())}P(rt,it),ct=rt,b(ft=W).insertBefore(ct,function(t){return t.nextElementSibling||null}(ft)),W.disabled?H(rt,"dead"):(R("click",Z,xt),R("focus",W,pt),R("change",W,dt),R("input",W,vt),R("blur",rt,mt),R("click",rt,gt),R("focus",rt,bt),R("keydown",rt,yt),R("keyup",rt,kt));let Lt=l(U);if(Lt){P(rt,ut);for(let t=0;t<Lt;++t)wt(U[t],ut);if(tt){let t=ot[0],n=X(t)[1]*tt;B(ut,"max-height",n)}}return tt&&H(rt,"open"),r.get=(t=!0)=>{let n=E();return t?d(n):n},r.pop=()=>t.OP?(delete t.OP,J("click",Z,xt),J("change",W,dt),J("focus",W,pt),J("input",W,vt),T(W,_+"-source"),J("blur",rt,mt),J("click",rt,gt),J("focus",rt,bt),J("keydown",rt,yt),J("keyup",rt,kt),letText(rt),function(t){var n=b(t);t.remove()}(rt),i("pop",p())):r,r.set=n=>(j(o(n)),F(["input","change"],t),i("change",p()),r),r.self=rt,r}return $.instances={},$.state={class:"option-picker",parent:null},$.version="1.0.0",$}));