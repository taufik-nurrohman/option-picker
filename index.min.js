/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2022 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).OP=t()}(this,(function(){"use strict";var n=function(n,t){return-1!==t.indexOf(n)},t=function(n){return Array.isArray(n)},e=function(n,t){return n&&u(t)&&n instanceof t},r=function(n){return"number"==typeof n},i=function(n,t){return void 0===t&&(t=!0),"object"==typeof n&&(!t||e(n,Object))},u=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},o=function(n){return"string"==typeof n},f=function(n){return n.replace(/[-_.](\w)/g,(function(n,t){return c(t)}))},l=function(n){return n.toLowerCase()},c=function(n){return n.toUpperCase()},s=function(n){return n.length},a=function(n,t){return void 0===t&&(t=10),t?parseInt(n,t):parseFloat(n)},d=function(n){return Object.keys(n)},p=function n(e){if(t(e))return e.map((function(t){return n(t)}));if(function(n){return/^-?(?:\d*.)?\d+$/.test(n+"")}(e))return a(e);if(i(e)){for(var r in e)e[r]=n(e[r]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},v=function e(){for(var r=arguments.length,o=Array(r),f=0;f<r;f++)o[f]=arguments[f];for(var l=o.shift(),c=0,a=s(o);c<a;++c)for(var d in o[c])if(u(l[d]))if(t(l[d])&&t(o[c][d])){l[d]=[].concat(l[d]);for(var p=0,v=s(o[c][d]);p<v;++p)n(o[c][d][p],l[d])||l[d].push(o[c][d][p])}else i(l[d])&&i(o[c][d])?l[d]=e({},l[d],o[c][d]):l[d]=o[c][d];else l[d]=o[c][d];return l},h=function n(e){if(t(e))return e.map((function(t){return n(e)}));if(i(e)){for(var r in e)e[r]=n(e[r]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},g=document,b=window,m=g.body,y=g.documentElement,k=function(n,t){var e=n.children;return r(t)?e[t]||null:e||[]},x=function(n,t){void 0===t&&(t=!0);var e=(A(n,"className")||"").trim();return t?e.split(/\s+/).filter((function(n){return""!==n})):e},w=function(n,t){void 0===t&&(t=!0);var e="innerHTML";if(!H(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},L=function(n){return l(n&&n.nodeName||"")||null},T=function(n,t){return t?n.closest(t)||null:n.parentNode||null},E=function(n,t,e){void 0===e&&(e=!0);var r=b.getComputedStyle(n).getPropertyValue(t);return e&&(r=p(r)),r||""===r||0===r?r:null},A=function(n,t){return H(n,t)&&n[t]||null},O=function(n,t){void 0===t&&(t=!0);var e="textContent";if(!H(n,e))return!1;var r=n[e];return""!==(r=t?r.trim():r)?r:null},$=function(n,t){return n.hasAttribute(t)},C=function(n,t){return n.classList.contains(t)},H=function(n,t){return t in n},P=function(n){return n===b},z=function(n,t){return n.removeAttribute(t),n},R=function(n,t){return n.classList.remove(t),n},N=function(n,t){return z(n,"data-"+t)},S=function(n,t){return n.style[f(t)]=null,n},I=function(n,t,e){return!0===e&&(e=t),n.setAttribute(t,h(e)),n},M=function(n,t){return n.append(t),t},W=function(n,t){return n.classList.add(t),n},_=function(n,e,r){return(t(r)||i(r))&&(r=JSON.stringify(r)),I(n,"data-"+e,r)},B=function(n,t,e){return n=o(n)?g.createElement(n):n,i(t)&&(e=t,t=!1),o(t)&&D(n,t),i(e)&&function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?I(n,r,e):z(n,r)}(n,e),n},D=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="innerHTML";return H(n,r)&&(n[r]=e?t.trim():t),n},K=function(n,t,e){return r(e)&&(e+="px"),n.style[f(t)]=h(e),n},U=function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?K(n,r,e):S(n,r);return n},F=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var r="textContent";return H(n,r)&&(n[r]=e?t.trim():t),n},J=function(n,t,e){return n.classList.toggle(t,e),n},V=function(n){return P(n)?[n.innerWidth,n.innerHeight]:[n.offsetWidth,n.offsetHeight]},X=function(n,t){return n.scrollLeft=t[0],n.scrollTop=t[1],n};function Y(n){var t={};return n.hooks=t,n.fire=function(e,r){return u(t[e])?(t[e].forEach((function(t){return t.apply(n,r)})),n):n},n.off=function(e,r){if(!u(e))return t={},n;if(u(t[e]))if(u(r)){for(var i=0,o=t[e].length;i<o;++i)if(r===t[e][i]){t[e].splice(i,1);break}0===j&&delete t[e]}else delete t[e];return n},n.on=function(e,r){return u(t[e])||(t[e]=[]),u(r)&&t[e].push(r),n},n}var q=function(n,t,e){t.removeEventListener(n,e)},G=function(n){return n&&n.preventDefault()},Q=function(n,t,e,r){void 0===r&&(r=!1),t.addEventListener(n,e,r)};const Z="ArrowDown",nn="ArrowUp",tn="Enter",en="Escape",rn="‌";function un(n){let t=g.createRange();t.selectNodeContents(n);let e=b.getSelection();e.removeAllRanges(),e.addRange(t)}function on(r,i={}){const u=this;if(!r)return u;if(r.OP)return r.OP;if(!e(u,on))return new on(r,i);let{fire:o,hooks:f}=Y(u);var c;function A(){return[p(j()),u.options]}function j(){if(Cn){let n=[];for(let t=0,e=s(Pn);t<e;++t)fn(Pn[t])&&n.push(S(Pn[t]));return n}let n=r.value;return""!==n?n:null}function S(n){let t=n.value||O(n);return""!==t?t:null}function fn(n){return $(n,"selected")}function ln(n){z(n,"selected"),n.selected=!1}function cn(n){R(n,yn+"selected")}function sn(n){I(n,"selected",!0),n.selected=!0}function an(n){W(n,yn+"selected")}function dn(n){n=n||rn,Mn.title=n.replace(/<.*?>/g,""),D(Mn,n)}function pn(n){if(Cn){let n,e=function(n){return t(n)?n:[n]}(n);for(let t=0,r=s(Pn);t<r;++t)n=S(Pn[t]),e.includes(p(n))?sn(Pn[t]):ln(Pn[t])}else r.value=n}u.state=i=v({},on.state,i),u.options={},u.source=r,on.instances[r.id||r.name||(c=on.instances,s(d(c)))]=u,r.OP=u;let vn=i.class,hn=vn+"__",gn=vn+"--",bn=hn+"input",mn=hn+"option",yn=mn+"--",kn=hn+"options",xn=hn+"value",wn=hn+"values",Ln=B(r,{class:hn+"source",tabindex:-1}),Tn="input"===L(Ln)?B("span","",{class:bn}):null,En=Tn?r.placeholder:"",An=B("span",En),On=B("span","",{contenteditable:"",tabindex:0}),$n=()=>Ln.disabled,jn=k(Ln),Cn=Ln.multiple,Hn=0,Pn=Ln.options,zn=i.parent||g,Rn="input"===L(Ln)?0:Ln.size,Nn=Ln.title,Sn=j(),In=B("div",{class:vn,tabindex:!Tn&&!$n()&&0,title:Nn}),Mn=B("div",rn,{class:wn}),Wn=Ln.list,_n=0,Bn=0,Dn=B("div",{class:kn,tabindex:-1}),Kn=[],Un=!1,Fn=!1;var Jn,Vn;function Xn(){R(In,gn+"focus"),o("blur",A())}function Yn(){W(In,gn+"focus"),o("focus",A())}function qn(){W(In,gn+"open"),o("enter",A())}function Gn(){Cn||Rn||(R(In,gn+"open"),o("exit",A()))}function Qn(){_n=a(E(In,"border-bottom-width")),Bn=a(E(In,"border-top-width")),wt(In)}function Zn(n){J(In,gn+"open",n);let t=tt();return o(t?"enter":"exit",A()),t}function nt(n,t,e,r){return B("span",n,{class:xn+" "+r,"data-index":t,"data-value":e}).outerHTML}function tt(){return C(In,gn+"open")}function et(){(Tn?On:In).focus()}function rt(n){if(!Pn||$n())return;let t,e,r,u=[],f=this,l=f.$,c=Sn;if(Hn=f.i,Sn=f.v,n&&n.isTrusted&&et(),G(n),Cn&&(Un||Fn)){!function(n){return C(n,yn+"selected")}(f)?(sn(l),an(f)):(ln(l),cn(f));for(let n,i=0,o=s(Pn);i<o;++i)fn(Pn[i])&&(t=O(n=Kn[i]),e=n.i,r=n.v,u.push(nt(t,e,r,x(n,!1))));return dn(u.join("<span>"+i.join+"</span>")),void o("change",A())}t=O(f),e=f.i,r=f.v,t&&Tn&&(D(An,rn),F(On,t)),dn(nt(t,e,r,x(f,!1))),Tn&&(un(On),pn(t)),Kn.forEach((n=>{Sn===n.v?(sn(n.$),an(n)):(ln(n.$),cn(n))})),Sn!==c&&o("change",A())}function it(n){Xn()}function ut(n){if(!$n()){if(Hn=Ln.selectedIndex,Rn)return qn();Tn?On.focus():Zn()&&Qn()}}function ot(n){Hn=Ln.selectedIndex,Yn()}function ft(n){if(!Pn)return;Un=n.ctrlKey,Fn=n.shiftKey;let t=n.key,e=Hn,r=Kn[e],i=n=>C(n,yn+"disabled"),u=n=>rt.call(n),o=tt();if(Z===t){for(;(r=Kn[++e])&&(i(r)||r.hidden););r&&(u(r),Zn(o)),G(n)}else if(nn===t){for(;(r=Kn[--e])&&(i(r)||r.hidden););r&&(u(r),Zn(o)),G(n)}else if("End"===t){for(e=s(Pn);(r=Kn[--e])&&(i(r)||r.hidden););r&&(u(r),Zn(o)),G(n)}else if(tn===t)r&&u(r),Zn(),G(n);else if(en===t)!Rn&&Gn();else if("Home"===t){for(e=-1;(r=Kn[++e])&&(i(r)||r.hidden););r&&(u(r),Zn(o)),G(n)}else"Tab"===t&&(!Tn&&r&&u(r),!Rn&&Gn());tt()&&!Un&&!Fn&&Qn()}function lt(){Un=Fn=!1}function ct(){let n=O(On);null!==n&&pn(h(n)),Xn()}function st(){if(!Pn)return;let n,t,e=O(this);Hn=-1,un(this);for(let r=0,i=s(Pn);r<i;++r)n=Pn[r],t=Kn[r],e===O(n)?(Hn=r,sn(n),an(t)):(ln(n),cn(t));Yn(),Zn()&&Qn()}Cn&&!Rn&&(Ln.size=Rn=i.size),Tn&&Wn&&(jn=k(Wn),Pn=Wn.options,Rn=null,Sn&&(D(An,rn),F(On,Sn))),Tn&&(M(Tn,On),M(Tn,An)),M(In,Tn||Mn),Vn=In,T(Jn=Ln).insertBefore(Vn,function(n,t){return n.nextSibling||null}(Jn));let at=(dt=(t,e,r)=>{let i,u,o=O(t);if(null===o){D(An,En),Dn.hidden=!1;for(let n=0,t=s(Kn);n<t;++n)D(u=Kn[n],O(u)),u.hidden=!1}else if(D(An,rn),r!==(o=l(o))&&Z!==e&&"ArrowLeft"!==e&&"ArrowRight"!==e&&nn!==e&&tn!==e){for(let n,t=0,e=s(Kn);t<e;++t)ln((u=Kn[t]).$),cn(u),n=O(u),n&&l(n).includes(o)?(!i&&(i=u),D(u,n.replace(RegExp(o.replace(/[!$^*()+=[]{}|:<>,.?\/-]/g,"\\$&"),"gi"),(n=>"<mark>"+n+"</mark>"))),u.hidden=!1):(D(u,n),u.hidden=!0);i?(Hn=i.i,sn(i.$),an(i),Dn.hidden=!1):Dn.hidden=!0,r=o}else{let t=0;for(let e,r=0,i=s(Kn);r<i;++r)u=Kn[r],e=w(u),n("</mark>",e)&&++t;if(t<=1)for(let n,t=0,e=s(Kn);t<e;++t)u=Kn[t],n=O(u),D(u,n),u.hidden=!1}tn!==e&&en!==e&&"Tab"!==e&&(qn(),Qn())},pt=1,function(){var n=arguments,t=this;vt&&clearTimeout(vt),vt=setTimeout((function(){return dt.apply(t,n)}),pt)});var dt,pt,vt;function ht(n){let t=this,e=n.key;ft(n),at(t,e,O(t))}function gt(){lt()}let bt=function(n,t){return function(){var e=arguments,r=this;setTimeout((function(){return n.apply(r,e)}),t)}}(((n,t)=>{let e=O(n);D(t,null!==e?rn:En),F(n,e),un(n)}),1);function mt(){bt(On,An)}function yt(n){let t=n.target;if(t!==In)for(;(t=T(t))&&In!==t;);In!==t&&Gn()}function kt(){tt()&&wt(In,1)}function xt(e,r){if("optgroup"===L(e)){let n=B("span",{class:mn+"-group"+(e.disabled?" "+yn+"disabled":"")}),t=k(e);n.title=e.label;for(let e=0,r=s(t);e<r;++e)xt(t[e],n);return void M(r,n)}let i=function(n,t,e){if(void 0===e&&(e=!0),!$(n,t))return null;var r=n.getAttribute(t);return e?p(r):r}(e,"value",!1),o=i,f=O(e),l=e.title,c=B("a",f,{class:mn,title:l||f});i=i||f,c.i=Hn,c.$=e,c.v=i,function(n,t){var e;for(var r in t)(e=t[r])||""===e||0===e?_(n,r,e):N(n,r)}(c,{index:Hn,value:o}),u.options[i]=f,e.disabled?W(c,yn+"disabled"):Q("click",c,rt),M(r,c),Kn.push(c),""===o&&(i=null),t(Sn)&&n(i,Sn)||i===Sn?(W(c,yn+"selected"),dn(nt(f,Hn,o,x(c,!1))),sn(e)):ln(e),++Hn}function wt(n,t){if(!Rn){let[t,e,r,i]=function(n){var t,e,r,i,u,o,f;return P(n)?(i=n.pageXOffset||y.scrollLeft||m.scrollLeft,u=n.pageYOffset||y.scrollTop||m.scrollTop,r=n.innerWidth,t=n.innerHeight):(i=(e=n.getBoundingClientRect()).left,u=e.top,r=e.width,t=e.height,o=e.right,f=e.bottom),[i,u,r,t,o,f]}(n),u=V(b)[1],o=u-e-i;U(Dn,{bottom:"",left:t,"max-height":o,top:e+i-Bn,width:r}),o<(u-i)/2?(o=e,U(Dn,{top:"",bottom:u-e-_n,"max-height":o+Bn}),R(n,gn+"down"),W(n,gn+"up")):(R(n,gn+"up"),W(n,gn+"down"))}if(!t){let n=Kn.find((n=>C(n,yn+"selected")));if(n){let t=V(n)[1],e=V(Dn)[1],[r,i]=function(n){return[n.offsetLeft,n.offsetTop]}(n),u=function(n){return[n.scrollLeft,n.scrollTop]}(Dn)[1];i<u?X(Dn,[r,i]):i+t-e>u&&X(Dn,[r,i+t-e])}}o("fit",A())}!function(n,t,e,r){void 0===r&&(r=!1),n.forEach((function(n){return Q(n,t,e,r)}))}(["resize","scroll"],b,kt),Q("click",zn,yt),Q("focus",Ln,et),Q("click",In,ut),Tn?(Q("blur",On,ct),Q("focus",On,st),Q("keydown",On,ht),Q("keyup",On,gt),Q("paste",On,mt)):(Q("blur",In,it),Q("focus",In,ot),Q("keydown",In,ft),Q("keyup",In,lt));let Lt=s(jn);if(Lt){M(In,Dn);for(let n=0;n<Lt;++n)xt(jn[n],Dn);if(Rn){let n=Kn[0],t=V(n)[1]*Rn;K(Dn,"max-height",t)}}return Rn&&(W(In,gn+"down"),W(In,gn+"open")),u.get=(n=!0)=>{let t=j();return n?p(t):t},u.pop=()=>r.OP?(delete r.OP,function(n,t,e){n.forEach((function(n){return q(n,t,e)}))}(["resize","scroll"],b,kt),q("click",zn,yt),q("focus",Ln,et),R(Ln,hn+"source"),q("click",In,ut),Tn?(q("blur",On,ct),q("focus",On,st),q("keydown",On,ht),q("keyup",On,gt),q("paste",On,mt)):(q("blur",In,it),q("focus",In,ot),q("keydown",In,ft),q("keyup",In,lt)),function(n){var t="textContent";H(n,t)&&(n[t]="")}(In),function(n){var t=T(n);n.remove()}(In),o("pop",A())):u,u.set=n=>Pn?(pn(h(n)),Kn.forEach(((n,t)=>{let e=Pn[t];J(n,yn+"selected",e&&fn(e))})),o("change",A()),u):u,u.self=In,u}return on.instances={},on.state={class:"option-picker",join:", ",parent:null,size:5},on.version="1.3.8",on}));